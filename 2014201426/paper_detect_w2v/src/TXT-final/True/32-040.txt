 
tracking a partially predictable moving object in a workspace cluttered by obstacles is a challenging combination of two planning problems. the planner must take into account on the one hand the visibility and motion constraints imposed by the obstacles and on the other hand the uncertainties in both the robot's position and the future trajectory of the target. game theory is proposed as an appropriate framework to solve this twofold problem. at each time step  a probability distribution models the positioning uncertainties of the robot and the target and a utility function represents the reward associated with the possible goal states of the motion decision problem. this approach allows the simple modeling of different tracking strategies  one of which has been implemented and tested successfully with two mobile robots. by considering simultaneously target visibility and position uncertainty  the tracking robot can take advantage of landmarks scattered in the workspace to better localize itself so as to better track the target afterward. future extensions seem possible in order to introduce useful symbolic inferences within the game-theoretic framework. 
1 	introduction 
dealing with uncertainty is a major problem in robotics  e.g. see  dorst et al.  1  for an overview   which raises and combines a number of issues often associated with estimation  planning or execution control. it is usually unrealistic to assume that a complete and absolutely precise model of the environment can ever be obtained. yet  a robot is expected to compute and execute robust plans. while computational geometry offers tools to deal with geometric constraints  collision  visibility  arising from the robot's workspace  artificial intelligence techniques make it possible to make decision in the presence uncertainty. but the techniques from those two fields have rarely been combined and in fact are seldom compatible. 
1 	planning and scheduling 
latombe  jean-claude 
stanford university 
department of computer science robotics laboratory stanford  ca 1  usa. 
　in this paper we show how methods developed independently can be combined to solve a target tracking problem presented in ′ 1. in this problem  a mobile robot must keep a moving target into its field of view. the workspace is cluttered by obstacles that create motion and visibility constraints. uncertainties in the robot's self-localization and in the target behavior add to the complexity of the problem. game theory  luce and raiffa  1  offers a convenient framework for both decision making under uncertainty  savage  1  and robot motion planning  lavalle  1 . the game-theoretic formulation presented in ′ 1 is specifically proposed for the online computation and execution of target-tracking motion strategies in the presence of uncertainties  ′ 1 . we have implemented the techniques presented in this paper and tested them with real robots: characteristics of the produced motion strategies are discussed in ′ 1. some shortcomings lead us to propose several extensions in ′ 1. 
1 	tracking problem 
a mobile robot equipped with visual sensors  called the observer  operates in a workspace cluttered with static obstacles. its task is to keep another moving object  the target  in its field of view while avoiding collision with the obstacles. all the obstacles create visual occlusion. hence  the observer must move in such a way that the target is never hidden behind an obstacle. 
　we assume that the workspace is realistically described by a 1-d map  planar layout  of the obstacles. both the observer and the target are modeled as discs. 
an accurate map of the obstacles is given to the observer before target tracking begins. 
　the observer uses a camera mounted on a turret to detect the target. the turret rotates fast enough to make it possible to consider that the observer has omnidirectional vision  independent of its current heading. the observer detects and recognizes the target whenever it has a cone of sight to the entire target's disk not obstructed by any obstacle. in our implementation  a black-and-white geometric pattern is mounted on the target to simplify visual detection. there exist more sophisticated vision techniques to detect natural targets  e.g. see  bregler and malik  1  . 

　the target is mostly unpredictable  that is  its future trajectory is not known in advance  but it moves collision-free and its velocity has a known upper bound. the observer localizes itself relative to the workspace using both odometrie and landmark techniques. our landmarks are simple geometric patterns placed at the ceiling 
of the robot environment; they are detected and recognized using a camera mounted vertically on the observer platform  becker et al.  1 . natural landmarks could be used as well  but would require more sophisticated vision techniques. whenever the observer sees a landmark  it localizes itself in the workspace with a given precision  on the order of l-1in  that has been experimentally established. when the robot does not see any landmark  the imprecision of its location estimate  dead-reckoning  grows linearly with the distance traveled. to keep our work realistic and compatible with the use of natural landmarks  the artificial landmarks are sparsely distributed over the workspace. the two vision systems used for target tracking and landmark detection  respectively  are independent and operate concurrently. 
　the observer uses the vision system that tracks the target to estimate the target's position relative to itself and  through a simple transform  to the workspace. note that the observer cannot track the target by only using their position relative to one another. it must also estimate both its own position relative to the workspace to avoid colliding with the obstacles and the target's position in the workspace in order to move in such a way that it prevents the target from hiding behind an obstacle. 
1 	related work 
this tracking problem is a challenging combination of different planning problems that have previously been studied in robotics  but separately. visibility and collision constraints must be satisfied in the presence of uncertainties in the positions of the observer and the target. the problem of maintaining visibility with the target while avoiding collision with the obstacles is addressed in  lavalle et al.  1   but position uncertainties are not taken into account. when the target is fully predictable  that is  when its future trajectory is completely known in advance  a dynamic programming approach  bertsekas  1  can be used to compute a tra-
jectory of the observer that has minimal length. 
　as shown in  lavalle et a/.  1   this approach becomes untractable in practice if the target is only partially predictable. then  the approach can be applied to choose a motion command that aims to maximize the likelihood that the target will remain visible during a short interval of time in the future. the observer iterates this computation while tracking the target and updates its motion heading at each iteration. this is essentially the approach taken in this paper. the main difference is that we take into account the uncertainties in the observer's and target's positions. this difference will motivate the embedding of this approach into the game-theoretic framework presented in 1. 
　taking position uncertainties into account naturally leads to planning the observer's motions in order to take advantage of the landmarks in the workspace to reduce the imprecision of the estimate of the observer's position  and consequently that of the target   whenever this does not immediately conflict with keeping the target in the observer's field of view. landmark-based navigation has been addressed from different points of view in the literature  e.g. see  bouilly and simeon  1; saffiotti and wesley  1; takeda et al.  1; lazanas and latombe  1  . the principle is simple: if the robot primarily localizes itself relative to landmarks  the planner must guarantee that the robot will see landmarks often enough along its path  fualdes and barrouil  1 . to our knowledge  no previous work on landmarkbased navigation simultaneously deals with achieving a visual task such as maintaining visibility with a moving target. 
1 	game-theoretic approach 
different discrete processes intervene in the behavior of the observer. during each iteration  the observer chooses its next move according to the last estimate of the target's position  executes it  localizes itself  by using a landmark  if one is visible   and computes a new estimate of the target's position. meanwhile  the target is moving to another location. 
　let  be the initial time point   the duration of the time interval between two sampling time  the duration of the global decision loop   and k 1 an index corresponding to the time point 
the observer and the target move in the same workspace  but since their respective shapes and sizes may differ  their free configurations belong to two different 
configuration spaces  defined with standard parameterizations  latombe  1   respectively and  
let and denote the respective configurations of the observer and the target at time k. then  the global state at time k is given by the couple  
denote the set of 
all possible states. let designate the visibility region of the target at configuration i.e.  the set of all configurations from which the observer has an unobstructed cone of sight to the entire body of the target. let that are between 
times 
　game theory provides a convenient framework to express decision problems in the presence of uncertainty. yet  most work in that field has focused on the probabilistic part of the theory  especially on the bayesian computation of the probability distributions  pomdp  white  1   bayesian networks  pearl  1  . game theory rests on the axiomatization of a relation of preference defined over the possible choices. 
this relation rests on the definition of both a probabil-
	fabiani and latombe 	1 

ity measure and a utility function over the possible eonsequences. we think that the utility part of the theory is as important as the probabilistic part. 
　let us define a decision problem over the triplet where 	is the set of atomic states   is the set of possible decisions  and 	is the set of possible consequences 	each possible decision  is 
a function  
a decision problem also requires the definition of a 

we have: 
 1  
in our target tracking problem  suppose that at time 
+1 the target is at configuration and the observer has reached after the motion decision was made in state the new state is a consequence of dk. the need that be inside the visibility region can be expressed in the utility function of the problem. 
　more precisely  our tracking problem is a sequence of motion decision problems  one at each time all defined on the same state space 
the set  of possible consequences is also fixed. as the observer may collide with obstacles by mistake  due to localization errors   there is an additional consequence ceil  standing for  collision  . the resulting set of con-
sequences is  at each time the motion decision problem can be defined as follows: 
  the observer's and target's positions are not pre-cisely known at time denote the probability distribution of the observer's  resp. target's  position over the joint 
	distribution 	is the probability dis-
tribution over  
  let be the current estimate of the position of the observer according to this estimate can be a singleton or a set of configurations. 
1 	planning and scheduling 
  let be the set of possible motion decisions for the observer from the current estimated configuration in practice  is finite. 
  the utility function over  here  the set of possible consequences at time 1- 1  can be simply defined to be 1 if the observer sees the target at time + 1 and 1 if it does not see the target or has collided with an obstacle. more formally: 
geometric constraints illustrated in fig. 1 directly affect the evaluation of the above utility function: is the observer colliding with obstacles  or not  is the observer in the visibility region of the target  as we will see in the next section  they also affect the computation of the probability distributions and hence that of the best motion decision defined by equ.  1 : can the observer see a landmark  
　note that more complex utility functions could be considered. for example   could evaluate to the minimal distance that the target would have to travel before  is no longer in the target's visibility region. 
1 	modeling uncertainties 
in our work will only consider uncertainties caused by inaccuracies in sensing in motion control and in lack of prior knowledge of the target's trajectory. uncertainty in the observer's location depends critically on whether it sees a landmark  or not. 
　whenever the observer moves and no landmark is visible  dead-reckoning errors occur and accumulate. consequently  the uncertainty on the position of the observer increases  see fig. 1  and the observer may risk collision along a supposedly collision-free path. the actually reached configuration at time - 1  can be modeled as a random variable that is conditionally dependent upon both the observer's configuration at time  and the decision made at time k  dib*. 
　the conditional probability  is given a priori and allows the computation  at time k  of the predictive probability law at time which models the imprecision of dead-reckoning. 

on the position of the target in the workspace combines the uncertainty on the target's position relative to the observer and the uncertainty on the observer's position in the workspace. hence  depends on both and  and it is necessarily more imprecise than  
 see fig. 1 . the target's partial predictability between times  can be written:  
since the target's trajectory is not known in advance  stgt depends only the known target's maximal velocity. this means that the uncertainty on the target's position at time   as predicted at time  may be much greater than for the observer. on the other hand  the 
ability law . the location uncertainty reduces whenever 	target is observed at every time step before the predic-
tion stage  which considerably reduces uncertainty. the evolution equation for the target takes into account how 
the probability measure is updated at time by the observer and how it evolves from time -f 1 due to partial predictability of the target: 
 1  
figure 1: the localization dilemma 
the observer sees a landmark. let be a boolean variable equal to 1 whenever the observer reaches a position at time  -f 1 where it can see a landmark  and 1 otherwise  or if the observation of the landmark fails . when a landmark is visible  the positioning accuracy that is obtained after the updating process at time depends both on the predictive probability law 

and on the experimentally established precision of the localization. this is modeled by the updating function in the following equation: 
i f and only i f = 1  1  if and only if =1  1  
eventually  the probability distribution at time  depends both on and on the observation of a landmark  if a landmark has been observed. is thus 
given by equations  1  to  1  as a function of the probability measure the d e c i s i o n m a d e at time and the value of the variable this is summarized in the following evolution equation  where the evolution function  models both the possible motion errors and the reduction of positioning imprecision whenever a landmark is detected: 
1  
 1  
similarly  due to the limited capabilities of its tracking camera  the observer can only obtain an imprecise estimate of the position of the target relative to own current position  see fig. 1 . let  denote the probability over the possible configurations of the target after detection by the observer at time  the uncertainty figure 1: positioning imprecision 
1 	tracking strategies 
at each time step  the observer  decides where to move according to and is the in-
formation state of the observer at time and the global evolution equation 	follows from equ.  1  and  1 . a strategy for the tracking problem with finite time horizon  white  1  is a sequence of decision rules  
an optimal strategy is obtained by discrete dynamic programming  white  1 . let denote  the optimal value function for the /i-stage tracking problem begin-
ning with an initial probability distribution at time t1  i.e. the maximum expected reward that the observer can get with this initial condition. bellman's optimality equations give :  
unfortunately  as already mentioned in 1  the cost of computing an optimal strategy is exponential in the horizon h  number of time steps . this difficulty is wellknown in the field of pomdp's  white  1  where 
	fabiani and latombe 	1 

dynamic programming is nevertheless widely used. in target tracking  a greater h would make it possible to compute better strategies if the computation time was negligible. but since this is not the case and the target moves while the observer computes its next motion  a compromise is necessary. in our experiments in simulation  we computed strategies with h = 1. in our experiments with real robots  we used h = 1. the empirically established real-time constraint with real robots is that the observer must choose a motion command within 1ms. on a sun sparcstation 1 the computation time for ft = 1 ranges between 1 and 1ms  but grows up to 1ms for h = 1. 
　for h = 1  the decision rule at time when is the probability distribution over corresponds to in equ.  1 . hence  the best decision is: 
 1  
where  
1 	experimentation 
experiments were conducted to test our game-theoretic approach : the observer and the target are two nomad1 mobile robots of nomadic technologies. each nomad-1 has a rigid cylindrical body that allows its representation as a disc in the 1-d workspace. the observer detects landmarks placed at the ceiling of the 
laboratory. it can track the target regardless of its current heading  thanks to a camera that is kept aimed at the target by servoing the observer's turret appropriately. all the obstacles in the environment are polygonal and obstruct both visibility and motion. more sophisticated geometric models for the obstacles are possible. simple probabilistic models of the robots were introduced in the evolution equations  equ.  1 - ll  : they can be improved experimentally. their good behavior in practice is due to the fact that they are rather conservative. yet  it can be argued that little improvement is to be expected from more precise probabilistic models  while so little is known about the target's future motion. 
　thanks to the fact that all obstacles are static and known in advance  a number of precomputations are performed in advance in order to reduce on-line computation times  e.g. visibility and reachability regions . the utility function uk at each time step k is obtained through a small amount of calculation  equ.  1 - 1   and with nice properties of piecewise smoothness.  could have been chosen to give a higher penalty to collision. 
for a given state at time  a more sophisticated could have been proposed  for example to penalize states where the observer is close to loosing the target and/or where the observer's turret needs to rotate by a large amount.  could also be designed to take into account the speed of the observer at stage  in order to advantage future configurations that correspond to small accelerations of the observer in either direction. yet  simplicity was preferred. 
1 	planning and scheduling 

figure 1: sample sequence of motion decisions 
　fig. 1 represents an 1-step decision sequence generated by the observer's planner in response to target's moves. this sample sequence shows snapshots of the graphic display of the conducted experiments: the target appears as a dark disk and the observer as a light-grey disc with a little tail. in each snapshot  the small grey circle with variable radius and the same center as the observer depicts the observer's positioning uncertainty. the other static light-grey disks represent landmark regions  regions in which the observer's center must lie in order to see a landmark . the landmark that was detected the most recently  recognized and used for location updating by the observer is marked with a small blue circle in the center. the arrows describe each agent's moves. please note that the target's moves are represented by arrows reflecting the target's next move in the scenario  whereas for the observer the arrows reflect the subsequent move that is performed by the observer in response to the observed move of the target at the previous stage. 
　the conducted implementation successfully validates our approach. the observer is able to manage properly its positioning uncertainty. whenever a landmark visibility region is reachable  the motion decision corresponds to the best compromise between the tracking task and the need for location updating. there is no conflict because the observer localizes itself so as to better track the target afterward. more precisely  the following features are remarkable in its behavior in fig. 1: 
  the observer takes its positioning uncertainty into account before choosing its next move: it localizes itself when useful  but does not need to do so when it can travel in a wide enough free area  stage 1 ; 

  the observer goes and localizes itself so as to reduce its positioning imprecision  if possible  prior to entering a narrow region  stages 1 ; 
  the observer always minimizes its probability of collision because this improves the probability of visibility of the target at next time step; 
  in practice the observer's probability of collision remains equal to zero whenever possible  stages 1 here   unless the observer gets trapped by the target in a narrow region where it cannot reach any landmark region in order to localize itself. 
1 	perspectives 
the nice experimental behavior of the designed planner shows that the choice of modeling this problem in a game-theoretic framework was more than a theoretical exercise: it should allow geometric algorithms to be efficiently combined with algorithms designed for pomdp's or bayesian networks. still  this would need to be further formalized with more generality  so to be applicable to a wider range of problems. 
　furthermore  the proposed game-theoretic framework allows dealing with symbolic constraints  e.g.  a robot cannot see/travel through walls   and reasoning with probabilistic uncertainty to be efficiently combined through the computation of well-adapted utility functions. the introduction of reasoning mechanisms  such as in fuzzy sets theory  saffiotti and wesley  1  or possibility theory  dubois and prade  1  seem to be a promising approach for reasoning with utility functions. in that perspective  the conducted experiments provide interesting ideas for future developments. for instance  when the observer happens to estimate the position of the target on a configuration that is not collisionfree  this may be due to location and detection errors  but also to the fact that some obstacles in the modeled workspace of the robots do not exist in the real environment: our 1-d layout of the workspace actually is a very conservative model of the real indoor environment. dealing with an incomplete and inaccurate map in full generality is a really tough challenge. the proposed generalized game-theoretic approach should provide an interesting framework in order to release progressively the hypothesis of a perfectly known environment. 
acknowledgments 
we thank hector h. gonzales-banos and david lin for their technical inputs throughout this research and for their assistance in setting up the robotic experiments. this research was funded in part by aro muri grant 
daah1-1. patrick fabiani was supported by dga and onera. 
