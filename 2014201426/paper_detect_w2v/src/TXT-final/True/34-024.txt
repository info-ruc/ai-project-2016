 
     bargaining is a process used to modify conflicting demands on an expendable resource so that a satisfactory allocation can be made in this paper  a bargaining system is designed to handle the problem of scheduling an individual's weekly activities and appointments. the bargaining system is based on the powerful reasoning strategy of producing a simplified linear plan by considering the various constraints 
independently and then debugging the resulting conflicts 
introduction 
     the bargaining system described below is built upon three basic ideas the first is the use of frames  a generalized property-value representation that provides a rich description of acceptable assignments for each value. frames are used by the scheduler to describe both people and activities a vocabulary is developed for expressing default choices  legitimate variations  preferences and requirements. the second is the generation of a possibility space that provides a simplified overview of alternative solutions the possibility space is constructed from linear plans  i.e. schedules for each activity developed independently of one another the third is an explicit representation of various bargaining techniques that include strategies for relaxing defaults  preferences and even requirements these bargaining techniques are used to debug linear plans by resolving conflicts between activities scheduled at the same time. hence  the analysis of bargaining represents an extension of recent work on debugging  goldstein 1  sussman 1  applied to a new  non-procedural domain. 
     the scheduler which i shall describe plans a week's activities for an individual as welt as alters his tentative scheduling in response to unexpected appointment requests it is member of a class of al projects generally called personal assistants personal assistants are an increasingly popular domain for al research at mit  fred kern is programming and continuing the development of the scheduler described in this paper  kern 1 . mitch marcus has considered the information retrieval problem  marcus 1  and dave mcdonald has analyzed the task of english generation by the assistant  mcdonald 1} projects for programming a travel budget manager and an apartment finder are currently underway at bolt  baranek and neuman  woods 1} and xerox palo alto research center  bobrow 1 . this popularity is well-deserved it is the author's opinion that in the coming years al techniques will make a significant impact on the personal assistant domain and. in particular  on the design of personal resource  money  time  effort  and personal information  letters  papers  note   management systems 
     before entering into thr details of our analysis  the reader may wish to know what this paper has to contribute to the scheduling problem that is not already included in the various scheduling programs that exist for allocating time  money or space resources. the answer lies in the use of a much larger amount of knowledge in order to reach more intelligent accomodations between conflicting goals. the traditional scheduling situation is one in which there are a great many items to be scheduled  but  for each item  the system knows only a small number of absolute requirements an example is allocating classrooms for lectures at a 
     university  where for each lecture the system has been told the required length of time and frequency this kind of problem is basically one of fitting together a jigsaw puzzle from pieces of predetermined shape our interest  however  is in a different kind of bargaining situation  namely one in which the number of events to be scheduled is smaller  but where  for each event  we have available a rich set of knowledge regarding the relevant constraints we do not expect to meet all of these constraints  but rather come to some compromise between conflicting goals in our bargaining domain  the pieces of the jigsaw puzzle are over-specified and part of the solution lies in changing their shape 
     a final caveat for the reader the design of the scheduler described in this paper is as yet only tentative and the program is only partly written i believe the paper should be of interest as a study of the kinds of knowledge and techniques that play a role in the common sense process of satisfying conflicting constraints but there inevitably will be some fuzzy points in the ensuing discussion  especially with respect to the overall control structure  that represent the gap between design and implementation 
scheduling frames 
     frames are data structures that provide expectations regarding assignments of values to various important properties  minsky 1  winograd 1  for our scheduling system  frames are provided which describe the time requirements of various activities and the particular preferences of individuals. 
     let ira be a hypothetical individual using our scheduling system in order to produce a plan for the expected activities in ira's week  without excessive specification on the part of the user  default assignments are provided for the important properties of the expected activities such as the desired time and duration of meetings of the personal assistant research group. 

1 
     
     however  conflicts may arise such as those caused by the unexpected arrival of an important visitor. to cope with them  additional information is provided regarding acceptable ranges in which a property's value may fall  preferences which are desirable but not necessary and requirements which must be met if the activity is to be successfully scheduled at all. the following assertions provide such information regarding the scheduling of preparation time for ira's lectures.  fig. 1  further examples of each of these different kinds of advice regarding value assignments is provided in figure i. this type of information allows the system to engage in various kinds of bargaining which we shall describe in greater detail in a later section. 
linear plans and possibility spaces 
     in order to generate a reasonable default plan for the week's expected activities  the scheduler collects ira's requirements  defaults and preferences for each of his activities. figure illustrates a subset of the database concerning personal assistant meetings viewed from this perspective. the advice regarding each activity is collected from the person's frame  the activity's frame  and superiors of these frames pointed to by a-kind-of pointers. 
     a linear plan is then constructed for each activity  i.e. ft is scheduled at some time  independently of the existence of other activities. the time is chosen on the basis of advice extracted from the frame for that activity  from superiors of that frame linked to it by chains of  a-kind-ai  relations and from advice about that frame contained any person frames involved as participants 
     the set of linear plans for each of an individual's activities forms a possibility space of alternative calendars for the week. figure 1 shows such a possibility space for ira.  teaching actually consists of two activities  lecturing and preparation. however  for simplicity  it is shown as a single block of time.  
     this structure is built by considering each activity of ira independently of the others research  for example occurs on every day because of the preference that its total duration be maximized lunch is scheduled at the default time of ii rather than 1 because ira's preference for an early lunch overrides the default time of 1 given in the lunch frame tf.achinc includes both classtime and preparation and is therefore intended to last the entire day. the conjunction of a preference for meetings on fridays and pa- meetings in the afternoon causes the pa-meetinc to be scheduled on friday at i 
     the possibility space  viewed as a conjunction of linear plans  has bugs in the form of conflicting activities. lunch and research  lunch and teaching  research and teaching  research and meetings - all of these pairs of activities conflict thus  we have found the first instance in which bargaining techniques must be applied 
bargaining techniques 
     bargaining techniques are required to debug conflicts between activities in the weekly plan of a single individual as well as to schedule appointments given conflicting constraints of the participants these techniques fall into two classes the first  which i shall call resource driven  are experts at altering the particular interval chosen by some goal  while still satisfying the goal they include relaxing defaults  relaxing preferences  swapping intervals  time shattng and interrupting these strategies are expert at manipulating the  time  resource. they have obvious analogues for manipulating other resources like space and effort these strategies do not question the justification for pursuing the goal  but rather attempt relatively local alterations of the various kinds of advice - defaults  range  preferences -- that allow the interval to be altered without actually violating the overall goat. 
     the second class of techniques are purpose-driven. these strategies  as opposed to the resource-driven techniques  are capable of eliminating or modifying requirements they do so by altering the least important goals  as chosen by analyzing the overall purpose of the event the resourcedriven techniques are ignorant of the relative importance of competing goals and are therefore unable to be as radical as the purpose-driven strategies 
     these bargaining techniques can be viewed as debugging strategies for resolving unforseen interactions between linear plans. as such  they represent a further analysis of the simplify and debug problem solving paradigm explored in recent papers by  goldstein 1  and  sussman 1  
     t h e following paragraphs describe each of the techniques that we currently plan on implementing in the scheduler. the control algorithm which administers these techniques is discussed in a later section on control structure 
1 
     
compromise by insertion 
     some activities are indicated as being interruptible. eg research. for such activities  the negotiation strategy is available of interrupting one activity long enough to insert another a heuristic restriction limits any activity to at most two interruptions  a more adaptable system might inquire of the person being modeled how many interruptions he is prepared to tolerate for each of his  interruptible  activities  the conflict caused by lunch in the previous example of scheduling irvs week  figure 1  can be resolved either by interrupting research and mkktincs for lunch or by use of the sharing strategy introduced in the next paragraph 
compromise by sharing 
     some activities are indicated as being sharable  eg lunch conflicts between such activities can be eliminated by scheduling them at the same time  le the conflict is dismissed a more intelligent scheduler might be able to reason that some activities like eating and meeting can be shared while others like eating and sleeping cannot fot simplicity  the current design handles this by simply grouping activities into two classes: sharable and unsharable a sharable activity can share time with any activity not explicitly labeled unsharable. however  a desirable extension would be to represent in the frame for a given activity  exactly those other activities with which it can share time and those with which it cannot. 
     for the example of planning a week discussed in the previous section  the conflicts between research and teaching on tuesdays and thursdays  figure 1  are resolved in favor of teaching since the requirement that teaching take place on those days dominates over the preference to maximize research time time-sharing  insertions and relaxation are sufficient to remove all of the conflicts from the possibility space for the week and the result is the debugged plan of figure 1. 
compromise by request 
     t h i s and the following two strategies represent techniques that can relax or eliminate requirements they do this by questioning not simply the local choice of time  but the overall justification for the activity or for some of the participants i shall call these techniques purpose driven bargaining 
     a measure is provided for the relative importance of various participants when absolute requirements of individuals conflict and there is no resource-driven settlement possible  the system asks the less important individual to compromise by relaxing his requirements. figure 1 illustrates the frames which define the mork-important relation 
     
compromise by swapping 
     sometimes the requirements and preferences of some activity imply only a duration and a frequency  but do not actually specify the day hence  some conflicts can be resolved by swapping one such activity with another the virtue of the swap is that the new activity scheduled in the blocked time may be relaxable  interruptible or sharable  whereas the previous occupant of the time slot was not. a swap is prevented if the event is scheduled at the original time due to requirements of the activity or the participants that entail a specific day 
compromise by relaxing preferences 
     conflicts between competing requirements and preferences are resolved in favor of requirements while conflicts between competing piefeiences are decided in favor of maximizing the number of satisfied preferences this strategy of relaxing preferences is tried only after the others listed above it generally far's when requirements make removing the block impossible 
     possibly a more subtle use of numerical utilities will be necessary for example  a common sense system ought to be able to take account of the advice that a particular individual prefers a meeting  i  as early in the day as possible.  1  as soon as possible and  1  in the event that these two preferences conflict due to pre existing appointments  to consider one day earlier to be worth making the meeting one hour later in the day 

this static partial ordering represents  of course  a gross simplification ultimately  we would like to see the system be able to change the  importance  with which the preferences of an individual are regarded in accordance with the contextdependent role that he happens to be playing  e.g. host versus employer versus friend purpose-reasoning is introduced in the next section to partly meet this need of a more dynamic importance relation 
1 
important metuc desenbed above plus pur post checking purpose checking is necessary to prevent the pre-defined importance relation from causing a person to be dropped from a meeting even though without him the meeting is pointless. 
     an example is the problem of scheduling an oral examination for three professors and a student the pre defined ordering of importance declares professors to be more important to students  in the sense that given conflicting desires for a meeting time  the preferences of the professor are maximized hence  without purpose reasoning  conflicts in scheduling the oral examination would probably result in the student being dropped from the list of participants this is prevented by declaring that the purpose of the group meeting is for the student to be present 
     currently  the system is capable of only very elementary purpose reasoning based on  required participants  such requirements are recorded either as assertions in the appropriate activity frames or as additional advice given to the system at the time of the appointment request typical examples are shown in figure 1. 
     purpose reasoning is a type of common sense logic that ai programs must have to be able to debug conflicts the scheduler  as currently planned  will be capable of it in only an elementary way this is clearly an area which merits further study 
compromise by substitution 
     substitution applies the swapping technique described above for intervals to participants again  purpose reasoning is involved if a visitor requests an appointment with a faculty member of the laboratory  the request is generally routed to some particular individual. if he cannot schedule an appointment  then the bargainer seeks a substitute participant from its list of known people and requests that he accept the appointment 
compromise by division 
     resolve a conflict between participants by attempting to schedule the meeting twice for different subsets of the intended participants this represents an instance of the general planning strategy of breaking a goal into sub-goats whose conjunction satisfies the original purpose in the scheduling context  it is often an inefficient technique because some subset of the participants usually must attend both meetings hence  it is generally not preferred some activities such as oral-exams are not divisible into separate meetings this is indicated in the frame for this activity under the 
type property 
comparison to traditional scheduling algorithms 
     recall our earlier reference to traditional scheduling programs we can now be more precise in stating their limitations. because such algorithms are knowledge-poor and do not know anything but the basic requirements of the various items to be scheduled  they cannot relax defaults or preferences  nor know whether a particular item is interrupttble or sharable similarly  they are not knowledgable enough to examine purposes and decide upon eliminations or substitutions. on the other hand  the bargaining system that we have designed has available to it a richer set of strategies for reaching an accomodation because it has far more knowledge about each item  knowing both preferences  ranges and defaults in addition to requirements 
a meeting scenario 
     i shall further illustrate the use of these bargaining techniques by noting that an individuals weekly plan is not absolute. an unexpected visitor may arrive and request an appointment on a day previously planned for some other activity. in such a case  we would like the system to consider its options and reschedule its planned activies if possible. the scheduler's strategy for accomplishing this is again to build a possibility space of linear plans this space is then examined for the least blocked times and bargaining techniques are applied in an attempt to remove the constraints responsible for the conflict 
     suppose a visitor sends ira a telegram requesting an appointment on the next monday this results in the following possibility space of appointments  {+  person    indicates that the person can make an appointment during the indicated time while   -  person    indicates that he cannot the first line of figure 1 is the linear plan for when ira can make the appointment and the second line is the linear plan expressing mv's choice of meeting time 
     the bargainer examines this possibility space and looks for the best point at which to consider a compromise this is the least blocked interval monday and friday are least blocked intervals with blockage equal to i the following paragraphs trace the alternative bargaining strategies that are considered in an effort to find an acceptable appointment time. ultimately  the bargainer chooses the strategy that violates the fewest preferences and requirements  if there is more than one such  best  solution  the user is asked to choose among them   
     resource-driven compromise by relaxing defaults  swapping  sharing  interrupting and relaxing preferences are all possible if the blocking event event is not occupying its interval as a result of a requirement hence  all of these strategies are applicable to the block to the appointment on monday caused by irv's reskarch. on the other hand  the friday block is due to the requirement  at least as expressed to 
ira** scheduler  that the visitor will only be in town on monday. to this block  only purpose-driven strategies  i.e 
1 
compromise by request  by elimination  or by substitution  are possible 
　　　three of the strategies which can be applied to eliminate the monday block are bargaining by relaxing defaults  by insertions and by swapping that research on monday has a duration of all day is a default hence  the boundaries of  he research interval can be relaxed by one hour to make room for the appointment this produces the plan schedule the appointment from  research is also tnterrupttble t h e r e f o r e   it is possible to insert the appointment into the monday research  producing the plan schedule the appointment for i hour any time during monday o n c e this is done  the research is marked as no longer interruptible currently  the bargaining system prefers relaxing boundaries to interrupting an activity  in the absence of any governing preferences or requirements  this is based on the introspective obseivation that people prefer not to be interrupted once engaged in an activity another user  however  could obviously alter this default choice  
　　　swapping produces the plan of interchanging research t i m e on mondays with meeting time on fridays this approach would be preferred to either of the first two if none of the affected friday activities had governing preferences that tied them to that day of the week for example  using f r i d a y as an appointment day is a default but not a preference for ira hence  the swapping plan would be chosen to avoid violating the preference for maximizing research time since the first two plans decrease research time by an hour 
purpose driven 	bargaining 
　　　t h e above resource-driven techniques would be inapplicable if ira had a requirement that research occur all day on monday  eg a funding deadline is diawing nigh  in such an event  the bargainer would apply vanous purpose d r i v e n techniques to alter either ira's or the visitor's requirements t h e following paragraphs illustrate the application of such techniques to the visitor's request 
　　　t h e strategy of attempting to comptomise by request results in the monday visitor being asked by ira's scheduler if he can reschedule his trip to be in town on friday in a world of personal assistant programs  this would involve a call to the visitor's petsonal assistant program 
　　　compromise by substitution is possible if the visitor's orginal appointment request did not requlre a specific faculty member if so  the plan would be to reschedule the appointment with another equivalent participant 
　　　t h e two bargaining strategies of compromise by elimination or division are inapplicable there are only two participants so the number of people attending the meeting cannot be relaxed. similarly  sub-division does not apply with only two participants 
control structure 
t h i s section develops in greater detail how the 
b a r g a i n e r mediates between its various relaxation and reformulation strategies undet the cunem design  all of the applicable strategies are tried  each producing an alternative plan for eliminating a given scheduling conflict the final solution is chosen on the basis of which plan violates the fewest preferences and requirements this preserves the philosophy of maintaining a global perspective in the form of a possibility space of alternative plans and not becoming trapped by an excessively local perspective 
　　　in those cases where theie are many conflicts  such as arise in planning an entire week foi a single individual or a m e e t i n g a m o n g a g i o u p of people   our current implementation plan is to apply the bargaining stiategies as search operators each strategy operates on the current calendar  producing a new calendar with fewer conflicting events terminal nodes of the lesultmg tree are those with calendars containing no conflicts pioceduially  the curtent plan is to use a coroutine search which initially explores the search space breadth first  but suspends those paths whose  utility  is less than the current maximum  where the utility is defined simply as the sum of satisfied p