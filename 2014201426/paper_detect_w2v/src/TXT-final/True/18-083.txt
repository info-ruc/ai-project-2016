 
 this research addresses how constraint satisfaction interacts with the search mode  and how the ratio of breadth of effort to depth of effort can be controlled. four search paradigms  each the best of its kind for non adversary problems  are investigated. one is depth first  and the others best first. all methods except one highly informed best first search use the same knowledge  and each of these methods is tested with and without the use of a constraint satisfaction procedure on sets of progressively more difficult problems. 
 as expected  the most informed search does better than the less informed as the problems get more difficult. constraint satisfaction is found to have a pronouncedly greater effect when coupled with the most informed algorithm. large performance increments over a* can be produced by the use of a coefficient associated with the h term  and this algorithm produces solutions that are only 1% worse than optimal. this is a known phenomenon; however  the range of this coefficient is very narrow. we term this coefficient  which controls the ratio of depth of effort to breadth of effort  the adventurousness coefficient. the less tractable a problem the greater the adventurousness should be. we present evidence to support this. 
introduction 
 heuristics are employed when the domain space being explored is too large to search exhaustively. a heuristic increases the likelihood of making a correct choice  but cannot prevent the making of an incorrect choice. the knowledge embodied by the heuristics is needed to reduce the cost of the search  but is insufficient to alleviate the need to search. the basic problems associated with heuristic search are: the desire to follow  successful  branches  while leaving less successful ones for later  and  when to quit pursuing a branch as its estimated merit 
declines. 
 both problems are addressed by any search paradigm; however  the second problem can be effectively dealt with by a constraint satisfaction procedure that eliminates states that can no longer be solved. brute force methods solve problems by searching to the maximum penetration allowed in the time available. as the problems get more difficult  the utility of such methods decreases. thus depth-first searches are often augmented with techniques such as branch and-bound and minimal move ordering knowledge  but the use of heuristic knowledge is minimal. in contrast  a pure best first search relies exclusively on its heuristic 
knowledge with all the search control decisions being based on that knowledge. 
 we wished to study the interaction between heuristics  search techniques  and constraint satisfaction. superpuzz  a solitaire puzzle that can benefit from constraint satisfaction techniques  was chosen as our problem domain. we selected four search algorithms as being the best exemplars of their class for solving non-adversary problems  and devised a constraint satisfaction procedure. we then investigated the degree of degradation fcr each search algorithm as the problems became more difficult  and the interaction of constraint satisfaction with each technique. 
the domain 
 the domain chosen for this study was superpuzz  an extremely difficult solitaire puzzle. the rules of superpuzz are as follows: 
 superpuzz is played with 1 cards  1  numbered 1 to 1  in each of 1 suits. to start a problem deal the cards in a raster of 1 wide by 1 deep. then remove the  1  denomination cards  leaving  holes . legal moves consist of moving a card into a hole  thus creating a hole at its former location. the card that is moved into a hole must be of the same suit as the card to the left of the hole  and be one higher in denomination. 
 no card can be moved to the right of the last card in a suit  nor to the right of a hole. if a hole is on the left edge  any 1 may be moved there. the game is won when all the cards have been placed in ascending order by suit  with one suit in the first 1 places of each row as demonstrated by figure 1b. there is no requirement to have particular suits in particular rows. the game is lost when there are no longer any legal moves. these are the rules for 1 superpuzz; it is also possible to play harder versions adjusting the rules for 1 and 1 formats. 

1 h. berliner and g. goetsch 
 figures 1a and 1b show an initial and terminal position respectively. a solution to the initial position can be found at the end of this article. the most challenging aspect of superpuzz is determining which ace to move into a hole on the left-edge. making the proper ace move is often-non intuitive  which makes the domain interesting and results in programs that outperform well practiced humans. 
the search paradigms 
 initial studies determined the following search algorithms were the bet t exemplars of their class : 
1. a depth-first search  df   using the branch and bound  and iterative deepening |1| techniques. iterative deepening has recently beer  proved to dominate simple depth first search when the depth of the solution is unknown |1| the constant of iteration used was 1. the bound is the number of misplaced cards  n  in the present configuration if the present configuration is at depth d  it is impossible to reach a solution at a depth less than d + n. 
1 the a* search  1  a* expands the frontier node with the minimal function i  where / = g + h = d + n. 
1 a best first search  bf1  that uses the simple evaluation function f - n + d. where   the adventurousness coefficient which we discuss later  was equal to 1. 
1. a best first search  bf1  with a highly informed evaluation function that would encourage the development of good  positional  formations that could be transformed into wins. 
 a hash table containing the generated nodes plays a key role in three ways. in the best first searches  it becomes the representation of the tree. the hash encoding detects identical states  so that the same subtree will be searched only once. the hash encoding also detects cycles. in the depth-first search  the hash table only performs the two latter functions. 
 two evaluation functions were required. these are 1  a misplaced card counter  and 1  a position goodness function. these functions are described in detail in . the misplaced card function is used in all the search programs  while the goodness function is used only in bf1. 
the constraint satisfaction method 
 any state of a domain is either solvable or unsolvable. we define the set of totally solvable domains to be those in which all states accessible from a solvable state are solved or solvable. in such domains any operator applied to any state preserves the solvability of the new state. frequently  for each operator there exists a reverse operator that can re-establish the previous state. this type of problem is represented by puzzles such as the 1 puzzle and rubik's cube. an alternate condition is that the permissible operations do not allow transformation to an unsolvable state. 
 set against the class of totally solvable problems is the class of partially solvable problems in which not every state of the domain can be solved  and the set of operations allow unsolvable states to be reached from solvable states  for totally solvable domains the only thing of interest is the speed of the solution process and the quality of the solution. tor partially solvable problems  each instance may have to be classified as solvable or unsolvable. 
 constraint satisfaction is the term used for the sot of algorithms that can determine when a subtree cannot contain a solution. we wanted to study the role of constraint satisfaction on a difficult  partially solvable problem as the difficulty of the problem varied. this was the reason superpuzz was selected  as standard puzzles such as the 1 puzzle are totally solvable  and others such as instant insanity are not very difficult for a computer. 
 both totally and partially solvable problems can use heuristic knowledge in order to speed up the search for a solution. heuristic knowledge can be used to choose the order of applying operators and to evaluate the new states. however  totally solvable problems need no process to identify subtrees in which no solution can exist because  ipso facto  such subtrees cannot exist. 
the constraint satisfaction function developed for this problem 
 is as follows: once all the aces are in place  the final destination of every card can be determined. cards not at their final destination must be moved. we only examine cards that are to the left of their destination since they are typically the hardest to move  if such a card is unmovable  the problem instance is unsolvable. the constraint satisfaction procedure is able to reject about 1% of all configurations presented to it during a search as being unsolvable constraint satisfaction is applied only after all the aces are in place  since identifying deadlocked positions earlier was unproductive. it ts able to deal with situations where not only individual cards  but whole trains of cards must be moved. trains arise frequently as the result of putting a card behind its predecessor. the problem of determining whether a tram can be moved is very difficult  and a number of finesses were used which are described in the above cited reference. 

h. berliner and g. goetscn 1 
which we discuss in the next section. 
discussion and conclusions 
superpuzz is a much more difficult than standard puzzles. 
further  the difficulty of the game varies with the width of the puzzle. in this study we examine the 1  1 and 1 games. although the branching factor in each of these remains the same  the solution depth and percent of unsolvable problems increases significantly with increases of width. 
 the solution process can be thought of as occurring in two phases. in phase one  the combinatonc power of search attempts to sec whether it is possible to obtain a position where till four aces are in place. when this has occurred  the deadlock detection algorithm is invoked  which can reject about 1% of all positions it encounters. phase two is invoked for positions that pass the deadlock test. here by relatively small searches  the solution is either found or rejected. when no solution is found in the sub-tree  phase one again obtains control. 
 given that the combination of deadlock detection and very small searches in phase two is very efficient  certain ideas emerge. if the position is solvable  then it is advantageous to reach phase two as quickly as possible. the bf1 search does this most effectively. it is not at all unusual to have the first all aces in-place configuration discovered by the bf1 search be solvable  whereupon the solution proceeds immediately. in those cases where this does not happen  the first dozen or so attempts do usually yield a solvable phase two. only in cases where the solution is very contrived  or where there is no solution  is the bf1 procedure outperformed by others  in the case where there is no solution  all phase two positions must be explored and the procedure that reaches these with the minimum amount of effort is the most effective. from this it can be seen that some knowledge of what percentage of problems is solvable is instrumental in deciding on a search paradigm. in this research  the bf1 evaluation function is expensive to compute  as is traversing the tree. but  while the bf1 search is only marginally superior in the width 1 puzzle  it becomes completely dominant by the time the width is increased to 1. 
let us consider why one search paradigm is better than another. 
a* and df are really quite similar. they probe to new depths in a breadth-first style that takes advantage of certain efficiencies. a* knows about effort remaining and builds a permanent copy of the tree  which it continues to expand at the best leaf nodes. df also knows about effort remaining and gets its power from great efficiency in space and time. however  neither is able to venture very far on a probe down a branch unless it is continuously having success  reducing the number of misplaced cards . any failure to improve this measure would immediately force the a* search to try another branch. because the df search has an iteration constant of 1  two non successful moves can occur in expanding a branch before returning. since the criterion for success is rather simplistic  and it is very likely that any solution will require a number of non-constructive or backward-appearing steps  it is unlikely that either search will be able to make significant forward progress through such territory. instead they plow steadily forward until the treacherous territory is overcome by all highly evaluated branches  and then pursue one to a successful conclusion. 
 
1 h. berliner and g. goetsch 
 now consider the bf 1 search paradigm the evaluation function for bf1 is / - /i n + d. the constant /i is the advonturousness coefficient; for this program ¦Ì = 1. in bf1 the value of a descendant node either decreases by .1 units in case the number of misplaced cards is reduced  or is increased by 1. this allows the descendant node to put some distance between it and its competitors when it is able to take a few constructive steps intermixed with some that do not appear so constructive. the essential point is that a branch does not have to produce  progress  on every move the degree of such adventurousness is what the constant 1 controls  and for the given domain and evaluation function it appears to be best. 
 best first search disciplines exist that have a reluctance to abandon a branch until it is judged a constant amount worse than the current best branch. the adventurousness coefficient allows the number of non-intuitive moves included in a branch to be a linear function of the number of  good  moves. this appears to be a better construction. 
 the bf1 search is even more adventurous  though it not clear how to obtain its adventurousness other than by empirical observation  since it can gain numerous points in heuristic value by placing a card into what is considered an advantageous location. this allows it to penetrate deeply in certain branches that it  likes  while leaving others behind. this additional knowledge appears to pay off in performance. 
 in some cases the evaluation function will lead the search up a 
 blind alley. here is where constraint satisfaction helps the most: it can disenchant the search causing it to look elsewhere. this happens for all of the searches  but is most effective in bf1 because the other searches are not as adventurous. 
 in any search paradigm  once a node is known to be deadlocked  its successors will never be expanded. however  these savings can only be realized once such a sub tree is reached. this is where adventurousness is important. if situations where constraint satisfaction procedures can be applied occur only after almost all important branches have been pushed to the same depth  then the savings will not be very great. here  the most adventurous search has a big advantage  see table 1  since // allows selectively approaching the point where constraint satisfaction can be applied. 
 if the above notions of adventurousness are correct  then the less tractable the domain  the higher the adventurousness should be we tested this hypothesis by re-running the  bf 1  deadlock  algorithm on all the 1 problems with ¦Ì = 1 this resulted in the average nodes per problem being reduced by 1%  and in the number of intractable problems being reduced from 1 to 1. we intend to investigate this scaling of adventurousness further in future studies. 
 in anv domain the heuristic function must evaluate the desirability of the moves available. the decision of whether to abandon a branch in a best first search or continue it is basic to the efficiency of the search. the adventurousness coefficient for any domain /function combination  determines the degree to which the past history of the branch influences this decision. it is not necessary to  succeed  on every move in a branch in order to continue it. instead a success gradient  the adventurousness coefficient  must be maintained. this tends to produce consistent  plan-like behavior. 
 a minimal solution to figure 1a is:  read left to right; names of moving cards only  except for aces where the row is also given . 
 c1 s1  z  d1 d1 d1 ci  y  c1 d1  x  c1 s1 h1 s1 c1 d1 s1 c1 h1 s1 d1  w  h1  x  s1 d1 h1 s1 d1 d1 d1 h1 
acknowledgements 
we wish to acknowledge the efforts of t. anantharaman  
b. pearlmutter  and h. printz who were the first to use constraint satisfaction in superpuzz  and k. goldberg whose graphic support aided in understanding the performance of the search. 
