 
real time artificial intelligence  ai  systems are required to respond within a given deadline  or have optimal response times. while some researchers have addressed the issue of planning under deadline constraints  there has been very little research towards optimizing the response time of problem-solving methods. the costs for a response consists of the cost to plan for a solution and the cost of executing the chosen solution. there is an intimate trade-off between these two costs. this paper presents an algorithm for providing near optimal response times by formalizing the trade-offs between planning and execution costs. we provide a proof of correctness and describe an implementation of the algorithm in a real time application of query planning. we also provide a model for considering response times in the context of the a* heuristic search algorithm. 
1. introduction 
     as the application of ai systems evolves from an art to an engineering science  we can expect more challenging applications to be addressed. some of the most challenging and interesting applications can be found in real-time domains. an ai system operating in a real-time situation will typically need to respond within a certain deadline  or have optimal response times  for planning and execution . for example in managing defensive weapons against nuclear missiles  the system has to respond within a few seconds or minutes l . on the other hand  in credit approval systems  optimal response times are desired  but there are no hard deadlines. the deadline problem is hard and many such problems  e.g.  scheduling with deadlines  are np-complete  and guaranteeing an optimal solution within a fixed deadline is often not possible. the optimal response time is required in the case wherein the plan execution time is comparable to planning time. the response time is the sum of planning time and execution time  and the application has no strict short deadlines. as shown in figure 1  in general  the optimal response time is not achieved by solely minimizing execution time  as then planning time increases to offset the gains. 
     currently  ad hoc techniques are used for making a system produce a real-time response   and these methods suffer from poor extensibility  brittleness and a lack of a formal proof of  reliable real time performance   1 . traditional search algorithms like depth first search  breadth first search and depth first iterative deepening   a*  and ida*  are useful with small search spaces and large 
1 	real-time and high performance 
deadlines only. however  the size and complexity of most search spaces faced by real time ai systems preclude the use of these algorithms  as they may take exponential time in producing a solution. these search strategies may be able to guarantee an optimal solution in the absence of limits on search time  but cannot function with the constraint of deadlines and response times. consequently the planning methods based on a* and eda* may potentially take exponential time for problem-solving. within a given deadline to solve certain problem  the system may not produce any solution  complete or partial . scaling them up with real world data and adequate knowledge-bases  would amplify their performance problems  including their inability to meet real time constraints. 
     research on real-time ai systems have concentrated on software and implementation issues like interrupt handling. there has been little research on problem-solving methods  which can meet a deadline or provide an optimal response time. some researchers  1  have worked towards planning and search algorithms to meet reasonable deadlines by finding a partial solution within the given deadline. the algorithm is based on bounded look-ahead search  i.e. one searches forward from the current state to a fixed depth horizon determined by the deadline. a cost function  similar to a*  is used to evaluate the frontier nodes. the minimum value is then backed up and a single move is made in the direction of the minimum value. korf has further proposed a real time modification of a* called 
rta* for controlling the sequence of moves actually executed. russell has extended rta* by adding meta-greedy decisiontheoretic search control. some of the results from reasoning under resource constraints   1  are also applicable  if time is considered as a resource. this line of work is based on assigning utility numbers with choices and maximizing utility. 
     the above mentioned real time algorithms essentially deal with the problem of deadlines in real time systems  see classification in figure 1 . they ignore the execution cost of any solution and essentially spend all available time  the deadline  searching. this may not be realistic in cases where executing the solution takes some appreciable amount of time and it is no longer possible to ignore it. our research concerns the other class of real-time applications where response time is important. 
     to optimize the response time  a real time system has to consider the tradeoff between execution and planning costs. a greater planning cost may possibly lead to a lower execution cost  but the extra time spent planning may also lead to a potential increase in the response time as shown in fig.t. thus it is crucial that a real time system be able to decide upon the appropriate moment to stop 
planning and start executing the best solution plan obtained till then. our focus in this paper is to formalize the trade-off between planning cost and execution cost in such real time systems and prove bounds on the optimality of the results obtained. we present a search algorithm for providing near optimal response times. we provide correctness proofs and bounds on the optimality of the response time performance obtained. we describe an implementation of our algorithm in a real-time application of query planning   which substantiates our results experimentally. finally we explore the combination of our algorithm with a*. 
     the structure of this paper is as follows. section 1 describes our search algorithm  correctness proofs and other results. section 1 and 1 describes the application of our proposed algorithm in two example domains: query optimization  planning  and the a* heuristic search algorithm. finally  section 1 summarizes our contributions and lists directions for future research. 
1. optimizing response time 
     for a real time system with optimal response time requirement  the total time for responding to a situation can be conceptually modeled as consisting of the time for planning a path to solution  and the time for actually executing the chosen solution path. in some situations we need to generalize the planning and execution times to planning and execution costs or utilities  1  to account for various other aspects of the problem domain. 
     for simplicity  we will adopt to the model given by korf  and consider costs as equivalent to the times required for planning and execution. in this context  the process of planning a response can be modeled as a search among different possible responses or actions for the best possible action. the space of different possible actions can be very large  and as the sequence of search for finding the best possible action is  usually  not known apriori  the process of planning  to find the best action  can take prohibitively large amounts of time  so as to thwart the desired optimality of the response time of the real time system. thus it is important to devise algorithms which not only allow a real time system to suitably terminate the planning phase  but also prove some bounds on how well it has done as compared to the optimal response time. 
1. nora  near optimal response-time algorithm  
     in this sub-section  we shall describe nora  a simple and intuitively appealing algorithm for providing near optimal response times in real time systems that satisfies the above-mentioned concerns. blind exhaustive searches like bfs or dfs are generally applicable to limited domains. most heuristic search algorithms require the ability to recognize the goal node  i.e.  the best action . this is not always possible   e.g.  recognizing the cheapest query execution plan in query optimization! 1    and one needs other termination criteria to stop the search. 
     given a search algorithm  a real time system has to make a crucial decision of determining the time to stop searching so as to provide a near optimal response time. this problem is simplified for small search spaces  where it may be possible to search the entire search space quickly  or when it is possible to recognize the best action  so that the search can be stopped as soon as the best action is found . in general it may not be possible to characterize apriori the best action and even if it is possible to characterize it for recognition  reaching it in the many search traversal algorithms may require prohibitively large time. thus a real time system must have some algorithm for appropriately balancing the planning and execution costs. 
     the basic idea of nora is simple and intuitive. conceptually  the search space can be thought of as a set of nodes with interconnecting arcs. each node represents one possible action  or set of actions  and has an associated execution cost. a search traversal algorithm specifies the order of traversal of these nodes and there are costs associated with this traversal. these costs include the cost of actually moving from node to node and any associated computation costs at each node  for example  to estimate the execution cost of the actions at the node . the chosen search traversal algorithm goes from node to node in some order to find the node with the best action  or here for simplicity  the least action time . at each node  nora keeps track of two metrics: 
  1   	planning cost so far this represents all associated costs of planning so far and includes all cost of traversing the search space. 
 least execution cost so far: this is the node with the least execution cost so far. 
     the search space traversal is terminated whenever the planning cost exceeds some fraction of the best execution cost found so far  i.e.  when the following condition is satisfied: 

where x defines the fraction. as shown in the next sub-section  this simple stopping criterion allows us to achieve a near-optimal response time  when the search is terminated with the above condition satisfied  satisfying the following bound: 

this is for the general case  in which we are unable to recognize apriori the best action. in cases  where it is possible to recognize the best action  a direct comparison can be made for a crisper bound  see section 1 . as evident  the choice of x is crucial and at the end of the next sub-section  we describe how we can obtain heuristics for the choice of an appropriate x. we further note that the bound holds for any given search space traversal ordering  e.g. a* . 
1. correctness of nora 
     in this section  we provide a correctness proof for nora. some notation used in the proof below is introduced in table 1. 
we structure the search space as a interconnected set of nodes qi   each node representing a possible action  or set of actions . 
	shekhar and dutta 	1 1 

x this assumption is justified by many planners  e.g. query optimizers  t rt i  = t i  + a/  i   and represents an integrated cost. 
1 	real-time and high performance 


table 1 performance of nora 
     the result can be verified for all the three values of x. here we shall illustrate the validation for ¦Ë- 1. the search stops after iteration 1  since the stopping criterion of nora evaluates to  1  +  1  1    1 =  1   1  which is true. the optimization cost and best execution cost estimate are  t i =1w; t i = 1 ms 
the bound of the correctnes theorem is satisfied since  

     we see that stopping rule is quite effective. especially notable is the fact that even though we attempt to minimize a weighted sum of t i   and r i   and not t i  alone  the value of / i  obtained is actually quite close to the minimum. we believe a more careful analysis of the algorithm would help us get a better bound. 
1. nora and heuristic search algorithm a* 
     a* + is probably the best known heuristic search algorithm for finding a solution path from an initial start node to a goal node  when the execution costs are negligible. it finds an optimal solution path in optimal planning time if the heuristic function  h n   is monotone and admissible  i.e.  it satisfies triangle inequality and it never overestimates the actual cost of reaching a goal node. a* ignores execution time and essentially concentrates on minimizing the searching time instead on response time. furthermore a* terminates by recognizing the goal node. thus the problem definition must provide adequate characterization of the goal node  so that it can be recognized easily. 
     to apply nora formalism to a* we generalize a* in two respects:  a  introduce the notion of execution time   b  relax the assumption that the search algorithm can recognize the goal node during the search process  even though one can define heuristic functions. we use a more general stopping criteria for search termination. 
to introduce execution costs in a*  we proceed as follows. 
associated with any node n  in the search space  let ge  n  represent the execution time for executing the partial solution  corresponding to the path from the start node to node n  found so far and let h   n  represent the heuristic estimate of the cost of execution from the partial solution to a goal node  corresponding to a path from node n to a goal node . note that ge n  and he n  are distinct from the conventional g and h functions of a*. while g n  estimates the cost of expanding the search tree from the start node to the node n and thus contributes to the planning costs for finding a solution path from the initial state to the partial solution state specified by node n  ge{n  estimates the cost of actually executing that partial solution path in the real world. similarly  while h n  estimates the planning cost of further expanding the search tree from node n to a goal node  he  n  estimates the actual cost of execution while trying to reach a goal from the partial solution state specified by node n. these functions can be computed as it is possible to apriori precisely characterize the goal state. 
¡¡+ a best-first search of the search space  where the merit of a node  f n  is the si of reaching that node  n  from the start node  s  and the estimated cost  h n   of reac that node. 
     while trying to optimize response times in real time planning and search using a*  it is possible that we may decide to terminate the search  based on a chosen search stopping criterion  e.g.  as specified by nora  at some node i  before reaching a goal node  g. assume that stopping at some node i   i * goal node   forces us to incur some penalty for execution in real time  caused by the distance from the partial solution state  node i  to a goal node   and let it be represented by ht  i . we assume that he  i  is proportional to the distance of the node i from a goal node and that it monotonically 
decreases as i approaches a goal node. 
1. applying stopping criterion of nora 
     let us assume that the a* heuristic evaluation function  h  satisfies the monotone t restriction and is admissible. under these conditions  a* never expands any nodes other than those that lie on the optimal solution path and thus at any node  i   i = goal node   on the optimal solution path  the total planning cost so far is given by g i  and the best estimate of the execution cost is given by the sum of g€ i  and he i . let g represent the goal node  and thus the planning cost for reaching the goal node is g g  and the execution cost is given by the sum of ge  g . the stopping criterion as specified by nora would be: stop when 

writing the ratio of the response time  rt i   when stopping at node i over the response time  rt g   when stopping at goal node  g  we have: 

note that g g  ¡êg i  + h i  as h is assumed to be admissible. since h i  is positive  we can ignore it from the denominator and on substituting the stopping condition we get: 

dividing both numerator and denominator by g i   we get 

as both g  g  and g i  are positive. thus the bound of nora is satisfied. note that as ¦Ë is positive  1 + ¦Ë is greater than 1. 
     thus result provides an interesting extension of a* for minimizing response time for the real-time problems  where plan-execution time is not negligible. use of stopping criteria of nora leads to a near optimal response time  which is shown to be near-optimal even when he  goal  = 1. we have verified this assertion for the best case of a*  ie the case of monotone admissible heuristic functions. it can easily be verified that the assertion holds in all cases. 
	shekhar and dutta 	1 

1. conclusions 
     we have looked at real-time ai applications  where planning and execution costs are equally important. we have presented a 
     classification of real-time problem solving systems  and an algorithm for producing near optimal response times. we proved that balancing planning cost with execution cost  can lead to near-optimal response time  and provided bounds on the worst-case deviation from the optimal point. we have then provided an empirical validation of the algorithm  via a real-time application of query planning for databases. experimental results show that the performance of our algorithm is often much better than the worst case bounds. we have also developed a framework for obtaining bounds on response times in the context of real time heuristic search using a*. 
     the results can be extended in many directions. the bounds on the performance of the algorithm are far from tight as illustrated by experiments. we would like to prove tighter bounds on the optimality of our algorithm. secondly  our termination criterion can be used with any search algorithm like a*  rta* etc. more research needs to be done in this direction. in particular we would like to combine it with rta*  1  and explore the properties of that algorithm. finally  we are exploring the applicability of our results in domains. 
1. acknowledgements 
     we would like to thank prof. srivastava  univ. of minnesota  for help with the implementation and performance evaluation of the semantic query optimization example  and prof. korf and dr. horvitz for fruitful discussions on real time search. 
1. references 
