 
we describe a problem solver that met non-chronological backtracking in situations involving tradeoffs. the novel aspect of the problem solver is it ability to weigh advantages and disadvantages of alternatives at choke points. whenever untenable situations arise  this information is available to the backtracker to determine the most appropriate backtracking point. by endowing the backtracker with access to domain-specific knowledge  a highly contextual approach to reasoning in dependency directed backtracking situations can be achieved. 
     an area of investigation now commonly referred to as  dependency directed reasoning   has had a major impact on ai research in the last decade  de kleer et.al  1; doyle  1  1  1; mcallcster  1; stallman and sussman  1 . in this paper we describe some dependency directed reasoning features of a problem solver called planet  dhar  1 . it has been designed to help planning managers in a large computer manufacturing company with the formulation and investigation of models for allocation of resources. since the process of resource planning1 involves making assumptions that are continually subject to revision  dependency information plays a crucial role in the maintenance and incremental change of planning models. what is of particular interest in this paper is a heuristic procedure for dependency directed backtracking that addresses one drawback of existing dependency frameworks  namely  determining what belief  set of assumptions  in an existing model to change whenever an undesirable state arises. 
1. the need far dependency directed backtracking 
     the problem of formulating a resource planning model has two important features. first  as assumptions about various parts of the task environment are made  choices in other parts of the environment are constrained. second  there are usually resource requirement tradeoffs among the alternatives that can be made. these features are operationalized in planet in terms of a  computequiesce-guess  cycle as in molgen  stefik  1  where processing continues with existing constraints until a quiescent state is reached. when the program quiesces  but has not completely solved the problem  it creates a new constraint by  guessing  and restarts processing. the guess is based on a heuristic evaluation of alternative choices. the cycle of compute-quiesce-guess continues until the problem is solved. 
     table 1 shows various resource requirements for carrying out four manufacturing activities. for example  resource requirements for  s-test   which an activity that tests assembled modules  depends on the choice of testing devices. in choosing among such alternatives  the program picks the most  balanced** alternative in light of the organization's resource availability picture at the time. because these choices are made successively using limited look-ahead 1 it leaves open the possibility that some resource constraint will be violated  thereby forcing the problem solver to undo one or more of its previous choices. 
     as an example  let us consider a situation where the three choices indicated in table 1 have been made when saving space was considered more important than saving capital. further  assume that at this point in the plan formulation  there is only $1 million more left to be allocated. with this  money is no object** attitude the program is now in trouble. it cannot chose either the sim-tester or the fa-tester  as either choice would consume more than the remaining capital. clearly  some previous selection must be undone to alleviate the problem and several maneuvers are available. under such circumstances  the problem solver must be capable of reasoning about the most rational course of action rather than simply making a blind selection. in the following paragraphs  we present a formal treatment of planets backtracking method. 
1. dependancy directed resoning in planet 
the data dependency and backtracking mechanisms of 
planet are built on top of rup  mcallester  1 . an overconstrained state is equivalent to a rup contradiction. when overconstrained  planet must find and retract an existing choice that contributed to die unacceptable state of affairs. an alternative choice is then made as a 

table 1 
these tablet indicate resource-requirements/tradeoffs for four decisions. the selected alternative in the first three is in bold type. the units of labor are workers working  capital is in millions of dollars  and space is in thousands of square feet of floor space. 

replacement  and processing continues. we refer to this backtracking behavior as second guessing. 
     whenever the program is quiescent and must resort to guessing it is making a  forced choice . in such situations  several alternatives typically exist. we call each forced choice a decision level item. each of the alternatives available in the context of a decision level item is called a selection level item. note that for any given decision level item there exists a set of at least two selection level items. for exposition  we will denote particular decision level items with a subscripted d and denote particular selection level items with a subscripted s. sets of either will be denoted in italics  i.e. d  and 1. 
     when the program is processing a decision level item it is guessing. the guess is to pick some element from a 
set of selection level items. when the guess is made  only heuristic estimates of resource tradeoffs are available to evaluate the merits of particular alternatives. by the time the program finds itself in an over-constrained state considerable computation could have been done in developing a more accurate assessment of resource consumption and establishing other constraints. this information is not available to planet when guessing but is available when second guessing. the key point here is that the evaluation function used by the second guesser is more accurate than the evaluation function used by the guesser  allowing problem solving to continue with the benefit of new hindsight. 
v. dhar 1 
     when the program becomes over-constrained it has processed several decision level items. we call the set of these items  for each  there is a set  st of alternative selection level items  choice  that could have been guessed. we call the distinguished guess in s  as sct. thus  the set of all selection level choices  guesses  that have been made is 
     a subset  s   of $ contains all s guesses that have contributed to the over-constrained state. 1 can be computed by chasing current dependency information. the subset  d  of b - the set of decision level items that need to be reconsidered - is derivable from 1. 
     given d  the second guesser can reason  in a  given what i know now  manner  about two related issues: 
determize which element of d to reconsider. 
reconsider  find a different selection for the chosen decision item. 
     to elaborate  consider the previously described situation where planet has suddenly realized that it is about to over allocate capital by at least $1 million. prom table 1  we see that the set 1 is {shorts/opens-tester  l-1  pi . the set d is then {mif-test  s-test  insertion . 
examination of d reveals that s-test is the best decision level item to reconsider. the set {l-1 qv fc-1  is then scrutinized using the added information that an acceptable choice would have to consume at least $1 million less than l-1. note that in second guessing  planet has access to information that was not available when it first attempted to process the decision level item s-test. quite literally  it is using hindsight. 
     the set of choices in 1 are indeed responsible for the over constrained state. we claim that the identification of a scapegoat in s and its replacement is made more rational by examining each selection level candidate in the context of its decision level item. furthermore  each of the decision level items should be compared and contrasted. this distinction is important - the selection level items art the retractable  assumptions   but second guessing pivots around the decision level items. 
1. reasoned assartien and retraction- of assumptions 
     in order to facilitate a rational reconsideration of choices  we provide explicit structures that maintain context at the decision level. whenever a contradiction arises  the program can use this plus information on the type of constraint violation to determine which assumptions to retract to best alleviate the problem. each choice is represented as a structured object  enclosed within braces : 
{decision: dt selection: st 

the  advantages  and  disadvantages  slots are lists of dotted pairs; the first element in a pair is a selection item  an alternative to the selection s1   and the second is a list of resource categories for which the alternative is 

1 v. dhar 
advantageous or disadvantageous respectively. whenever an unacceptable allocation of resource  r  arises  the program invokes a two step procedure to determine its revised set of choices. first  all decision level items disregarding r as a disadvantage are recorded. then  the combined pool of selection level items are compared to determine the selection best alleviating the underlying problem. the object representation of the s-test decision in our example would be: 
{decision:  modules: s-test  selection: l-1 alternatives :  qv fc-1  disadvantages :   qv labor capital  fc-1 labor capital   advantages :   qv space  fc-1 space  } 
in this example  planet correctly identified three decision points as having disregarded capital. it identifies s-test as the decision level item to reconsider  and modifies the selection associated with it. the important aspect of this examination is that it had a specific goal: identify the decision level items that contribute to the over constrained situation that also disregard the down side on the resource for which a constraint has been violated. in effect  the procedure focuses on a problem specific set of contributing factors instead of merely finding some basic set of entailment. 
planet routinely makes these kinds of revisions. 
when faced with the task of reevaluating previous choices  it applies both problem specific and domain specific knowledge to identify the choice. in doing so  it uses hindsight - the current problem state - to identify its backtracking point. like other non-chronological backtrackers  stallman and sussman  1; doyle  1; mcallester  1  only those inferences dependent on the choice are retracted. 
　　in the example considered above  a detailed comparison of the resource implications of alternative selections was possible. unfortunately  this is not always the case. if the set of potential backtracking points identified includes choices about the more abstract parts of a manufacturing plan where detailed resource requirements have not yet been assessed  a quantitative comparison is not possible. projecting the consequences of the various maneuvers is then difficult. further  if long chains of dependencies exist  the program might pick as its best move one that involves undoing large parts of the partially formulated plan since this would free up the maximum amount of the scarce resource. in other situations  a revision might only alleviate the problem marginally  allowing it to recur a few steps later. finally  a limitation of the existing backtracking scheme is that the program is unable to recognize situations where it might be better off retracting a combination of choices as opposed to a single decision. we are currently working on ways by which domain specific knowledge about these situations may be represented in terms of dependency information and made accessible to the backtracker. 
　　in conclusion  the issues raised here have been driven by a complex  real-world problem where existing formalisms proved to be useful but inadequate in modeling the essential nature of the problem. we have developed a scheme whereby a backtracker might assess more rationally the reasons for an untenable situation  and modify its existing set of choices in light of the evolving scenario of constraints. while the methods outlined above arc preliminary  they represent a step toward a more general method for reasoned introduction and retraction of assumptions for decision situations where tradeoffs are involved. 
