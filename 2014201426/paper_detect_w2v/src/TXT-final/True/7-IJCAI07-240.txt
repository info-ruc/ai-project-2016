
we introduce a general study of routing mediators. a routing mediator can act in a given multi-agent encounter on behalf of the agents that give it the right of play. routing mediators differ from one another according to the information they may have. our study concentrates on the use of routing mediators in order to reach correlated strong equilibrium  a multi-agent behavior which is stable against deviations by coalitions. we study the relationships between the power of different routing mediators in establishing correlated strong equilibrium. surprisingly  our main result shows a natural class of routing mediators that allow to implement fair and efficient outcomes as a correlated super-strong equilibrium in a very wide class of games.
1 introduction
in many multi-agent systems it makes little sense to assume that agents will stick to their parts when provided with suggested strategies  if a deviation can increase their payoffs. while for any multi-agent encounter  represented as a strategic form game  there always exists a strategy profile for which unilateral deviations are not beneficial  requirements regarding the deviation of multiple players are rarely satisfied. in order to tackle this issue we consider in this paper the use of routing mediators  extending upon previous work in game theory and ai.
모a mediator is a reliable entity that can interact with the players  and potentially act on behalf of the players that give him a permission to do so. however  a mediator can not enforce behavior. indeed  an agent is free to participate in the game without the help of the mediator. this notion is highly natural; in many systems there is some form of reliable party that can be used as a mediator. in particular  brokers in financial markets  bidding club organizers in auctions  as well as routers in communication networks  can be viewed as mediators. notice that we assume that the multi-agent interaction  formalized as a game  is given  and all the mediator can do is to perform actions on behalf of the agents that explicitly allow it to do so. the mediator's behavior on behalf of the agents that give it the right of play is pre-specified  and is conditioned on the information available to the mediator on all agents' actions.
모this natural setting is different from the one discussed in the theory of mechanism design  see  mas-colell et al.  1; jackson  1  for an introduction  where a designer designs a new game from scratch in order to yield some desired behavior. the simplest form of mediator discussed in the game theory literature is captured by the notion of correlated equilibrium  aumann  1 . this notion was generalized to communication equilibrium by  forges  1; myerson  1 . another type of mediators is discussed in  monderer and tennenholtz  1 . however  in all these settings the mediator cannot act on behalf of the agents.
모a more powerful type of mediators  which can perform actions on behalf of the agents who give the mediator the right of play is considered in  monderer and tennenholtz  1 . this type of mediators turns out to be a specific case of the mediators discussed in this paper. namely  in this restricted setting the agents need to decide whether to give the mediator the right of play  while the mediator does not possess any further information on the agents' actions.
모in order to illustrate the power of a reliable mediator consider the famous prisoners dilemma game:

모in this classical example we get that in the only equilibrium both agents will play d  yielding both of them a payoff of 1. however  this equilibrium  which is also a dominant strategy equilibrium  is inefficient; indeed  if both agents deviate from d to c then both of them will improve their payoffs. formally   d d  is not a strong equilibrium; it is not stable against deviations by coalitions. indeed  there is no strong equilibrium in the prisoners dilemma game.
모consider now a reliable mediator who offers the agents the following protocol: if both agents agree to use the mediator services then he will play c on behalf of both agents. however  if only one agent agrees to use his services then he will play d on behalf of that agent. notice that when accepting the mediator's offer the agent is committed to actual behavior as determined by the above protocol. however  there is no way to enforce the agents to accept the suggested protocol  and each agent is free to play c or d without using the mediator's services. hence  the mediator's protocol generates a new game  which we call a mediated game  where a new strategy m is available for using the mediator services:

모the mediated game has a most desirable property: in this game there is a strong equilibrium; that is  an equilibrium which is stable against deviations by coalitions. in this equilibrium both agents will use the mediator services  which will lead them to a payoff of 1 each!
모although the above example illustrates the potential power of a mediator who can act on behalf of agents who give him the right of play  the above mediator was very restricted. in general  a routing mediator possesses information about the actions taken by the agents. consider a router in a typical communication network. assume that messages submitted to the system must pass through this router. in addition  the router can suggest a protocol to the agents who may wish to use its services also in selecting appropriate routes. hence  in this situation it is most natural to assume that the router can observe selected actions of all agents  and not only of those who give it the right of play. in order to illustrate the power of such routing mediator consider the following example:

모given the above game  assume we are interested in obtaining a socially optimal outcome  in which each agent gets a payoff of 1. it is easy to see that the column player can guarantee himself an expected payoff of 1 by playing b or c with probability 1 each. as a result  a routing mediator who is not informed about the pure realizations of the column player's strategies cannot implement any outcome in which that player gets a payoff less than 1. however  a routing mediator who can see the pure realizations of the deviating player and choose the punishment appropriately can enforce the outcome  1  as a strong equilibrium! this can be achieved  for example  by the following protocol: if only agent i selects the mediator's services  the mediator will copy the action of the other player  j  on behalf of i; if both agents select to use the mediator's services then the mediator will perform c on behalf of both agents.
모this example illustrates the important role of information in the definition of a routing mediator. indeed  routing mediators can be classified based on the information they can access about the agents' actions. in this paper  we formally define routing mediators as a function of their available information. we distinguish between two types of available information:
1. information about the actual action instantiations.
1. information about the agents' programs  i.e. correlatedstrategies .
모as we will show  having access to the agents' actions may sometimes be more powerful than having access to their programs  and vice versa.
모given the general setting of routing mediators  we prove that they can indeed significantly increase the set of desired outcomes that can be obtained by multi-agent behaviors which are robust against deviations by coalitions. namely  we show that any minimally fair game possesses a fair and efficient correlated super-strong mediated equilibrium. in a correlated super-strong equilibrium  correlated deviations by any subset of agents can not benefit one of them without hurting another. a minimally fair game is a game in which all actions are available to all agents  and agents who select identical actions get identical payoffs. a particular example of minimally fair games are the symmetric games  but the family of minimally fair games is much wider. in particular  our results are applicable to congestion games and job-shop scheduling  two major topics of study in the interface between computer science and game theory.
1 preliminaries
1 games in strategic form
a	game	in	strategic	form	is	a	tuple	붞	=
  where n is a finite set of players  xi is the strategy set of player is
|the payoff function for playern| = n  whenever convenient we assumei  where xn==뫄{i뫍1 n몫몫몫xi n. if}.
붞 is finite if the strategy sets are finite.
모for every s   n we denote xs = 뫄i뫍sxi. when the set n is clear  xn s will be also denoted by x s  and moreover  x {i} will be also denoted by x i.
모when we discuss subsets of a given set we implicitly assume non-emptiness unless we specify otherwise. let y be a set. the set of probability distributions with finite support over y is denoted by 붟 y  . that is  every c 뫍 붟 y   is a function c : y 뫸  1  such that {y 뫍 y |c y    1} is finite  and. for every y 뫍 y we denote by 붻y the probability distribution that assigns probability 1 to y. let i be a finite set  and let ci 뫍 붟 yi   i 뫍 i  where i is a finite set of indexes  and yi is a set for every i 뫍 i. we denote by 뫄i뫍ici the product probability distribution on y = 뫄i뫍iyi that assigns to every y 뫍 y the probability.
모let  be a game in strategic form  and let s   n. every c 뫍 붟 xs  is called a correlated strategy for s . a correlated strategy for the set of all players n is also called a correlated strategy  and for every i  a correlated strategy for {i} is also called a mixed strategy for i. let c 뫍 붟 x  and let s   n  the marginal probability induced by c on xs is denoted by c s . that is 

모the expected payoff of i with respect to a correlated strategy c is denoted by ui c . that is 

모for every i  and for every xi 뫍 xi  the mixed strategy 붻xi is called a pure strategy.
1 strong equilibrium concepts
let be a game in strategic form  and let x 뫍 x. we say that x is a pure strong equilibrium  aumann  1  in 붞 if the following holds:
모for every subset  s of players and for every ys 뫍 xs there exists i 뫍 s such that ui ys x s  뫞 ui x .
모let c 뫍 붟 x . we say that c is a correlated strong equilibrium  see  rozenfeld and tennenholtz  1    if for every subset of players s   and for every correlated strategy for s  뷅s 뫍 붟 xs  there exists i 뫍 s such that ui 뷅s 뫄 c  s   뫞
ui c .
모the notion of pure strong equilibrium is the one typically studied in the game theory literature when considering deviations by coalitions. the concept of correlated strong equilibrium considers also correlated deviations. of course  a pure strong equilibrium is not necessarily a correlated strong equilibrium. correlated strong equilibrium is a very natural requirement. in an environment in which the players fear/hope that correlated deviations are possible  we expect a strategy profile to be a correlated strong equilibrium in order to be believed/played by the players. in the scope of this article  we will consider such correlation possible  and therefore when we use the term strong equilibrium  we refer to correlated strong equilibrium.
모the above definitions assumed that a player would agree to join a deviating coalition only if the deviation would result in a strict improvement of his payoff. a much stronger stability concept is needed if we fear that players may be persuaded to join a deviating coalition also in cases where such deviation would leave their payoff unchanged  but would increase the payoff of at least one of the other coalition members.
모we say that c 뫍 붟 x  is a correlated super-strong equilibrium  or super-strong equilibrium  if there is no s   n and 뷅s 뫍 붟 xs   such that: for all i 
ui  c   and for at least one i 뫍 s the inequality is strict.
모a super-strong equilibrium is  in particular  a strong equilibrium  but not vice versa.
1 information sets
let y be a set. we say that 붲 is an information set on y if 붲 is a partition of y .
모let y 뫍 y . by 뷎 y  we refer to the equivalence class of y in 붲  i.e. to p 뫍 붲 s.t. y 뫍 p.
모we use these definitions in order to model situations in which an element y 뫍 y is chosen  and an agent has only partial information about the chosen element. it is assumed that  if 붲 is the information set that is available to such agent 
the agent is informed of 뷎 y .
모let 붲1 붲1 be information sets on y . we say that 붲1 refines 붲1 if for all y1 y1 뫍 y if 뷎1 y1  = 뷎1 y1  then 뷎1 y1  = 뷎1 y1 . that is  an agent with available information 붲1 is informed at least as well as an agent with 붲1.
모the above relation is a partial ordering of the information sets  which forms a lattice: the maximal possible information on y is 붲full = {{y}|y 뫍 y }; having such information means that for any choice of y 뫍 y     the agent knows exactly which element was chosen. the minimal possible information on y is 붲  = {y }; that means that the agent has no information at all about any chosen element y 뫍 y .
1 routing mediators
we now introduce routing mediators  a general tool for coordinating and influencing agents' behavior in games. a routing mediator is always assumed to be reliable  and he is endowed with a single ability: to play for the players who explicitly give him the right to play for them. the mediator cannot enforce the players to use his services  neither can he affect the players' utility values. however  routing mediators differ in the information they have on the strategy profile which is being chosen by the players.
모let 붞 be a game in strategic form. a routing mediator for 붞 is a tuple  where the following holds:
  m /뫍 xi for all i 뫍 n. m denotes the new strategy that is now available to each player: to send a message to the mediator  indicating that the player agrees to give the mediator the right of play for him.1
  붲 is an information set on= xi 뫋 {m}. 붲 represents the information avail-z  where z = 뫄i뫍nzi  and
zi
able to the mediator about each pure realization of the players' correlated strategy.
붲 refines 붲basic  which is defined as follows:
given z 뫍 z  let t z  denote {j 뫍 n|zj = m}. that is  t z  denotes the players who agree to give the mediator the right of play for them in z. then  붲basic is the partition induced by the following equivalence relation on z: z1 뫖 z1 iff t z1  = t z1   for 뷎 뫍 붲 we will use t 뷎  to denote t z  for some z 뫍 뷎 .
모that is  we demand that in each pure realization of the agents' strategy the mediator knows exactly which players give him the right of play for them.   붱 is an information set on 붟 z   which represents the information available to the mediator about the correlated strategy of the players. we place no restrictions on 붱  in particular 붱 may equal 붱basic = {붟 z }  meaning that the mediator has no such information.
  for every. that is  c is the conditional contract that is offered by the mediator: it specifies exactly which actions the mediator will perform on behalf of the players who agree to use his services  as a function of the information available to it about the strategy profile chosen by the agents.
모every mediator m for 붞 induces a new game 붞 m  in strategic form in which the strategy set of player i is zi. the payoff function of i is defined for every c 뫍 붟 z  as follows:

모the above definitions express the following interaction between the mediator and the players:
1. the players choose a profile c 뫍 붟 z 
1. a joint coin flip is issued  determining a pure realizationz 뫍 z of c
1. the mediator is informed of 뷎 z  and 뷍 c 
1. the mediator issues a coin flip to determine a pure real-
ization 붻t z  of c뷎 z  뷍 c 
1. the payoff of each player i is given according to

모the payoffs of the players from the profile c are assumed to be their expected payoffs from both coin flips in steps 1.
모the mediator is guaranteed to behave in a pre-specified way  however this behavior is conditional on the actions of the other agents. for this reason  although ui c  is well defined for any profile c 뫍 붟 z   in particular for pure profiles z 뫍 z  ui c  does not necessarily equal  unless 붱 = 붱basic. nevertheless  the concepts of strong equilibrium can still be applied to 붞 m .
모let 붞 be a game in strategic form  an information set on z  붱 an information set on뫍	붟 z .
let mn denote the pure strategy profile뫍 붟 x  is a strong mediated equi-뫄i뫍nm 뫍 z. a correlated strategy c
librium relatively to 붲 붱 if there exists a mediator for 붞    with c뷎 mn  뷍 mn  = c 
for which mn is a correlated strong equilibrium in 붞 m . the notion of super-strong mediated equilibrium can be defined similarly.
note that the above definition coincides with the one of
 monderer and tennenholtz  1  in the case where 붲 = 붲basic  붱 = 붱basic; i.e. they considered the case in which the mediator is only informed of the players that chose to delegate him the right to play for them in step 1; he has no information about the actions of the other players  neither about the correlated strategy that was chosen in step 1.
situations which can be modelled by 붱 = 붱full =
{{c}|c 뫍 붟 z } are situations in which the mediator doesn't decide/reveal its action before the players choose theirs. for example  in a computerized setting  where the correlated deviation is implemented using a program which is submitted and executed on a server  and the mediator is located on this server  the mediator is fully informed about the correlated strategy of the players. in another example  even if the mediator is not informed about correlated deviations  the players might fear that such information leak is possible. lastly  the players may consider a worst case behavior of the mediator  and therefore would agree to deviate only if the mediator can't possibly harm any one of them.
모 can be used to model all the situations in which the mediator does indeed  as the name implies   stand between  the players and the actual game  e.g. situations in which the play is only available through the mediator. for example  if the players' strategies are messages in a network and the mediator sits on the router  it might be reasonable to assume that 붲 = 붲full.
observations: suppose c 뫍 붟 x  is a strong  super-strong  mediated equilibrium relatively to 붲 붱.
1. let w c  =  w1 ... wn  be the payoff vector induced by c. then  for any such that  c is a strong  resp. super-strong  mediated equilibrium relatively to 붲 붱. in light of this  we will sometimes use the following notation: a payoff vector w can be implemented as a strong  super-strong  mediated equilibrium relatively to 붲 붱 if there exists c 뫍 붟 x  such that w c  = w and c is a strong  resp. super-strong  mediated equilibrium relatively to 붲 붱. 1. if 붱 = 붱full  c can be implemented as a strong  resp. super-strong  mediated equilibrium relatively to 붲 붱 even if the mediator is restricted to use only pure actions  i.e. satisfies c뷎 뷍 뫍 xt 뷎  .
refines 붲  then c is also a strong mediated equilib-
모rium relatively to refines 붱  then c is also a strong mediated equilib-
rium relatively to 
모observations 1  1 show that the possible values of 붲 붱 induce a four-end lattice of strong mediated equilibrium concepts  where the strongest  most stable  concept is obtained from 붲basic 붱basic  since it assumes nothing on the information available to the mediator   and the weakest concept is obtained from 붲full 붱full. part of this lattice is depicted below  arrows mean increase in stability :

모a natural question to ask is whether there exists a general relationship between the strong mediated equilibria concepts induced by 붲basic 붱full and 붲full 붱basic. the question is  what empowers the mediator more - increasing the information available to him on each pure outcome  or increasing the information about the correlated strategies 
모as it turns out  this question does not have a general answer:
proposition 1 there exists a game 붞 and a strategy profile c which is a strong mediated equilibrium relatively to 붲full 붱basic  but not a strong mediated equilibrium relatively to 붲basic 붱full.
모an example of such game and such profile appears in the introduction. a less intuitive result is the following:
proposition 1 there exists a game 붞 and a strategy profile c which is a strong mediated equilibrium relatively to 붲basic 붱full  but not a strong mediated equilibrium relatively to 붲full 붱basic.

proof:  sketch  let 붞 be the 1-person game depicted above  and let c =  c c a . in order to see that c is not a strong mediated equilibrium in 붞 relatively to 붲full 붱basic  consider the possible actions of the mediator on behalf of player 1 given the profile  a a m  뫍 z. the mediator has to choose a strategy on behalf of player 1 without knowing the correlated strategy of players {1} that caused the realization  a a . no matter what distribution between a and b will the mediator choose  the total payoff of the deviators will be 1  with player 1 getting more than player 1; note that the pure profile  b b  guarantees the deviators the payoffs  1 ; therefore  no matter what strategy the mediator will choose  players {1} will be able to randomize between  a a  and  b b  so that each of them will get a payoff of 1  making the deviation beneficial for them.
모however  note that the players 1 were able to guarantee themselves the payoffs  1  as a response to any contract offered by the mediator. in a sense  the information set 붱basic means that the players are more informed than the mediator - the strategy of the mediator in this setting is fixed  and cannot depend on the correlated strategy chosen by the players; while their correlated strategy can be a best response to the mediator's strategy. when the information set 붱full is considered  the mediator becomes more informed than the players: he can devise a response based on their correlated strategy. in this example  a mediator who is aware of the exact probabilities that the players 1 assign to the profiles  a a  and  b b  can always respond by a pure strategy a or b on behalf of the third player in a way that will cause one of the players to get a payoff less than 1  making the deviation not beneficial for them.
모a formal proof of the above intuition is technically cumbersome  and therefore is left to the full version. 
1 the existence of strong mediated equilibrium
in this section we present our main result. we show a natural class of routing mediators that allow to implement fair and efficient outcomes as a correlated super-strong equilibrium in a very wide class of games.
some definitions are needed:
모a permutation of the set of players is a one-to-one function from n to n. for every permutation 뷇 and for every action profile x 뫍 x we denote by 뷇x the permutation of x by 뷇. that is   뷇x 뷇i = xi for every player i 뫍 n.
모let 붞 be a game in strategic form. 붞 is a symmetric game if xi = xj for all i j 뫍 n and ui  x  = u뷇 i   뷇x  for every player i  for every action profile x 뫍 x and for every permutation 뷇.
모needless to say that symmetric games are most popular in computerized settings. for example  the extremely rich literature on congestion games in computer science deals with particular form of symmetric games  papadimitriou  1 . however  our main result requires a weaker notion of symmetry:
모let 붞 be a game in strategic form. 붞 is a minimally fair game if for all i j 뫍 n xi = xj and for every action profile x 뫍 x  xi = xj implies that ui x  = uj x .
모that is  a game is minimally fair if players who play the same strategy get the same payoff. the exact value of the received payoff may depend on the identities of the players who chose the strategy  as well as on the rest of the profile. in particular  every symmetric game is a minimally fair game; however  minimally fair games capture a much wider class of settings. for example  typical job-shop scheduling games are minimally fair games.
모note that in a minimally fair game  unlike in a symmetric game  the symmetric socially optimal payoff is not necessarily feasible. in order to capture our notion of fair and efficient outcomes in such games  we need to define the notion of lexicographic ordering on vectors of payoffs:
let be a function that sorts the elements
of real vectors in increasing order. given two vectors
n we say that is lexicographically smaller than
w  if there exists 1 뫞 i 뫞 n such that and for all .
   let 붞 be a minimally fair game. we say that a vector  is the max-min fair payoff of 붞 if w is the lexicographically maximal feasible payoff vector in 붞. it is easy to see that such vector always exists  and is unique. also  such vector is  by definition  pareto optimal.
모the fairness criterion we use is in fact the well-known max-min fairness criterion  as discussed in the communication networks literature  see e.g.  kumar and kleinberg  1  .
we are now ready to state our main result:
theorem 1 let 붞 be a minimally fair game. then  the maxmin fair payoff of 붞 can be implemented as a super-strong mediated equilibrium relatively to 붲full 붱basic.
proof: let w be the max-min fair payoff vector of 붞. suppose w.l.o.g. that the vector w is sorted in increasing order and the players in n are renamed appropriately.
   let . we define a routing mediator  as follows: 붱basic contains a single element  therefore it suffices to define c뷎 z  for all z 뫍 z. let z 뫍 z. if t z  = n  we define c뷎 z  to be the strategy profile that implements w. otherwise  let t = t z   let i = max{n   t}  i.e. i is the highest indexed player among those who don't cooperate with the mediator in z   and let a = zi. we then define c뷎 z  = 뫄i뫍t붻a.
모that is  the action of the mediator for each pure realization of the correlated profile is to have all the cooperating players copy the action of the deviator with the highest payoff in w.
모let s   n 뷅s 뫍 붟 zs . let 뷅 = 뷅s 뫄 be the profile in 붞 m  that is obtained from the deviation of s to 뷅s. suppose  for contradiction  that s weakly benefits from deviating to 뷅s in 붞 m  relatively to mn; that is   i 뫍 s ui  뷅  뫟 wi and  i 뫍 s ui  뷅    wi.
모let k be the highest indexed player in s. in every pure realization z of 뷅  all the players in n s play the same action as k: either because k 뫍 t  z   or because k is  in particular  the highest indexed player in n   t  z . therefore  uj  뷅  = uk  뷅  for every player j 뫍 n   s; therefore  for every j 뫍
{1 ... k}   s  uj  뷅  뫟 wk 뫟 wj  which means that all the can deviate to the correlated profile
뷅  in which the players in s play by 뷅 and the players in copy the strategy of playerwould also weakly benefit from this deviation.
모therefore  we can assume w.l.o.g. that s = {1 ... k} for some  be the payoff vector that is induced by 뷅. we know that for every.
since w is pareto optimal  we know that k   n  otherwise  w would pareto dominate w ; w.l.o.g. we can assume that wk   wk+1.
we define a payoff vector w as follows:
} 뫞
otherwise
where.
모first  we note that pareto dominates this follows from the fact that s
weakly benefits from the deviation that results in w; in the other case  the same holds since 붼   1.

모next  we note that the choice of 붼 ensures that wi 뫞 wj for j 뫞 k  i   k; combined with our previous observation  this implies that  contradicting our choice of w. 
모below we present two additional results  that can be proven using similar logic as behind the proof of theorem 1. the proofs of these results are therefore omitted due to lack of space. both results attempt to relax the requirements on the information set 붲  at the price of restricting attention to the class of symmetric games  theorem 1  or considering strong instead of super-strong equilibrium  theorem 1 .
모the relaxation of the requirements on 붲 is based on the idea that in order to  punish  a set of deviating agents  we don't have to see the actions of all of them; it suffices  under some conditions  to observe only the action selected by a single deviator.
모formally  붲 must satisfy the following:	there exists an ordering  p on n such that for all  if  then.
that is  붲 allows to distinguish between different actions of the highest ranked player  by  p  among the deviators.
theorem 1 let 붞 be a symmetric game  and suppose than an information set 붲 on z satisfies the above property.
모then  the symmetric optimal payoff vector w =  v ... v   in 붞 can be implemented as a super-strong mediated equilibrium relatively to 붲 붱basic.
theorem 1 let 붞 be a minimally fair game  and suppose than an information set 붲 on z satisfies the above property.
모then  the max-min fair payoff of 붞 can be implemented as a strong mediated equilibrium relatively to 붲 붱basic.
1 further work
the general aim of this research is to find rich settings in which routing mediators can help to achieve stability and/or efficiency. in this paper we concentrated on achieving stability against deviations by coalitions via the concept of correlated strong equilibrium; other desirable solution concepts can be of interest  e.g. pure equilibria concepts  nash  strong   weakly dominant strategies  and coalition proof equilibrium  bernheim et al.  1 .
모other models of multi-agent interaction  e.g. repeated games  or games with incomplete information  are also under consideration.
