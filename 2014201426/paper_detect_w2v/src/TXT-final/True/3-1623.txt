
previous work in social network analysis  sna  has modeled the existence of links from one entity to another  but not the language content or topics on those links. we present the authorrecipient-topic  art  model for social network analysis  which learns topic distributions based on the direction-sensitive messages sent between entities. the model builds on latent dirichlet allocation  lda  and the author-topic  at  model  adding the key attribute that distribution over topics is conditioned distinctly on both the sender and recipient-steering the discovery of topics according to the relationships between people. we give results on both the enron email corpus and a researcher's email archive  providing evidence not only that clearly relevant topics are discovered  but that the art model better predicts people's roles.
1 introduction and related work
social network analysis  sna  is the study of mathematical models for interactions among people  organizations and groups. with the recent availability of large datasets of human interactions  shetty & adibi  1; wu et al.  1   the popularity of services like friendster.com and linkedin.com  and the salience of the connections among the 1 hijackers  there has been growing interest in social network analysis.
¡¡historically  research in the field has been led by social scientists and physicists  lorrain & white  1; albert & barabasi  1; watts  1; wasserman & faust  1¡ä	   and previous work has emphasized binary interaction data  with directed and/or weighted edges. there has not  however  previously been significant work by researchers with backgrounds in statistical natural language processing  nor analysis that captures the richness of the language contents of the interactions-the words  the topics  and other highdimensional specifics of the interactions between people.
¡¡using pure network connectivity properties  sna often aims to discover various categories of nodes in a network. for example  in addition to determining that a node-degree distribution is heavy-tailed  we can also find those particular nodes with an inordinately high number of connections  or with connections to a particularly well-connected subset of the network. furthermore  using these properties we can assign  roles  to certain nodes  e.g.  lorrain & white  1; wolfe & jensen  1 . however  it is clear that network properties are not enough to discover all the roles in a social network. consider email messages in a corporate setting  and imagine a situation where a tightly knit group of users trade email messages with each other in a roughly symmetric fashion. thus  at the network level they appear to fulfill the same role. but perhaps  one of the users is in fact a manager for the whole group-a role that becomes obvious only when one accounts for the language content of the email messages.
¡¡outside of the social network analysis literature  there has been a stream of new research in machine learning and natural language models for clustering words in order to discover the few underlying topics that are combined to form documents in a corpus. latent dirichlet allocation  blei et al.  1  robustly discovers multinomial word distributions of these topics. hierarchical dirichlet processes  teh et al.  1  can determine an appropriate number of topics for a corpus. the author-topic model  steyvers et al.  1  learns topics conditioned on the mixture of authors that composed a document. however  none of these models are appropriate for sna  in which we aim to capture the directed interactions and relationships between people.
¡¡the paper presents the author-recipient-topic  art  model  a directed graphical model of words in a message generated given their author and a set of recipients. the model is similar to the author-topic  at  model  but with the crucial enhancement that it conditions the per-message topic distribution jointly on both the author and individual recipients  rather than on individual authors. thus the discovery of topics in the art model is influenced by the social structure in which messages are sent and received. each topic consists of a multinomial distribution over words. each author-recipient pair has a distribution over topics. we can also easily calculate marginal distributions over topics conditioned solely on an author  or solely on a recipient  in order to find the topics on which each person is most likely to send or receive.
¡¡most importantly  we can also effectively use these personconditioned topic distributions to measure similarity between people  and thus discover people's roles by clustering using this similarity. for example  people who receive messages containing requests for photocopying  travel bookings  and meeting room arrangements can all be said to have the role  administrative assistant   and can be discovered as such because in the art model they will all have these topics with high probability in their receiving distribution. note that we can discover that two people have similar roles even if in the graph they are connected to very different sets of people.
¡¡we demonstrate this model on the enron email corpus comprising 1 people and 1k messages  and also on about 1 months of incoming and outgoing mail of the first author  comprising 1 people and 1k messages. we show not only that art discovers extremely salient topics  but also gives evidence that art predicts people's roles better than at and sna. furthermore we show that the similarity matrix produced by art is different from both the sna matrix and the at matrix in several appropriate ways.
¡¡we also describe an extension of the art model that explicitly captures roles of people  by generating role associations for the authors and recipients of a message  and conditioning the topic distributions on role assignments. the model  which we term role-author-recipient-topic  rart   naturally represents that one person can have more than one role. we describe several possible rart variants  and describe preliminary experiments with one of these variants.
1 author-recipient-topic models
before describing the art model  we first describe three related models. latent dirichlet allocation  lda  is a bayesian network that generates a document using a mixture of topics  blei et al.  1 . in its generative process  for each document d  a multinomial distribution ¦È over topics is randomly sampled from a dirichlet with parameter ¦Á  and then to generate each word  a topic z is chosen from this topic distribution  and a word  w  is generated by randomly sampling from a topic-specific multinomial distribution ¦Õz. the robustness of the model is greatly enhanced by integrating out uncertainty about the per-document topic distribution ¦È.
¡¡the author model  also termed a multi-label mixture model   mccallum  1   is a bayesian network that simultaneously models document content and its authors' interests with a 1 correspondence between topics and authors. for each document d  a set of authors ad is observed. to generate each word  an author  z  is sampled uniformly from the set  and then a word  w  is generated by sampling from an authorspecific multinomial distribution ¦Õz. the author-topic  at  model is a similar bayesian network  in which each authors' interests are modeled with a mixture of topics  steyvers et al.  1 . in its generative process for each document d  a set of authors  ad  is observed. to generate each word  an author x is chosen uniformly from this set  then a topic z is selected from a topic distribution ¦Èx that is specific to the author  and then a word w is generated from a topic-specific multinomial distribution ¦Õz. however  as described previously  none of these models is suitable for modeling message data.
¡¡an email message has one sender and in general more than one recipients. we could treat both the sender and the recipients as  authors  of the message  and then employ the at model  but this does not distinguish the author and the recipients of the message  which is undesirable in many real-world situations. a manager may send email to a secretary and vice
	latent dirichlet allocation	author model
	 lda 	 multi-label mixture model 

	 at 	 art 
	 rosen-zvi  griffiths  steyvers  smyth 1 	 this paper 

figure 1: three related models  and the art model. in all models  each observed word  w  is generated from a multinomial word distribution  ¦Õz  specific to a particular topic/author  z  however topics are selected differently in each of the models.
versa  but the nature of the requests and language used may be quite different. even more dramatically  consider the large quantity of junk email that we receive; modeling the topics of these messages as undistinguished from the topics we write about as authors would be extremely confounding and undesirable since they do not reflect our expertise or roles.
¡¡alternatively we could still employ the at model by ignoring the recipient information of email and treating each email document as if it only has one author. however  in this case  which is similar to the lda model  we are losing all information about the recipients  and the connections between people implied by sender-recipient relationships.
¡¡thus  we propose an author-recipient-topic  art  model for message data. the art model captures topics and the directed social network of senders and recipients by conditioning the multinomial distribution over topics distinctly on both the author and one recipient of a message. unlike the at  the art model takes into consideration both author and recipients distinctly  in addition to modeling the email content as a mixture of topics.
¡¡the art model is a bayesian network that simultaneously models message content  as well as the directed social network in which the messages are sent. in its generative process  for each message d  an author  ad  and a set of recipients  rd  are observed. to generate each word  a recipient  x  is chosen uniformly from rd  and then a topic z is chosen from a multinomial topic distribution ¦Èad x  where the distribution is specific to the author-recipient pair  ad x . finally  the word w is generated by sampling from a topic-specific multinomial distribution ¦Õz. the result is that the discovery of topics is guided by the social network in which the collection of message text was generated.
the bayesian network for all models is shown in figure 1.
¡¡in the art model  given the hyperparameters ¦Á and ¦Â  an author a  and a set of recipients r  the joint distribution of the topic mixtures ¦È  the word mixtures ¦Õ  a set of recipients x  a set of topics z and a set of words w in the corpus is given by:
p ¦È ¦Õ x z w|¦Á ¦Â a r 
	d	nd
=p ¦È|¦Á p ¦Õ|¦Â yy p xdn|rd p zdn|¦Èad xdn p wdn|¦Õzdn .
d=1 n=1
¡¡integrating over ¦È and ¦Õ  and summing over x and z  we get the marginal distribution of a corpus:
	d	nd
zz
p w|¦Á ¦Â a r  =	p ¦È|¦Á p ¦Õ|¦Â yyxxp xdn|rd 
d=1n=1 xdn zdn
¡¤ p zdn|¦Èad xdn p wdn|¦Õzdn d¦Õd¦È.
1 experimental results
we present results with the enron email corpus and the personal email of the first author of this paper  mccallum . after preprocessing  the enron corpus we use contains 1 users and 1 emails  and the mccallum dataset consists of 1 messages written by 1 authors  sent or received by mccallum during jan.-oct.  1. gibbs sampling is employed to conduct all experiements  as detailed in  mccallum et al.  1  .
1 topics and prominent relations from art
table 1 shows the highest probability words from six topics in an art model trained on the 1 enron users with 1 topics.  the quoted titles are our own interpretation of a summary for the topics.  the clarity and specificity of these topics are typical of the topics discovered by the model.
¡¡beneath the word distribution for each topic are the three author-recipient pairs with highest probability of discussing that topic-each pair separated by a horizontal line  with the author above the recipient. for example  hain  the top author of messages in the  legal contracts  topic  was an in-house lawyer at enron. in the  operations  topic  it is satisfying to see beck  who was the chief operating officer at enron. in the  government relations  topic  we see dasovich  who was a government relation executive  shapiro who was vice
topic 1topic 1topic 1 legal contracts  doc. review  time scheduling section1attached1day1party1agreement1friday1language1review1morning1contract1questions1monday1date1draft1office1enron1letter1wednesday1parties1comments1tuesday1notice1copy1time1days1revised1good1include1document1thursday1m.hain1g.nemec1j.dasovich1j.steffesb.tycholizr.shapiroj.dasovich1g.nemec1j.dasovich1r.shapirom.whittj.steffesd.hyvl1b.tycholiz1c.clair1k.wardg.nemecm.taylortopic 1topic 1topic 1 operations  power market  gov. relations operations1market1state1team1power1california1office1price1power1list1system1energy1bob1prices1electricity1open1high1davis1meeting1based1utilities1gas1buy1commission1business1customers1governor1houston1costs1prices1s.beck1j.dasovich1j.dasovich1l.kitchenj.steffesr.shapiros.beck1j.dasovich1j.dasovich1j.lavorator.shapiroj.steffess.beck1m.taylor1j.dasovich1s.whitee.sagerr.sanderstable 1: an illustration of several topics from a 1-topic run for the enron email dataset. each topic is shown with the top 1 words and their corresponding conditional probabilities. the quoted titles are our own summary for the topics. below are prominent author-recipient pairs for each topic.
president of regulatory affairs  and steffes  who was vice president of government affairs. results on the mccallum email dataset are reported in table 1.
1 stochastic blockstructures and roles
the stochastic equivalence hypothesis from sna states that nodes in a network that behave stochastically equivalently must have similar roles. in the case of an email network consisting of message counts  the natural way to measure equivalence is to examine the probability that a node communicated with other nodes. if two nodes have similar probability distribution over their communication partners  we should consider them role-equivalent. we can measure a similarity symmetrically by calculating the jensen-shannon  js  divergence  and inverting it.
¡¡standard recursive graph-cutting algorithms on this matrix can be used to cluster users  rearranging the rows/columns to
topic 1topic 1topic 1topic 1 grant meeting ml friendlyproposals setup models discourse proposaltodaymodelgreatdatatomorrowmodelsgoodbudgettimeinferencedonworkllconditionalsoundsyearmeetingmethodsworkglennweeknumberwishesnsftalksequencetalkprojectmeetlearninginterestingsetsmorninggraphicaltimesupportmondayrandomhearsmythronbcasuttonmccallummccallummccallummccallumculottamccallumwellnericml1-webadminmccallumstowellmccallumicml1-chairscasuttonmccallumcasuttonmccallummccallumlaffertymccallumcasuttonronbmccallummccallumnips1workflowmccallumsmythcasuttonmccallumsaunderspereiramccallumweinmanmccallumlaffertywellnermccallumpereiratable 1: the four topics most prominent in mccallum's email exchange with smyth  padhraic smyth   from a 1-topic run of art on 1 months of mccallum's email. the topics provide an extremely salient summary of mccallum and smyth's relationship during this time period: they wrote a grant proposal together; they set up many meetings; they discussed machine learning models; they were friendly with each other. below are prominent author-recipient pairs for each topic. the people other than smyth also appear in very sensible associations: stowell is mccallum's proposal budget administrator; mccallum also wrote a proposal with lafferty  john lafferty  and pereira  fernando pereira ; mccallum also sets up meetings  discusses machine learning and has friendly discourse with his graduate student advisees: ronb  wellner  casutton  and culotta; he does not  however  discuss the details of proposal-writing with them.
form approximately block-diagonal structures. this is the familiar process of 'blockstructuring' used in sna. we perform such an analysis on two datasets: a small subset of the enron users consisting mostly of people associated with the transwestern pipeline division within enron  and the entirety of mccallum's email.
¡¡beginning with the enron data  figure 1 shows the results from traditional sna  in this case  js divergence of distributions on recipients from each sender   art  js divergence of recipient-marginalized topic distributions for each sender  and at  using the topics distributions from at instead of our art . darker shading indicates higher similarity between people.
¡¡consider enron employee geaccone  user 1 in all the matrices in figure 1 . according to the traditional sna role measurement  geaccone and mccarty  user 1  have very similar roles  however  both the at and art models indicate no special similarity. inspection of the data reveals that geaconne was an executive assistant  while mccarty was a vice-

figure 1: top: sna inverse js network. left bottom: art inverse js network. right bottom: at inverse js network. darker shades indicate higher similarity.
president-rather different roles-and  thus output of art and at is more appropriate. thus  sna analysis shows that they wrote email to similar sets of people  but the art analysis illustrates that they used very different language.
¡¡here art and at provide similar role distance  but they show their differences elsewhere. for example  at indicates a very strong role similarity between geaconne and hayslett  user 1   who was her boss  and cfo & vice president in the division ; on the other hand  art more correctly designates a low role similarity for this pair-in fact  art assigns low similarity between geaconne and all others in the matrix  which is appropriate because she is the only executive assistant in this small sample of enron employees.
another interesting pair is blair  user 1  and watson  user
1 . art predicts them to be role-similar  while the sna and at models do not. art's prediction seems more appropriate since blair worked on  gas pipeline logistics  and watson worked on  pipeline facility planning   two very similar jobs. based on the above examples  and other similar examples  we would claim that the art model is clearly better than the sna model in predicting role-equivalence between users  and somewhat better than the at model in this capacity.
¡¡we also carried out this analysis with the personal email for mccallum to further validate the difference between the art and sna predictions. there are 1 users in this email corpus. table 1 shows the closest pairs  as calculated by the art model and sna model. the difference in quality between the art and sna halves of the table is striking.
¡¡almost all the pairs predicted by the art model look reasonable while many of those predicted by sna are not at all. for example  art matches mike and mikem are actually two different email addresses for the same person.  most
pairs considered most alike by artuser pairdescriptioneditor reviewsboth journal review managementmike mikemsame person!  manual coref error aepshtey smuckerboth students in mccallum's classcoe laurieboth umass admin assistantsmcollins mitchellboth ml researchers on sri projectpairs considered most alike by snauser pairdescriptionaepshtey rasmithboth students in mccallum's classdonna editorspouse is unrel. to journal editordonna krishnaspouse is unrel. to conf. organizerdonna ramshawspouse is unrel. to researcher at bbndonna reviewsspouse is unrel. to journal editortable 1: pairs considered most alike by art and sna on mccallum email. all pairs produced by the art model are accurately quite similar. this is not so for the top sna pairs. many users are considered similar by sna merely because they appear in the corpus mostly sending email only to mccallum. however  this causes people with very different roles to be incorrectly declared similar-such as mccallum's spouse  donna  and the jmlr editor.
other correferent email addresses were pre-collapsed by hand during preprocessing; here art has pointed out out a mistaken omission  indicating the potential for art to be used as a helpful component of an automated coreference system.  users coe and laurie are both umass cs department administrative assistants; they rarely send email to the same people  but they write about similar things. on the other hand  the pairs declared most similar by the sna model are mostly extremely poor. most of the pairs include donna  and indicate pairs of people who are similar only because in this corpus they appeared mostly sending email only to mccallum  and not others. user donna is mccallum's spouse.
1 role-author-recipient-topic models
to better explore the roles of authors  an additional level of latent variables can be introduced to explicitly model roles. of particular interest is capturing the notion that a person can have multiple roles simultaneously-for example  a person can be both a professor and a mountain climber. each role is associated with a set of topics  and these topics may overlap. for example  professors' topics may prominently feature research  meeting times  grant proposals  and friendly relations; climbers' topics may prominently feature mountains  climbing equipment  and also meeting times and friendly relations. we incorporate into the art model a new set of variables that take on values indicating role  and we term this augmented model the role-author-recipient-topic  rart  model. in rart  authors  roles and message-contents are modeled simultaneously. each author has a multinomial distribution over roles. authors and recipients are mapped to some role assignments  and a topic is selected based on these roles. thus we have a clustering model  in which appearances of topics are the underlying data  and sets of corre-
	role-author-recipient-topic	role-author-recipient-topic

figure 1: two possible variants for the role-authorrecipient-topic  rart  model.
lated topics gather together clusters that indicate roles. each sender-role and recipient-role pair has a multinomial distribution over topics  and each topic has a multinomial distribution over words.
¡¡as shown in figure 1  different strategies can be employed to incorporate the  role  latent variables. first in rart1  role assignments can be made separately for each word in a document. this model represents that a person can change role during the course of the email message. in rart1  on the other hand  a person chooses one role for the duration of the message. here each recipient of the message selects a role assignment  and then for each word  a recipient  with corresponding role  is selected on which to condition the selection of topic. some other variants are possible  for example  not shown in figure 1   the recipients together result in the selection of a common  shared role  which is used to condition the selection of every word in the message. this last model may help capture the fact that a person's role may depend on the other recipients of the message  but also restricts all recipients to a single role.
¡¡the generative process of rart models is similar to that for art  as described in section 1. the gibbs sampling formulae for rart models can be derived in the same way as for art  but in a more complex form.
1 experimental results with rart
preliminary experiments have been conducted with the rart1 model. because we introduce two sets of additional latent variables  author role and recipient role   the sampling procedure at each iteration is significantly more complex. to make inference more efficient  we can instead perform it in two distinct parts. one strategy we have found useful is to first train an art model  and use a sample to obtain topic assignments and recipient assignments for each word token. then  in the next stage  we treat topics and recipients as observed  locked . although such a strategy may not be recommended for arbitrary graphical models  we feel this is reasonable here because we find that a single sample from gibbs sampling on the art model to yield good assignments. the following results are based on a 1-group  1-topic run of rart1 on mccallum email dataset.
¡¡our results show that the rart model indeed clearly discovers automatically person-role information by its explicit inclusion of a role variables. for example  the users most prominent in role 1 include   in probability order : olc  gauthier  irsystem  system  allan  valerie  tech  and steve. they are all employees  or mailing lists  of the it support staff at umass cs  except for allan  who  however  was the professor chairing the department's computing committee. role 1 seems to represent  working on the sri calo project.  its most prominent members include  in probability order : pereira  claire  israel  moll  mgervasio  melinda.gervasio  majordomo  and colin.evans. most of them are researchers working on calo project  many of them at sri. the sender majordomo sends messages from an sri calo mailing list. the users mgervasio and melinda.gervasio are actually the same person; satisfyingly rart found that they have very similar role distributions.
¡¡one objective of the rart model is to capture the multiple roles that a person has. for example  user allan  james allan  mentioned above has a role in  it support   but also has a role as  researcher.  consider also user pereira  fernando pereira ; his top five role assginments are role 1  nlp research   role 1  sri calo   role 1  proposal writing   role 1  grant issues   and role 1  guests at mccallum's house -all exactly appropriate  as viewed through mccallum's email. note that the difference between roles can be subtle  for example  role 1 and role 1 overlap.
¡¡as expected  one can observe interesting differences in the sender versus recipient topic distributions associated with each role. for instance  in role 1  sri calo   the top three topics for a sender role are topic 1  calo information   topic 1  mail accounts   and topic 1  program meetings   but for its recipient roles  most prominent are topic 1  task assignments   topic 1  a particular calo-related research paper   and topic 1  java code . space limitations prevent inclusion of tables showing the full distributions associated many topics  roles and people  however these will be available in an accompanying technical report.
1 conclusions
we have presented the author-recipient-topic model  a bayesian network for social network analysis that discovers discussion topics conditioned on the sender-recipient relationships in a corpus of messages. to the best of our knowledge  this model combines for the first time the directionalized connectivity graph from social network analysis with the clustering of words to form topics from probabilistic language modeling.
¡¡the model can be applied to discovering topics conditioned on message sending relationships  clustering to find social roles  and summarizing and analyzing large bodies of message data. the model would form a useful component in systems for routing requests  expert-finding  message recommendation and prioritization  and understanding the interactions in an organization in order to make recommendations about improving organizational efficiency.
¡¡the role-author-recipient-topic  rart  models explicitly capture the multiple roles of people  based on messages sent and received. additional work on other models that explicitly capture roles and groups is ongoing.
acknowledgments
this work was supported in part by the center for intelligent information retrieval  the central intelligence agency  the national security agency  the national science foundation under nsf grant #iis-1  and by the defense advanced research projects agency  through the department of the interior  nbc  acquisition services division  under contract #nbchd1.
