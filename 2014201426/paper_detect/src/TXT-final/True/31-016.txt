 
traveling is a part of every person's day-to-day life. 
with the massive and complicated road network of a modern city  or country   finding a good route to travel from one place to another is not a simple task. in network theory  this is the shortest path problem. 
shortest path algorithms are often used to solve the problem. however  these algorithms are wasteful in terms of computation when applied to the route finding task. they may also produce solutions that are not suitable for human drivers. in this paper  we present an approach that uses knowledge about the road network to substantially reduce the time and space required in computation  and to ensure human oriented solutions. within this framework  three alternative methods are proposed  which may be used in different situations. a system has also been implemented for route finding in singapore. 
1. introduction 
one of the important computer applications in the transportation industry is route finding. suppose we want to deliver some goods from our warehouse to a customer  we need to know the best route that will take us there. as another example  suppose a tourist rented a car and planned to drive around a city. he/she needs to know the way before going from one place to another. a computer route finding system will not only find the best route for the user  but also help to reduce the traffic in a road network. it is estimated that excess travel amounted 1 billion miles and 1 person-years annually at a total estimated cost of more than 
1 billion dollars per year in united states  king and mast  1 . 
 in network theory  route finding is a shortest path problem  deo and pang  1; dial et a/.  1 . algorithms  such as dijkstra algorithm  deo and pang  
1  and a*  pearl  1   are often used for solving this problem. however  these algorithms are general algorithms. they are wasteful in terms of computation when applied to the route finding task. most of the routes searched by the algorithms are actually irrelevant as they cannot possibly be part of the solution. using only these algorithms may also produce solutions that are not suitable for human drivers. for example  human drivers would normally like to drive on major roads as far as possible  although using some minor roads may give the shortest path. in this paper  we propose a novel and yet simple approach of using knowledge about the road network to help a shortest path algorithm to perform the route finding task. it is termed as knowledge-based route finding. this approach dramatically reduces the time and space required in computation  and also produces human oriented solutions. 
 although shortest path problem has been studied for decades  limited work has been done on using knowledgebased technique to help solving the route finding problem. we believe that one of the reasons is that dijkstra algorithm  a* and others are already relatively efficient for the task. in the past  knowledge-based approach has been mostly applied for solving problems that do not have efficient algorithmic solutions  hayes-roth et a/.  1; winston  1 . however  from our experiences  we can say that although dijkstra algorithm  or a*  is efficient  knowledge-based approach can be successfully incorporated to produce even more efficient solution methods. 
 our knowledge-based route finding can be described as using knowledge about the road network to isolate the search and/or to guide the problem solving. two key types of knowledge used in the proposed approach are the knowledge of road types  e.g.  minor roads  major roads  and expressways  and the knowledge that major roads and expressways naturally partition the whole network into many small areas or sub-networks. these two types of knowledge and some others are used to partition and to reorganize the whole network. an efficient search algorithm is employed to search for the best solution in the appropriate sub-networks rather than the whole network. within this framework  we present three specific methods. each of these methods has its advantages and 
disadvantages over the others  and is suitable for a different situation. a system  called kb-rfinder  has also been implemented for route finding in singapore. 
1. shortest path algorithms and knowledgebased method 
shortest path problem is modeled as finding the shortest path between two nodes in a weighted and directed network g =  n  a  with a node set n and an arc set a. each arc  /'  j  e a also has a length  or weight  /ij y   1. in the route finding context  the network is the road network. nodes are road junctions  and arcs are road segments  a road may have a number of segments  however  below we will use 
	liu 	1 

roads and road segments interchangeably . the length of each arc could be the distance or the travel time between two adjacent junctions. the traveling direction allowed for a road segment corresponding to the direction of an arc. 
 over the past three decades  many algorithms have been devised for the problem  see e.g.   dial et al.  1; gallo  and pallottino  1; helgason et al.  1  . dijkstra algorithm is the classical algorithm for the problem. most of the others are variations of dijkstra algorithm. this algorithm can solve the problem in  steps by using a binary heap  sedgewick  1  for sparse networks  road networks are sparse networks . in our research  we have implemented many well-known algorithms  including dijkstra algorithm  gallo  and pallottino  1; sedgewick  1   si  dial et al.  1; gallo  and pallottino  1   s1  dial et a/.  1; gallo  and pallottino  1   and a*  pearl  1   s1  helgason et a/.  1   s1  helgason et a/.  1   bi-directional a*  pohl  1 . for road networks  a* is the most efficient algorithm. interested reader  please see their performance comparisons in  liu and tay  1 . 
 although these algorithms are relatively efficient  applying them directly to route finding is not appropriate. they are wasteful in terms of computation as in real situations it is not necessary to search through the whole network in order to find the solution. they may produce solutions unsuitable for human users as they may use too many minor roads  which is against the human preference of traveling on major roads. 
knowledge-based problem solving  hayes-roth et ai  
1; winston  1  emphasizes the use of human problem solving strategies on a computer. this technology has been used in many applications. 
 however  for route finding  using knowledge-based approach alone will not be efficient. after applying human knowledge about the network  a search is still required to find the best solution. in most situations  knowledge is also unable to guarantee the best solution. it can only isolate the part of the network which could contain the solution  or prune off part of the network that is unlikely to contain the solution. after that  a search algorithm has to be used to find the best solution in the isolated area. in this case  a* or  dijkstra algorithm  comes to help. 
 from the above  it can be seen that each individual technique  algorithmic and knowledge-based method  does not provide a good solution method for route finding. each of them  however  does have its advantages in solving the problem. analysis of their advantages and disadvantages shows that they can easily help each other. thus  integrating them is the natural solution. we call this integration knowledge-based route finding. we describe this approach in the next 1 sections 
1. knowledge about the road network 
before presenting our approach  we first describe the key types of knowledge we use. there are two main types: 
road types: typically  in a city road network  there are three types of roads  minor roads  major roads and expressways. knowledge about road types is crucial in route finding for two reasons. firstly  people prefer to 
1 	action and perception 
drive on expressways and major roads. a practical system should meet this preference. secondly  road type knowledge also help to prune the search space in problem solving as we will see later. 
major roads partition the whole road network: when we look at the road map of a city  an important feature that can be observed is that major roads and expressways themselves also form a network  we call it the major road network or mrn for short . expressways may not form a connected network in a city  but may form a network in a 
state or country. we group major roads and expressways into one class and call them major roads because expressways normally make up only a small part of the road network in a city  which is our primary concern. however  our ideas developed subsequently can be generalized to expressways for inter-city and inter-state route finding. figure 1  major roads are in thick lines and minor roads are in thin lines  shows a small part of the singapore road network. 
we can further observe from the map that mrn naturally partitions the whole network into many smaller areas  or sub-networks   see figure 1 . the shaded area is an example. this is the key idea of our approach  which uses this natural partition to isolate the search. 

1. using knowledge to isolate search 
the ideal situation in route finding  particularly for a long distance travel  is as follows: assume that a driver plans to go from one location  the source s  on a minor road to another location  the destination d  on another minor road. ideally  the route finding system should search in a small area around s to reach some major roads  to reach the nearest major road may not be sufficient  we will elaborate on this in section 1 . within this area  it will consider both major and minor roads. after this  it should consider only major roads. when it is approaching d  the system again should search in a small area in which both major and minor roads are considered in order to reach the destination. figure 1 illustrates this scenario. grids are used to show the isolated areas. this approach has two advantages:  1  it prunes off a great deal of search space; and  1  it produces routes that satisfy people's preference of traveling on major roads. 

 obviously  this ideal case does not guarantee the best solution. but  the solution may be good enough as people do prefer to drive on major roads. in real life  we do not always ask for the best solution. a good solution will be sufficient. now  the problem is how to form these grids. we discuss our approach to this below. 

figure 1. an ideal grid combination to prune search 
 in the new technique  we will not form the major grid as in figure 1  i.e.  all the major roads are considered. when a* is used instead of dijkstra algorithm  it automatically searches in the direction of the destination. thus  only the two major-minor grids need to be formed. 
 in section 1  it was noted that mrn naturally partitions the whole network into many small areas. all the minor roads in each area can be accessed from the major roads around them. hence  we can statically assign each node  or junction  in the small area that area as its grid. thus  in the proposed approach  a road network is represented as a major road network and many small sub-networks  each grid represents a sub-network . within this framework  three specific network representations and their respective problem solving methods will be discussed. they are the topics of the next two sections. here  we shall focus on the grid formation  which is a process of partitioning the road network into many small grid sub-networks. the important cases are as follows: 
1. major roads surrounding a set of minor roads naturally form a grid sub-network for every node  or junction  in the minor roads. the shaded area in figure 1 shows such a grid sub-network. the minor roads inside the grid are connected  i.e.  they are connected without considering their traveling directions allowed. 
1. although major roads naturally form many grid subnetworks  the minor roads in a grid sub-network may not be connected among themselves. for example  figure 1 a  shows a natural grid sub-network that has three unconnected parts  only connected via major roads . it is obvious that traveling to or from any node in one part will not need to pass the minor roads in any other part unless the source or the destination is in that part. hence  three smaller grids may be formed  see b  c and d in figure 1 . this separation further reduces the search. 
notice that each smaller grid sub-network contains the major roads around it. this is to facilitate the linking up operation when we need to link a grid sub-network to mrn. notice also that a grid may not need major roads to surround it  see c and d of figure 1 . 

 the above grid formation could be done automatically. it appears that quite amount of processing is needed. this is not a problem. it is important to recognize that this only needs to be done once. once constructed  it is used again and again to find the shortest route for any problem. 
1. representing the road network 
from the last two sections  two key concepts have emerged  namely  mrn  and grid sub-networks. they together represent a complete network. here  we presents three alternative methods for representing and storing a road network. their respective problem solving methods are presented in the next section. 
method 1. in this first method  the whole network is represented as many pieces  a major road network and many grid sub-networks. the required grid sub-networks are linked to the major road network when needed in route finding. the actual implementation can be in various forms. the important thing is that each grid subnetwork should be indexed so that it can be retrieved in constant time when needed. this method does not save space because everything is still in the system. 
method 1. like method 1  the whole network is also represented as many pieces. however  only mrn is permanently in the system memory  while all the grid sub-networks are stored in a hard disk or a cd rom. each of them could be in an indexed file such that it can be loaded quickly. when a query requires a node  either the source or the destination  in a grid sub-network  that sub-network will be read in. this method requires very little system memory because normally a large majority of roads are minor roads. 
method 1. this method represents the whole network as one piece just like that for dijkstra algorithm. however  each node in a gird is marked with its grid number. a node that is on a minor and also a major road is considered as a major road node. all the major road nodes are marked with 1. like method 1. this method does not save space as everything is in the memory. 
1. problem solving algorithms 
this section presents the problem solving algorithms for the above three network representations respectively. method 1. the algorithm for this method is given below. 
step 1. if the source is a node on mrn then go to step 1 
else  1 . retrieve the grid for the source 
 1 . link the gird sub-network to mrn 
step 1. if the destination is a node on mrn then go to step 1 
else if the destination is in the same gird as the source then 
go to step 1 
else  1 . retrieve the grid sub-network for the destination 
 1 . link the sub-network to mrn. 
step 1. run the shortest path algorithm  e.g.  a* or 
¡¡¡¡¡¡dijkstra algorithm  with the augmented mrn. step 1. remove the sub-networks added into mrn. 
	liu 	1 

let us analyze the complexity of this algorithm.  1  in 
step 1 and 1 can both be done in constant time as each node can be associated with its grid sub-network. linking each grid sub-network to mrn in  1  of step 1 or step 1 is only linear to the number of major network nodes that surround the grid. the computation required is very small and negligible. implementation details of this link-up operation can be found in  liu and tay  1 . step 1 is also negligible. so  the main computation comes from the shortest path algorithm  e.g.  a* . because the number of nodes and arcs have been substantially reduced  it will run much faster than with the complete network. 
method 1. the algorithm for this method is almost the same as that for method 1 above. the main difference is that in step 1  and step 1   the appropriate subnetworks are loaded in from a hard disk or a cd rom. the link-up operation is also done differently from method 1 because the sub-networks need to be formed first before they are linked to mrn. 
method 1. this method is simple. a*  or dijkstra algorithm  can be modified so that before visiting a node it checks to see whether the node is in the source grid  or the destination grid  or on a major road. if it is  it will be considered. otherwise  it will be dropped. it is clear  the complexity of this method is the same as a*  or dijkstra algorithm . 
this method has an interesting property. note that using grid sub-networks and mrn in method 1 and method 1 creates a problem where some shortcuts by using minor roads could not be considered such that the solution found may not be the shortest. for example  see figure 1   we are traveling from 1 to d  assuming d is in a grid subnetwork and 1 is an intermediate node on mrn  the source is far away . using method 1 and 1  only minor roads in the grid sub-network where d is located will be considered. the minor road 1 will not be in. in this case  the path will be 1-1-1-d. obviously  this is not the shortest path if 1 is included. the path 1-1-d is definitely shorter in terms of distance  assuming it is also true of traveling time . 1 is a shortcut. 

   figure 1. an example shortcut problem situation method 1 is able to handle this type of simple shortcuts. in the above example  when the system searches the nodes from 1  the road segment 1 will be considered because node 1 is on a major road. this method  however  cannot consider shortcuts that have more than one segment between two nodes on major roads  e.g.  1-1. although this method is only able to handle one-segment shortcuts  surprisingly the results listed in the next section show it can produce solutions that are very close to optimal ones using the singapore road network. 
all the above discussion follows the ideal situation in 
section 1  which is for long distance travels. so how about 
1 	action and perception 
short .and medium distance travels  indeed  it is easy to see that they can also use the proposed techniques. 
1. evaluations 
the aim of this project is to build a road guidance system for cars and other types of vehicles in singapore. a prototype  called kb-rfinder  has been implemented. it is based on method 1 above with a* as its search algorithm. it uses the whole singapore road network  which has over 1 nodes and 1 road segments. out of this  about 1 nodes are major road junctions forming mrn. the number of grids formed is 1. 
 the system is implemented in c on a 1 pc. due to the space limitation  we are not able to describe the system in detail. interested reader  please refer to  liu and tay  1 . here  we concentrate on the evaluation of the proposed techniques. 
 we have implemented all the three methods. the second method was implemented by storing the grid sub-networks in the hard disk of our pc. so far  numerous tests have also been performed  using short  medium and long distance travels. the results from method 1  1 and 1 are compared with those obtained by using the full network  i.e.  without any grid  we call this method method 1 . both dijkstra algorithm and a* are employed as the search algorithms for comparison. 
 two sets of results are given below. one set uses travel distance as the cost function  and the other uses travel time as the cost function. each algorithm solves 1 problems for every distance category using the same randomly generated sources and destinations. the running time  in second  is the sum of times in solving the 1 problems. travel distance  in meter  and travel time  in minute  are the sum of distances and the sum of times of the 1 


improves the performance by 1 times. as expected  method 1 outperforms method 1 significantly as method 1 needs to test each node along the search. 
 regarding the travel distance  method 1 and 1 produce routes around 1% longer than the optimal routes. although method 1 is only able to handle simple shortcuts  it produces routes that are very close to the optimal solutions. 
 when using  ravel time as the cost function  see the table below   the running time comparison of various methods still apply. for the travel time  method 1 and 1 also produce routes that take around 1% more lime than the optimal routes. again  method 1 produces routes that are very close to the optimal solutions. 

 for all our tests  we did not consider the waiting time  starting and slowing down time at traffic lights. when these are considered  we believe all the methods will be able to produce results that are much closer to the optimal solutions because the new methods travel mostly on major roads and expressways  which have less or no traffic lights. 
 the running time performance of the second method cannot be compared with the other two in both cases since disk accesses are involved in loading in sub-networks. however  it is more efficient than method 1 for medium and long distance travels. it can also be noted that the running times for different distance categories are not that different. this is because the disk access dominates the computation in this method. it is also seen that running time for long distance travels is slightly shorter than for short distance travels. this is because for short distance travels many grids could be in the city centre areas  where a grid tends to have more minor roads in it than the outskirts of the city. for long distance travels  the grids are mainly in the outskirts of the city. 
 let us now discuss in what situations each of these three methods should be applied. 
  the first method and the third method can be used in situations where the whole network can be loaded into the system. method 1 is much easier to implement and also produces routes that are very close to optimal solutions  although it is not as efficient as method 1 . it may be used in the situations where its performance is acceptable. the first method is more difficult to implement because of its complex network representation and linking up operations. however  it is much more efficient than method 1. both these two methods do not save any memory space. 
  the second method should be used in situations where storing the whole network in the system is not possible. for a 1 pc with 1mb of ram  the largest network that can be used is 1 nodes and 1 arcs without road names loaded in. if we have the road network of a state or a country and still use a small machine such as a pc or an even smaller specific system  a large part of the road network  or the whole network  has to be stored in a 
hard disk or a cd rom. in these cases  our approach of partitioning  reorganizing and storing the road network as many pieces becomes valuable as it allows minimal data to be retrieved for route finding. 
1. related work 
shortest path problem has been studied extensively in network theory over the past three decades. many efficient algorithms have been produced  e.g.  dial et a/.  1; gallo  and pallotuno  1; pearl  1 . however  limited research has been done in adapting these algorithms for route finding purposes. in ai  a number of studies have also been made. their emphasis has been on using topographic and geographic knowledge and reasoning to solve the problem  kuipers  1; levitt  and lawton  1; mcdermott and davis  1; goel et al  1 . the major concerns in ai are spatial knowledge representation and reasoning  rather than efficiency and optimization. 
  shapiro et a/.  1   which is the latest work we could find in network theory and its applications  propose a technique to use level structure of the road network to help searching for a path efficiently. applying their technique to our problem  it will be like this. assuming the source and the destination are both on some minor roads. the algorithm will first search for the nearest entry point u to and the departure point v from mrn from the source and the destination respectively. after that  it uses dijkstra algorithm to search only the major roads to find a path linking u and v. this technique indeed minimizes the time traveling on minor roads and also greatly reduces the search. however  the problem is that the two nodes u and v connecting the source and the destination to mrn could be on the wrong major roads. then  the path found would be quite far from the shortest path. this technique is particularly not good for short and medium distance travels. our approach solves this problem by using grid subnetworks. this means there will be no problem of landing on the wrong major roads because all the major roads surrounding the source or the destination are considered. 
 our approach also offers a way to partition the whole network into small sub-networks that can be stored separately. this will be important for large networks. 
 the work reported in this paper is a continuation of our earlier r-finder system  liu et a/.  1   which uses 
	liu 	1 

dijkstra algorithm  knowledge-based technique and casebased reasoning for route finding. kb-rfinder has made many improvements over r-finder. the most important improvement is on the grid formation. in r-finder grids are assigned at run time for each problem  rather than formed statically for each node as in kb-rfinder. 
 each grid used in r-finder is a rectangle that encloses a small area of the network. figure 1 actually shows such an example. the sizes of the grids around the source and the destination are decided according to the density of the road network at their respective locations. for a dense part of the road network  the grid is smaller and for a sparse part of the network  the grid is bigger. the major grid  see also figure 1  is determined according to the major roads between the source and the destination. this approach has a number of problems: 
  the network knowledge used only provides qualitative information. there is no quantitative guideline. it is still difficult to decide precisely how big a grid should be and where the grid should be. 
  it can also be seen that this approach requires a great deal of network and geographical knowledge. then  knowledge representation presents a difficult problem. 
  the system built with this method may be useful only in a particular place due to the heavy use of local network knowledge. it is useless in another place as the road network of the place will be completely different. 
 it is these difficult issues that have prompted us to seek a better solution. in kb-rfinder  all the above problems with the dynamically assignment of grids are eliminated. 
  firstly  in static formation of grid sub-networks  there is no such problem of deciding the shape and the size of each grid. a gird is simply a sub-network. 
  secondly  there is no need to acquire a large amount of network knowledge and to have a complicated knowledge representation. although static formation of grids also requires various types of knowledge  as we can see they are very simple. 
  thirdly  this technique can be easily applied to build systems in other places since the types of knowledge used are generic to most modern road networks. 
 the performance of kb-rfinder is also much better than r-finder. r-finder typically uses half of the time taken by a pure dijkstra algorithm without any grids  while kbrfinder uses only around one eigtoh of the time. 
1. conclusion 
this paper presented a novel and yet simple approach and three specific methods for practical route finding. they exploits two key kinds of knowledge about a road network  namely  road types and the fact that major roads naturally partition the whole network into many small sub-networks. these kinds of knowledge help to reduce the computation time and space required for route finding considerably. they also guarantees human oriented solutions. 
 the proposed approach and its specific methods are general as the types of knowledge they use are very simple and generic to different road networks. they can be readily applied to build route finding systems in other places. 
1 	action and perception 
acknowledgments: i would like to thank land system 
support unit  ministry of law  republic of singapore for providing singapore road network data. without it  this project would be impossible. i would also like to thank jimmy tay  hui-peng goh  mary heng  and sook-ming hong for implementing various parts of the system. 
