 
qualitative and quantitative representations of space in general and motion in particular have their typical fields of application which are unified in an autonomously moving robot interacting with human beings. therefore it is necessary to make some considerations on both approaches when dealing with such a robot. this paper presents quantitative and qualitative representations of locomotion and algorithms to deal with them. this work was applied to the navigation of a semi-autonomous wheelchair along routes in networks of corridors. 
1 	introduction 
qualitative and numeric representations have both their pros and cons and most of them apply to the field of motion representation  too. since qualitative representations  qr  are coarse  they focus on the items where the representanda differ  what leads to very compact descriptions. furthermore  a qr can reflect and compensate vague data better than a quantitative one  which often computes at an unnecessary level of accuracy. last  qualitative representations are good where human-machineinteraction takes place. humans think mostly in qualitative categories like left/right and close/far  see e.g.  tversky  1    and not numeric ones like 1¡ã and 1 cm  and therefore it is better to make the computer understand these categories than to force the human to communicate in an unnatural manner. 
¡¡on the other hand  numeric representations are more precise and often easier to handle by a machine. therefore  in an autonomously moving robot which has to understand user commands like the bremen autonomous wheelchair  both numeric and qualitative representations of motion data should be available. 
¡¡the bremen autonomous wheelchair supports persons with severe impairments  e.g. blind people  in driving through their apartment or through the office building at their place of work. among other applications  one level of support of the assistive system is the autonomous driving along pre-taught routes  i.e. a simple form of navigation. navigation requires a representation of the environment  i.e. spatial knowledge. an information that can easily be acquired is the motion data of the wheelchair. these motion tracks can be simplified  generalized   and can either be represented in a numeric or qualitative way. 
¡¡so  this paper deals with both numeric and qualitative representations of motion data. first  the navigation approach is presented that is based on the generalization of motion tracks. then  qualitative representations of locomotion are discussed that will be the basis for the human interface of the wheelchair in future. 
1 	locomotion in robot navigation 
wheelchairs are normally installed by a salesperson of a medical shop or a wheelchair mechanic. as maps including all furniture  etc. arc too complex to be acquired by the service persons  the idea of ''teaching  was selected as an appropriate method to impart the spatial knowledge required for navigation to the autonomous system. as was described by krieg-bruckner et al.   routes can be represented as sequences of basic behaviors and so-called routemarks that trigger the switching between the behaviors. these combinations should be learned during teaching drives one for each route-when the wheelchair is delivered. after that  the wheelchair is able to travel the routes autonomously. krieg-bruckner et al used a camera to detect artificial routemarks. however  this approach had two drawbacks: on the one hand  the environment has to be prepared to use this method  and on the other hand  the wheelchair has to be equipped with a camera on a turntable  which is an expensive solution. therefore  a more costeffective approach has been chosen to find points of reference along the routes that only uses the sensory equipment that is already required for the basic functionality of the wheelchair  e. g. for collision avoidance: the analysis of the wheelchair's course of motion when performing distance-driven basic behaviors. 
1 	the bremen autonomous wheelchair 
the basis for the bremen autonomous wheelchair  rolland  is a commercial power wheelchair manufactured by the german company meyra  cf. figure 1 . it is a nonholonomic vehicle that is driven by its front wheels and 
musto  stein  eisenkolb  and rofer 	1 
steered by its back wheels. it is equipped with 1 polaroid sonar sensors mounted around the system and a pc placed behind the seat. in addition  the wheelchair is able to measure its actual speed and steering radius. thus it can perforin dead reckoning. 

figure 1: the bremen autonomous wheelchair and three motion tracks with their generalizations 
1 	motion tracks of a mobile system 
the basic idea of the route navigation approach presented here is the following: when the wheelchair drives using basic behaviors such as wall-following  its movements reflect the structure of the environment. the dead reckoning system of the wheelchair can record these movements. the resulting motion tracks can be employed to generate representations of the routes the system has followed. if the system drives along a route a second time  its dead reckoning system will produce a 
very similar track. in order to be able to use such representations for navigation  a method has to be found to match different tracks to perforin  e. g.  a self-localization along the route. 
¡¡in comparison to methods that try to generate maplike representations of the environment  e.g.  with the help of distance sensors  the major advantage of motion tracks is their continuity. this is a result of the continuous motion of the wheelchair. the noise in the sensor readings is considerably reduced by the inertia of the mobile system because the distance measurements of the sensors influence the route representation only indirectly via the basic behaviors. 
1 	navigation approach 
in the navigation approach presented here  the wheelchair is controlled along a route by switching between the basic behaviors wall-following  i.e. following the left or right wall while driving either in forward or backward direction  corridor-following  forwards/backwards   turning-into-door  left/right door   and stop. the system records its dead reckoning positions as well as the changes of the behaviors. as the 
1 	qualitative reasoning and diagnosis 
odometry data can consist of many measurements  it is generalized to generate a compact representation of the route that is stored. this information is used as a reference for autonomous drives along this route. based on the assumption that navigation in buildings is essentially a combination of following corridors and turning at corners  a representation has been chosen in which routes consist of straight lines that cross under certain angles. therefore  a route description is a sequence of distances and angles  e.g.  1 cm  1¡ã  1 cm  -1¡ã  1 cm . 
¡¡in an autonomous replay  the dead reckoning data is recorded  too. it is generalized the same way as during the teaching drive  and then the two representations are matched. the description stored always represents the complete route whereas the current motion track only stands for the part of the route traveled so far. therefore  the current description can only be matched to the beginning of the stored one. the segment in the stored representation that is matched with the last segment of the current track is the current segment together with the length of the last segment in the current track  i. e. the distance to the last corner  this defines the wheelchair's current position with respect to the reference representation. this position can be used to switch between the basic behaviors at appropriate locations  and thus enables the system to repeat the route stored. 
by the way  this approach allows a second application: 
during the matching of the two generalizations  it can be determined whether they represent the same route or not. thus it can be noticed when the wheelchair has lost its way  because  e.g.  a behavior was performed erroneously. this is depicted in figure 1 that shows three route descriptions: the first one was learned  cf. figure 1 i   the second is a correct repetition of the first one  cf. figure 1 ii   and the third is an erroneous replay  cf. figure 1 iii . in case of the latter  the mistake was detected shortly after the erroneous behavior occurred  i.e. the wheelchair missed a door because it was closed. 
1 	incremental numeric generalization 
to fulfill the requirements of the navigation task  a method was developed to generalize the numeric motion data incrementally  i. e. on the fly when the autonomous system drives. as we shall see later  this incremental generalization is also useful for the generation of qualitative route descriptions. 
¡¡¡¡the basic idea of generalizing a given track t is to find a simpler track u representing the general shape of t - i. e. the important global information and suppressing small zigzags and deviations. a simple approach to generalize t is to create a polygon track u differing less than a distance e from t requirement . in case of the wheelchair application  is not a predefined constant  because the generalization is used to unveil the structure of the environment. therefore  each segment in the generalization should correspond to a corridor in reality. the wheelchair's freedom of movement is limited by the walls of the corridors it is following. therefore  it is 

reasonable to use the widths of the passages the system is traveling as  the widths of the corridors are determined robustly by preprocessing the sonar measurement with a histogram approach. 

figure 1: steps during generalization 
¡¡an incremental algorithm based on this idea is illustrated in figure 1: starting from a  the algorithm follows the polygon track  tries to build a straight line segment from the actual starting point to the current point and tests whether each point between the starting point and the current point is within the -surrounding of the generalized line segment. in figure 1 ii  the distance of the points b and c to  ad  is tested to be less than . so  the line  ad  qualifies as generalization of the polygon track between a and d  and the algorithm tries to proceed by taking the next point e as new end point for the generalized line segment. in this case  the point d is outside the e-surrounding of the generalized line segment  cf. figure 1 iii . now the algorithm tests whether there could be a further reference line closer to this point when the polygon track proceeds. this is the case with line  af . the algorithm only takes a point as an endpoint of a generalized line segment when no further reference line could fulfill the e requirement  or if the input stream is closed. then the last  correct reference line segment is taken and its endpoint is used as the end of the first part of the generalized track  and simultaneously this point is the start for the next iteration. 

figure 1: efficient checking of the e-requirement 
¡¡figure 1 visualizes the algorithm that tests whether the construction of a further reference line fulfilling the e-requirement is possible: the first end point of the reference line segment is the starting point s and the line can rotate around this point. any point further than away from s limits the angle of rotation for any longer reference line segment starting with s: for example  since s and l are not farther than € away from each other  any reference line would fulfill the requirement. the addition of point n to the track limits the possible directions of rotation: the line could not go backwards from s  since s and n are farther than  away from each other. 
¡¡¡¡continuing with the example  in figure 1 ii  p prevents any further rotation of the reference line shown to the left  in figure 1 iii q prevents a rotation to the right. therefore  for any point in it is impossible to find a reference line are easy to compute . 
the general algorithm works as follows: 
starting with 	any new point  is tested: 
1. it is either in the end of a segment has been passed. the last line fulfilling the -requirement is the generalization of the first 
1. 
¡¡however  although the resulting partitioning satisfies the -requirement  it seems rather random for the robot navigation tasks  since it does not take the environment into account.  is only an arbitrary point behind the corner at the end of the segment  and its selection is influenced by the fine structure of the movements in the segment. instead  the corner is a stable feature  and therefore it has been chosen as end point for segments. the basic idea for determining the position of the corner is that two successive line segments build two sides of a triangle. seen from both end positions of the two sides  the sum of the lengths of both sides should be maximal at the corner. however  this approach only works robustly if both sides of the triangle have approximately the same length. therefore  the second segment is lengthened by the distance between  and  towards the direction of movement at . as a result  the corner is determined and serves as end point of the first segment as well as starting point of the second one. 
¡¡the resulting  smooth motion track is a polygon track consisting only of the segments . an implicit assumption in the navigation approach presented in section 1 is that similar motion tracks are generalized to similar route representations. however  there are two cases in which this conjecture is violated by the approach presented: 
1. if there are long parts with a slight curvature in a motion track  either because a corridor has this shape  or more likely-because of odometry drift  its generalization may be arbitrary. small variations in the wheelchair's course may generate very different segments. however  the angles between such arbitrarily separated segments arc always small. 
1. if a corridor's width is similar to its length  it may be generalized to a separate segment in one track  cf. 
	musto  stein  eisenkolb  and roper 	1 

figure 1 i  and integrated into an adjacent segment in another track  cf. figure 1 ii . 

figure 1: two motion tracks and their generalizations 
¡¡whereas the first problem could be handled during generalization process by combining neighboring segments connected with small angles  the second problem cannot be eliminated during the generalization. therefore  both problems are only just taken into account during the matching process that can deal with both of them. 
1 	matching generalized motion tracks 
two generalized tracks are matched by running through both of them segment by segment. on the one hand  this allows to determine corresponding segments  on the other hand  it can be checked whether both tracks describe the same route. to perform the latter  the segments of the tracks as well as the angles between them are compared. if they are not similar enough  the tracks are incompatible  and therefore it is assumed that they do not describe the same route  i.e.  the wheelchair has moved along a different trajectory. 
¡¡as has been discussed in section 1  the current track will normally be shorter than the reference track. therefore  the matching of the two tracks is not a symmetric process because one of the two route representations is allowed to be shorter than the other one. hence  the matching function tests whether the current track is less or equal than the reference track  and if this is the case  it determines the position in the reference track where the current track ends  i.e. it calculates the corresponding segment in the reference track and uses the length of the last segment in the current track as metrical offset from the beginning of the segment. 
¡¡for each pair of segments from both tracks  it is first checked whether their lengths are similar. they are assumed to be compatible if their difference is not greater than the sum of the four following values1: 
  the width of the previous segment if the current segment is not the first one. 
  the width of the successive segment if the current segment is not the last one. 
  a base tolerance that should be larger than the dis-tance between two neighboring positions in the original tracks. in the work presented here  it was set to 1 cm. 
¡¡¡¡1 the only exception is the last segment of the current motion track that is allowed to be arbitrarily short because it was not recorded completely so far. 
1 	qualitative reasoning and diagnosis 
  a factor that models odometry errors depending on the distance traveled. the wheelchair's odometry is quite reliable in measuring lengths of straight lines. so  the tolerance can be small  i.e. 1%. 
¡¡if the difference is larger  the tracks seem to be incompatible. however  as has been discussed in the previous section  it is possible that the segment in the current track is too long because it is the counterpart for two segments in the reference track. therefore if either the current segment in the reference track or its successor is short  or the angle between both segments is small  the two segments are joined and the matching is retried. the opposite case is given if the actual segment in the current track is significantly shorter than the one in the reference track  and it is not the last segment. then  it is tried to overcome the mismatch by joining two adjacent segments in the current track. if they cannot be 
joined because the segments are too long or the last segment in the reference track has been reached but there are still further segments in the current track  the two representations are assumed to be incompatible. otherwise  if the actual segment in the current track is the last one  the matching was successful  and the corresponding segment in the reference track has been found. together with the length of the last segment in the current motion track  this can be used as one-dimensional self-localization along the route  and thus it can trigger the activation of the basic behaviors. 
¡¡if the last segment in the current motion track has not been reached  the angles are compared. this comparison is performed in a qualitative way because the angles may differ heavily if  e.g.  parts of the route are generalized with a different number of segments. the angles are mapped to the four qualitative categories  left    right    forwards   and  backwards  that describe overlapping angular ranges. two angles are assumed to be compatible if they both share at least one qualitative category. 

1 	qualitative representation of locomotion 
as shown in  musto et a/.  1   the computations described before also work on a qualitative representation. however  because the basic data delivered by the wheelchair is numeric  computation is kept numeric and the main purpose of the qualitative representation here is human computer interaction. the logged locomotion data can be used to generate a qualitative representation of the course of motion that can be used for natural language output  e.g. to give a blind person some feedback on what the wheelchair is doing to reassure him that he is still on the right way  or to help him to anticipate coming actions of the wheelchair. this sort of feedback can consist in directional information   going 

to the left instead of forward is o.k. here because of obstacle avoidance    in distance information   this route segment is very long    or in velocity information   driving this route segment so fast is ok  since there is plenty of space  . to give such a feedback  qualitative representations of the logged reference track and the actual track are neceessary. 
¡¡since qualitative computation is possible  the wheelchair is able to deal with this qualitative data as input  too. the considerations on the qualitative representation can therefore serve as basis for a natural language input  e. g. to allow intervention of a user who is able to anticipate a possible error of the wheelchair in order to avoid it. 
1 	motion representation through 
qualitative distances and directions 
as we have pointed out above  for our task it suffices to represent only distance and direction of a motion event. to this end we use qualitative categories like  left    right    far    close   etc. then  a course of motion can be represented by a sequence of qualitative motion vectors  qmvs   i.e. vectors that describe the motion of an object from position n - 1  measured at measurement point n - 1  to position n  measured at measurement point n  where the vector components are some qualitative descriptions of  e. g.  direction  distance  and speed of the object when moving from point n - 1 to point n. assuming a fixed scan rate  speed can simply be computed from the distance covered in one scan cycle. 

figure 1: a discretization of the distance domain 
¡¡to represent a course of motion through qualitative directions and distances  we have to discretize space somehow into areas to which these categories apply. figures 1 and 1 are examples of possible discretizations. 

figure 1: two discretizations of the direction domain 
1 qmvs in egocentric and allocentric frames of reference 
when measuring locomotion we have to distinguish between two cases: do we have some external system of coordinates to measure our motion data  e.g. in a gps track   or not  e.g. when using odometry data in robotics   in the first case  we measure the data in an allocentric frame of reference  for   in the second case we determine it in an egocentric one. 
¡¡in an allocentric for in measurement  the approach by musto et al  works out. there  a course of motion is measured with a fixed scan rate and mapped into qualitative intervals in each scan cycle. space is discretized in the domain of distance and direction like in figures 1 and 1 i  following the suggestions of clementini et al. . so  a course of motion is represented as 
sequence of qualitative motion vectors  e. g. 

¡¡the indices indicate the number of scan cycles without a change in distance and direction. 
¡¡if the course of motion is measured in an allocentric for like here  switches between allocentric and egocentric for in the domain of direction are possible without a loss of information. a representation in the egocentric for of the qmv sequence above reads: 

¡¡unfortunately  in the domain of locomotion this approach isn't suitable: since there is no external  fixed  and relatively unchanging for when measuring locomotion  the direction gridlock has to be realigned in each scan cycle  depending on the new intrinsic orientation of the person or robot moving. therefore  small changes in the direction in each scan cycle might be never noticed  but may accumulate to a rather big change in many scan cycles  cf. figure 1 . the only directional changes noticed would be very sharp ones in a single scan cycle. this leads to the dissatisfactory situation that the representation of the spatial path of a course of motion at a given scan rate depends greatly on the speed of the moving object. 
¡¡the reverse paradigm does better in this context: measuring changes in direction not in every scan cycle  but only after a certain distance was covered  makes sure that the resulting representation does not depend on the speed of the motion. 
¡¡¡¡then  following musto et a/.   we can represent locomotion as a sequence of ;  measured and represented in the egocentric for. an consists of the components direction d  e.g. {forward  backward  left  right}  and number of time cycles t needed to cover the fixed distance. a counter indicates 
	musto  stein  eisenkolb  and rofer 	1 


1 	discussion 
as we could see from the considerations above  mapping distance and direction directly into qualitative intervals in each scan- or measurement cycle maybe necessary for some applications like giving immediate feedback on the robot's actions  but has the disadvantage that much information is lost  and it is error-prone  e. g. if the measurement cycle is not well-chosen. 
¡¡therefore we should use the incremental generalization algorithm as presented in section 1 whenever possible to smooth away irrelevant deviations. the resulting numeric representation can easily be converted into a qualitative one by mapping the remaining changes in direction and speed into qualitative intervals after each segment has been generalized. this can also be done with the recorded reference track that can be used in combination with the actual track to give the user anticipation information. 
¡¡the qmv representation gives qualitative information about direction  distance  and speed of the motion performed  and so has all relevant motion data handy in a form that is well understandable for humans. 
¡¡1 since we measure after a fixed distance  t is equivalent to speed: the larger the number  the slower the robot is moving. 
¡¡1 the representation is equivalent to the one we get from the allocentric measurement and the conversion into the egocentric for if we also express speed qualitatively. 
1 	qualitative reasoning and diagnosis 
¡¡however  the qualitative representation can not only be used for user interaction  but also reflects the structure of the environment. since comers and turns in the spatial path are not only landmarks  but also define spatial relations between other landmarks like doors or corridors crossing  this information can be incorporated into a weakly constrained net of landmarks and spatial relations between them  where constraints can be propagated and used to build up a route map. 
1 conclusion and outlook 
this paper has presented quantitative and qualitative representations of locomotion in the robotics context. the work was applied to the problem of navigation along routes in networks of corridors. tests with routes longer than 1 m proved that the generalization of motion data is an appropriate means to unveil the structure of the environment the data was recorded in. thus  it is an easy but reliable technique for navigation. the considerations on the qualitative representations will be the basis for the human interface of the wheelchair in future. 
¡¡furthermore  a method that automatically combines representations of different routes to a topological network  the so-called route map  will be developed. this will ease acquiring the spatial knowledge to freely navigate in complete buildings. 
