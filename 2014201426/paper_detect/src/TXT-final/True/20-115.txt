 
     the blackboard architecture is a powerful expert systems a r c h i t e c t u r e . i t s main advantages are f l e x i b i l i t y of control and i n t e g r a t i o n of d i f ferent kinds of knowledge representations and i n ferencing techniques. at our laboratories we b u i l t a blackboard s h e l l   based on the p r i n c i p l e s as developed in the system hearsay-il and the blackboard shells hearsay-ill and bb1. this paper describes how we modify t h i s blackboard s h e l l   in order to use it for the control of a robot c e l l . this c e l l consists of a number of independent devi c e s   which w i l l have to execute their tasks conc u r r e n t l y . this means a modification of the blackboard s h e l l towards p a r a l l e l i s m . ve see great p o s s i b i l i t i e s for using our system not only for simulating robot c e l l configurations and prot o t y p i n g f l e x i b l e control of robot c e l l s   but also for other systems with m u l t i p l e processors. 
	i 	introduction 
     this paper treats an engineering topic which involves two d i f f e r e n t subfields of a r t i f i c i a l i n t e l l i g e n c e  expert systems and r o b o t i c s   . ve chose to use an expert system with a blackboard a r c h i t e c t u r e for the c o n t r o l of a robot c e l l . 
     before we describe t h i s 	a p p l i c a t i o n 	we 	w i l l give an i n t r o d u c t i o n to robot c e l l s and the blackboard a r c h i t e c t u r e . 
a. 	robot cells 
     a robot seldom executes i t s tasks independently of i t s environment. usually the environment of a robot consists of a number of d i f f e r e n t devices which cooperate to perform a given task. these devices could include  among others  v i s u a l and t a c t i l e sensors  separate processors for executing computational tasks  operators which import obj e c t s i n t o or export them out of the environment  and the a c t u a l robot arm and gripper. the environment of a robot even could include other robots. the robot together with a l l the devices which cooperate in the environment to perform the given task are called a robot c e l l . it is obvious that a robot c e l l l i k e t h i s requires a supervisor to c o n t r o l the correct i n t e r a c t i o n of a l l the components of the robot c e l l . for a description of a robot c e l l see e . g .  kak  boyer  chen  safranek and yang 1 . 
     at this moment research in the area of robotics forms a major topic at our laboratories of the netherlands ptt. part of the research is done by developing a robot c e l l to test the t h e o r e t i c a l findings in a p r a c t i c a l s e t t i n g . this c e l l needs a supervisor with the following features: 
1. the supervisor has to be able to deal with m u l t i p l e components with d i f f e r e n t f u n c t i o n a l i t i e s and d i f f e r e n t representations 
	of 	these f u n c t i o n a l i t i e s . 
1. the supervisor has to be able to determine which component should perform which task at a c e r t a i n moment  according to the current s i t u a t i o n of the robot c e l l and the task at hand. this also includes the detection and handling of errors. 
1. the way the supervisor reacts to c e r t a i n s i t u a t i o n s in the robot c e l l must be easily modifiable in order to experiment with d i f f e r e n t methods of executing certain tasks. 
1. it must be possible to add  remove  and exchange components without changing the supervisor. 
1. it is necessary that multiple components can be executing concurrently. 
b. 	blackboard architecture 
     of the f i v e features  which were mentioned above and which are needed for the supervisor of our robot c e l l   the f i r s t four are provided by the blackboard a r c h i t e c t u r e . we b u i l t a blackboard s h e l l   l i p p o l t   velthuijsen and vonk 1  with these features  using a r t i c l e s about the system bb1 as our main guideline. the matter of p a r a l l e l i s m remained to be examined. an attempt to i n troduce p a r a l l e l i s m to the hearsay-ii system is described in  fennell and lesser 1 .  ensor and gabbe 1  also describes how the blackboard can be modified to support p a r a l l e l i s m . as these a r t i c l e s l i m i t themselves to discussing modifications of the blackboard  we intend to focus on the requirements for the control u n i t   although the modifications of the blackboard w i l l also be i n cluded. 
     for information about the blackboard a r c h i t e c ture we can recommend the following a r t i c l e s :  er-
man  	hayes-roth  	lesser 	and 	reddy 	1  	on 
hearsay-ii   erman  london and fickas 1  on h e a r s a y - i l l   and  hayes-roth 1  on bb1. 
	velthuijsen  lippolt  and vonk 	1 
     
	ii 	proposed modifications 
     when implementing a blackboard system with sequential execution of knowledge sources  kss   the f o l l o w i n g implementation of a succession of 
actions can be used  as we did in our i n i t i a l blackboard s h e l l . 
     during the execution of a ks  every change of the blackboard r e s u l t s in the creation of a spec i a l formatted data object  called an event  which records the change. after the execution of a ks  the c o n t r o l u n i t checks for a l l kss whether they are interested in the occurrence of one of these events  or any combination of events. if there is a match  another data object is created which records the information s i g n i f i c a n t to t h i s ks and t h i s p a r t i c u l a r combination of events. in the l i t e r a t u r e t h i s is called a knowledge source act i v a t i o n record  ksar . at this stage t h i s ksar is c a l l e d t r i g g e r e d . next for a l l triggered ksars the precondition is checked which is mentioned in t h e i r respective ks d e s c r i p t o r s . this is a procedure which can be used to test whether this ksar r e a l l y is applicable in the current s i t u a t i o n of the problem solving process. this provides a more sophisticated way of checking the a p p l i c a b i l i t y of a ks then when one would be r e s t r i c t e d to using t r i g g e r s . also t h i s precondition can be used to a c t u a l i s e the values of the parameters which are needed by the ks. if the test has a confirming r e s u l t   the ksar becomes what we w i l l c a l l invocab l e . then for a l l invocable ksars t h e i r p r i o r i t y is determined and the one with the highest p r i o r i ty is selected and executed. this ends the cont r o l c y c l e . 
     our blackboard s h e l l was b u i l t according to t h i s d e s c r i p t i o n . as i t s main features it f u r t h e r 
supports the use of a blackboard for c o n t r o l purposes and an unlimited number of blackboards for domain knowledge   t h i s is done to f a c i l i t a t e the s t r u c t u r i n g of the domain knowledge  and the use of m u l t i p l e knowledge representation methods for the action parts of the kss  these include the languages lisp  prolog  and pop-1 and it is also possible to make use of rule based  frame based  and object oriented inferencing techniques . a blackboard is subdivided i n t o blackboard levels and the levels are subdivided i n t o u n i t s which are sets of a t t r i b u t e value p a i r s . in order to help the knowledge engineer in the task of b u i l d i n g a system  our blackboard system is equipped with a 
wide v a r i e t y of   o p t i o n a l   trace f a c i l i t i e s . at one moment during the control cycle it is possible to examine a l l relevant data  such as the contents of the blackboard s   the events which occurred during the l a t e s t execution of a ks  the triggered and invocable ksars  and the chosen ksar. 
     an a r c h i t e c t u r e as described here 	works 	f i n e if 	a l l 	kss are to be executed s e q u e n t i a l l y . 	but i t 	i s evident 	that 	i t 	i s not s u f f i c i e n t 	i f 	m u l t i ple processors are a v a i l a b l e for concurrent execut i o n of kss. 	we 	can d i s t i n g u i s h 	three 	main 	aspects where t h i s a r c h i t e c t u r e has been modified to accommodate p a r a l l e l ks execution. 
     f i r s t   the c o n t r o l u n i t has to be able to select a s u i t a b l e ks for execution any time a pro-
1 	robotics 
cessor gives a signal that it has finished i t s l a s t task. in the a r c h i t e c t u r e as described earl i e r   t h i s is not possible because the control u n i t is not an available process when a ks is being executed. second  the blackboard handler has to be able to service requests for reading or w r i t i n g on the blackboard which a r r i v e at the same time. moreover  the requests of one ks can i n t e r fere with the requests of another ks and  if t h i s is not handled properly  the consistency of the 
data on the blackboard can be v i o l a t e d when i n dependent kss work on the same information on the blackboard. t h i r d   an environment must be created which makes it possible to execute m u l t i p l e processes concurrently. we w i l l describe these aspects in more d e t a i l . 
a.
	 	a monitoring scheduling mechanism 
     the main modification of the control u n i t   necessary for p a r a l l e l ks execution  is to delegate the execution of the kss from the control u n i t to the processors. 
     if a processor has terminated a task  it sends a message to the control unit that it is free to accept another task. for a l l processors these messages a r r i v e in a single l i s t . the control u n i t updates the sets of triggered and invocable ksars  using the events  which occurred since the l a s t updating took place  and the current state of the blackboard. next the control unit checks which invocable ksars can be executed by the free processors. for these ksars a p r i o r i t y is computed  the most promising is selected for exec u t i o n   and a command is sent to an applicable processor to execute the chosen ksar. after this command  the control unit does not wait for the termination of the ksar execution  but immediately continues with the selection of a task for the next i d l e processor. if no invocable ksar was found for these processors  the o r i g i n a l message is put back in the l i s t . 
     one can imagine a s i t u a t i o n where kss can be executed on d i f f e r e n t processors  but that there i s   possibly  a preference for one processor depending on the necessary processing capacity. our system is equipped for t h i s . 
b. the blackboard handler 
     although the matter of modifying the blackboard handler in order to be able to cope with concurrent access to data on the blackboard has been treated extensively in  fennell and lesser 1  and  ensor and gabbe 1   we think it is useful to summarise the various possible a d j u s t ments. 
     we implemented the blackboard handler as a process with a l i s t   i n order to handle d i f f e r e n t p r i o r i t i e s   of requests for reading  w r i t i n g   or modifying u n i t s on the blackboard. this way the incoming requests can be sequentialised. for maintaining the consistency of the data on the blackboard a few suggestions are found in the l i t e r a t u r e . 
1. a ks 	could 	ask 	the 	blackboard 	handler 	to 
     
forbid any other ks to read or write those units which that ks is possibly going to use. such locks could be restricted to only one unit  but could as well be extended over entire levels and even blackboards. 
1. a ks could add a tag to units which it is going to use. whenever other kss make changes to a tagged unit a message is sent to the ks 
which placed the tag. 
1. vhen a ks wants to make changes to the blackboard the ks could check  after the relevant sections are locked for reading  whether the information on the blackboard coincides with the assumptions about the contents of the blackboard  made by this ks. if the assumptions are s t i l l valid  a request for a write lock is made for those sections of the blackboard which are to be changed and then the blackboard can be changed. if the assumptions are no longer valid  the attempt to change the blackboard is cancelled. 
     the f i r s t solution has one main disadvantage. often it is not possible to foretell exactly which blackboard units are going to be operated on. this means that in some cases the locks could become very extensive  thus blocking the execution of other kss. a disadvantage of the second option is the high cost in overhead. it seems that the third option is most promising. option 1 needs the f a c i l i t i e s as mentioned under 1  but in this case the locks are installed for a shorter period. also  in this case  the locks often don't need to be as extensive as under option 1. 
     it should be mentioned that in a lot of applications  as in ours  the interference between different kss can be kept low by only selecting kss for concurrent execution which operate on disjoint sections of the blackboard. in order to be able to use option 1 we implemented the f i r s t option. the knowledge engineer is recommended only to use option 1. 
c. 	concurrent process execution 
     to enable the blackboard system to execute kss concurrently  we divided the system over various processes. this means one process for the control unit  one process for the blackboard handler  and one process for each of the processors which are to be represented. for simulation we used a vax under the operating system unix* and execute the processes in timesharing. during the simulation stage the action parts of the kss often only consist of a procedure which modifies the blackboard in a fixed way after a certain amount of time. this means that using timesharing doesn't create a real limitation. vhen the system is being used for the actual control of a robot cell a similar set up w i l l be chosen. then on the controlling processor  the processes for executing the kss w i l l consist of gateways to the processors where the action parts of the kss are actually executed. 
*urix is a trademark of at&t bell laboratories. 
	i l l 	conclusions 
¡¡¡¡we described how we modified a blackboard shell  built along the descriptions of hearsay-ill and bb1  as found in the literature  in order to support parallel execution of kss. we showed why we think that a parallel blackboard shell is a useful tool for prototyping and simulation of robot cell control systems. we implemented this shell in a unix environment in order to simulate the execution of concurrent processes. a next step would be to implement a control system for actual robot cell control. although the blackboard architecture might not be efficient enough for real time robot cell control  we are convinced 
of its merits during the development stage of robot environments. 
