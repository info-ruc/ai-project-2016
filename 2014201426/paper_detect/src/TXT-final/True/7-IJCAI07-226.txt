
this paper characterizes the complexity of the core in coalitional games. there are different proposals for representing coalitional games in a compact way  where the worths of coalitions may be computed in polynomial time. in all those frameworks  it was shown that core non-emptiness is a co-nphard problem. however  for the most general of them  it was left as an open problem whether it belongs to co-np or it actually is an harder problem. we solve this open problem in a positive way; indeed  we are able to show that  for the case of transferable payoffs  the problem belongs to co-np for any compact representation of the game where the worths of coalitions may be computed in polynomial time  also  non-deterministic polynomial time   encompassing all previous proposals of this kind. this is proved by showing that games with empty cores have small infeasibility certificates. the picture is completed by looking at coalitional games with non-transferable payoffs. we propose a compact representation based on marginal contribution nets. also in this case  we are able to settle the precise complexity of core non-emptiness  which turns out to be -complete.
1 introduction
coalitional games model situations where groups of players can cooperate in order to obtain certain worths  and have been extensively used to study applicative scenarios in economics and social sciences  aumann and hart  1 . also  coalitional games are interesting in distributed ai  multi-agent systems and electronic commerce  ieong and shoham  1; conitzer and sandholm  1 .
모in coalitional games  a nonempty set of players joining together is called a coalition. the coalition including all the

모모  partially supported by icar-cnr within the research lab logica of the technology district for logistics funded by regione calabria and conducted by r&d.log consortium.  
모모partially supported by icar-cnr within the project knowledge technology and innovative services  ict.p1 .
 
모모partially supported by icar-cnr within the project high quality software  ict.p1 .players is called grand-coalition. the players know the worth that any coalition would get. a feasible solution for a coalitional game is an allowed way to assign worths  also payoffs  to all players. in the literature  a number of definitions of a feasible solution have been described. each of them propose some way to assign worths to single players. note that  in this formal context  the actions taken by players are not modeled. there are two basic types of coalitional games  osborne and rubinstein  1 : coalitional games with transferable payoffs  or tu games  and coalitional games with nontransferable payoffs  or ntu games . in the former type of games  players forming a coalition can obtain a certain amount of worth they can distribute among themselves. in the latter type  a coalition guarantees a specific set of consequences that assign to its players a set of possible payoffs.
모for both game types  a fundamental issue is distributing payoffs amongst participating players  which mirrors in several interesting applications  aumann and hart  1 . and  in fact  several ways of distributing utilities have been proposed  which are usually referred to as solution concepts  see  e.g.   aumann and hart  1  for a list of definitions . one solution concept is that of the core  which forces distributions that are  in a sense   stable   that is  no subsets of players improve their worths by leaving the grand-coalition. the core  which can be seen as an analogous of the nash equilibrium for coalitional games  osborne and rubinstein  1   is probably the most important solution concept defined for such games  see  e.g.   aumann  1  . therefore  it is a significant issue singling out those games featuring a nonempty core  that are  games where the worth distribution can be arranged in such a way that the grand-coalition is  stable . on the other hand  analyzing the computational complexity of solution concepts of games is an important class of problems for computer science  papadimitriou  1 .
모in order to represent and reason about coalitional games  a way to represent the associations of coalitions with their worths is needed: doing it explicitly is unfeasible  since listing all those associations would require exponential space in the number of players. in this sense  the literature proposes a numberof compact representation schemes of the worth function. for instance  papadimitriou and deng  1  consider tu games where players are encoded as nodes in an arcweighted graph  and the worth of a coalition s is computed as the sum of the weights of the arcs connecting players in s.
모a more general and more expressive representation for tu games has been recently proposed by ieong and shoham  1   where the encoding is done using marginal contribution nets  i.e.  finite sets of weighted rules  where the coalition worth is given by the sum of the weights of the logical rules triggered by its members. in both these settings  checking non-emptiness of the core was shown to be co-np-hard  whereas in the latter-more general-setting it was left as an open problem to settle its precise complexity.
모in dealing with this open question  this paper provides an answer to the rather more general question of establishing the complexity of checking core non-emptiness  in both the transferable and the non-transferable payoffs settings  for all those compact game representations satisfying the  quite weak  constraint that the associated worth function is computable in fnp  and  thus  as a special case  in polynomial time  as in the two above mentioned frameworks .
모note that our representation scheme encompasses all other compact schemes we are aware of but the one described in  conitzer and sandholm  1  for tu games  where computing the worth of a coalition is harder than fnp-the interested reader is referred to that paper for a thorough overview about compact representation schemes. note  moreover  that for some of such compact representation schemes  the complexity of checking core non-emptiness was already established  conitzer and sandholm  1; deng and papadimitriou  1   for instance  it is shown to be co-np-complete in the setting given in  deng and papadimitriou  1  .
모in order to prove our complexity results for tu games  we show that if the game core is empty  then there exists a small infeasibility certificate that proves it  thereby showing that for games of the quite general form we consider here  the problem of checking core non-emptiness is in co-np  note that this provides the answer to the problem left open in  ieong and shoham  1  . this is done by providing some results about the properties of polyhedra induced by games.
모furthermore  we consider ntu games  by defining a new compact game form  which is obtained by generalizing marginal contribution nets  ieong and shoham  1  to the non-transferable payoffs setting. for such games  we are able to show that checking core non-emptiness is -hard  and also that this problem can be solved in  even for general games of this form  thereby settling the -completeness of the problem in the non-transferable payoffs setting.
1 preliminaries
in this section we define our formal framework of reference.
1 transferable payoffs
games of interest in this paper are formally defined next.
definition 1. a coalitionalgame with transferable payoffs is a pair where
  n is the finite set of players;
  v is a function that associates with every coalition s a real number v s   the worth of
모an outcome for a coalitional game specifies payoffs for all players. a solution concept is a way to select  reasonable  outcomes for a coalitional game: the core is one of the best known  as it represents a stable solution  from which players have no incentive to deviate. let n = |n|. a profile x몬 for n is a vector of reals  몬x1 ... x몬n   which represents a possible way to assign payoffs to players. for a coalition of players s   n  define. then  x몬 is said a feasible payoff profile if x몬 n  = v n   that is  payoffs distributed among the players should be equal to the payoff available for the grand-coalition. the core is defined as follows:
definition 1. the core of a coalitional game with transferable payoffs is the set of all feasible payoff profiles x몬 such that  for all coalitions s   n  x몬 s  뫟 v s .
모it immediately follows from the definition above that the core is the set of all vectorsthat satisfy the following
1n inequalities:
 1 
 1 
where the last inequality  combined with its opposite in  1   enforces the feasibility of computed profiles.
1 non-transferable payoffs
in coalitional ntu games each coalition is associated to a set of possible outcomes or consequences:
definition 1. a coalitional game without transferable payoff is a four-tuple  where:
   n is a finite set of players;
   x is the set of all possible consequences;
   v: s 뫸 1x is a function that assigns  to any coalition s   n of players  a set of consequences v s    x;  is the set of all preference relations i on x 
for each player i 뫍 n.
모it is easy to see that coalitional games with transferable payoffs can be seen as special cases of coalitional games without transferable payoffs  osborne and rubinstein  1 . also  the definition of the core for those latter games is an extension of that given in definition 1:
definition 1. the core of the coalitional game without transferable payoffs is the set of all x몬 뫍 v n  such that there is no coalition s   n with a y몬 뫍 v s  such thatfor all i 뫍 s.
1 compact representations
we now discuss compact representation forms  beginning with marginal contribution nets  ieong and shoham  1 . rules in a marginal contribution net are in the form pattern 뫸 value
where a pattern is a conjunction that may include both positive and negative literals  with each literal denoting a player. a rule is said to apply to a coalition s if all the player literals occurring positively in the pattern are also in s and all the player literals occurring negatively in the pattern do not belong to s. when more than one rule applies to a coalition  the value for that coalition is given by the contributionof all those rules  i.e.  by the sum of their values. vice versa  if no rule applies to a given coalition  then the value for that coalition is set to zero by default. for example  with rules:
	a 뫇 b 뫸 1 	b 뫸 1 	a 뫇  b 뫸 1 
we obtain v {a}  = 1  the third rule applies   v {b}  = 1  the second rule applies   and v {a b}  = 1 + 1 = 1  both the first and the second rules apply . using this representation scheme  games can be much more succinct than the so called characteristic form  where all the 1n   1 values of the worth function should be explicitly listed. in any case  given such a game encoding g and any coalition s  the worth v s  can be computed in linear time  that is  in o ||g|| + ||s||   which is also o ||g||   where ||g|| denotes the size of g. as observed in  ieong and shoham  1   their representation scheme is fully expressive  in that it allows to represent any tu coalitional game  and there are games where it is exponentially more succinct than previous proposals  such as the multi-issue representation of  conitzer and sandholm  1 . for completeness  note that there are games where the size of any possible marginal nets encoding has almost the same size as the characteristic form.
모next  we are going to introduce a new and general compact representation scheme of coalitional games  a scheme where it is just required the worth function to be computablein fnp  that is  computable in polynomial time by a non-deterministic turing transducer  papadimitriou  1 .
모formally  let c be a class of games with transferable  resp.  non-transferable payoffs as defined by a certain given encoding scheme. define the worth  consequence  relation for c as the set of tuples
 resp.  . we say that
wc is polynomial-time computable if there is a positive integer k and a deterministic polynomial time transducer m that  given any game encoding g 뫍 c and a coalition s of players of g  outputs a value w  resp. all consequences w  such that  in at most steps.
모we say that wc is non-deterministically polynomial-time computable if there is a positive integer k such that wc is kbalanced and k-decidable  as defined below. a worth  consequence relation wc is k-balanced if  while it is said k-decidable if there is a non-deterministic turing machine that decides wc in at most time. it then follows that there is a non-deterministic turing transducer m that may compute in time the worth v s   resp. some consequence in v s   of any coalition s of players of g. indeed  m guesses such a value w and a witness y of the correctness of this value  note that wc 뫍 np   and then verifies in deterministic polynomial time that   possibly exploiting the witness y.
definition 1. let c r  be the class of all games encoded according to some compact representation r. we say that r is a  non-deterministic polynomial-timecompact representation if the worth relation for c r  is  non-deterministically  polynomial-time computable.
모for instance  the extension of the marginal nets framework to games with non-transferable payoffs  presented in section 1  is a non-deterministic polynomial-time compact representation  whereas both the above mentioned schemes of  deng and papadimitriou  1  and of  ieong and shoham  1  are polynomial time representations since  given a game g encoded either as a weighted graph  or as a marginal contribution net  and given any coalition s  the worth of s in g can be computed in polynomial time in the size of g and s.
모our membership proofs for the core non-emptiness problem will be given in the most general setting of non-deterministic polynomial-time compact representations.
1 separating polyhedra
because of  1  and  1   the core of a coalitional game with transferable payoffs and n players is a polyhedral set of n. in this section  we prove some nice properties of polyhedral sets that will be useful to deal with such games.
1 preliminaries on polyhedral sets
we next give some useful definitions and facts about polyhedral sets. we refer the interested reader to any book on this subject for further readings  see  e.g.   gru몮nbaum  1  .
모let n   1 be any natural number. a polyhedral set  or polyhedron   is the intersection of a finite set s of closed halfspaces of n. note that in this paper we always assume  unless otherwise stated  that n   1. we denote this polyhedron by pol s  and we denote s by half p .
recall that a hyperplane is a set of points {x 뫍
  where. the closed halfspace h+ is the set of points. we say that these points satisfy h+. we denote the points that do not satisfy this halfspace by h   i.e. 
   |a x   b}. note that h  is an open halfspace. we say that h determines h+ and h . define the opposite of h as the set of points  where
and. note that h몬+ = h  뫋 h  since it is the set of points.
모let p be a polyhedron and h a hyperplane. then  h cuts p if both h+ and h  contain points of p  and we say that h passes through p  if there is a non-empty touching set c = h 뫌p. furthermore  we say that h supports p  or that it is a supporting hyperplane for p  if h does not cut p  but passes through p  i.e.  it just touches p  as the only common points of h and p are those in their intersection c.
모moreover  we say that h+ is a supporting halfspace for p if h is a supporting hyperplane for p and p   h+. note that p   pol s  for any set of halfspaces s   half p   since the latter polyhedron is obtained from the intersection of a smaller set of halfspaces than p. we say that such a polyhedron is a supporting polyhedron for p.
모recall that  for any set  its dimension dim a  is the dimension of its affine hull. for instance  if a consists of two points  or it is a segment  its affine hull is a line and thus dim a  = 1. by definition  dim    =  1  while single points have dimension 1.

figure 1: construction of an infeasibility certificate for the core.모a set f   p is a face of p if either f =    or f = p  or if there exists a supporting hyperplane hf of p such that f is their touching set  i.e.  f = hf 뫌 p. in the latter case  we say that f is a proper face of p. a facet of p is a proper face of p with the largest possible dimension  that is  dim p  1. the following facts are well known  gru몮nbaum  1 :
1. for any facet f of p  there is a halfspace h+ 뫍 half p  such that f = h+ 뫌 p. we say that h+ generates f.
1. for any proper face f of p  there is a facetsuch
.
are two proper faces of  then
dim f    dim .
1 separating polyhedra from a few supporting halfspaces
lemma 1. let p be a polyhedron of n with dim p  = n  and hf+ a supporting halfspace of p whose touching set is f. then  there exists a set of halfspaces hf   half p  such that |hf| 뫞 n   dim f   hf+ is a supporting halfspace of pol hf   and their touching set c is such that f   c.
proof.  rough sketch.  the proof is by induction. base case: if dim f  = n 1 we have that the touching face f = hf+ 뫌p is a facet of p. thus  from fact 1  f is generated by some halfspace h+   half p  such that h+ 뫌 p = f  as for hf. since dim f  = dim h  = dim hf  = n   1  it easily follows that in fact h = hf holds. thus  hf+ is trivially a supporting halfspace of h+  and this case is proved: just take hf = {h+} and note that |hf| = 1.
모inductive step: by the induction hypothesis  the property holds for any supporting halfspace of p such that its touching face f has a dimension 뫞 n   1  for some d   1. we show that it also holds for any supporting halfspace hf+ of p  whose touching face f has a dimension dim f  = d 1. for space limitations  we just give the proof idea  with the help of figure 1. since f is not a facet  from fact 1 there exists a facet of such that. in the three-dimensional example shown in figure 1  f is the vertex at the bottom of the diamond  and f is some facet on its  dark side.  let  and consider the rotation of hf about c on the opposite direction w.r.t.  that first touches. as shown in figure 1  the face f-an edge of the diamond-properly includes f and its dimension is at least d   dim f   by fact 1. it can be shown that  given such a pair of halfspaces and  it holds that hf+ is a supporting halfspace of the polyhedron pol  which is called roof. formally  the proof proceeds by exploiting the induction hypothesis. intuitively  consider: we want a set hf supported by hf+ and consisting of just halfspaces taken from half p   and does not belong to this set  because it does not generate a facet of p. however  we can see that it is a supporting halfspace for-the roof  which correspond to faces having higherdimension than f. in the running example  they are both facets of the diamond  and hence the property immediately holds  base case . in general  the procedure may continue  encountering each time at least one facet by fact 1  and one more face with a higher dimension than the current one by fact 1. eventually  in our example we get. moreover  recall that dim  and dim f  = d 1.
then  by the induction hypothesis 
dim f .	
1 small emptiness certificates for the core
in this section  we prove our main results on tu games.
모with a little abuse of notations  since coalitions correspond to the inequalities  1  and hence to the associated halfspaces of n  hereafter we use these terms interchangeably.
definition 1. let be a game with transferable payoffs. a coalition set s   1n is a certificate of emptiness  or infeasibility certificate  for the core of g if the intersection of pol s  with the grand-coalition halfspace  1  is empty.
모the definition above is motivated by the following observation. let p be the polyhedron of n obtained as the intersection of all halfspaces  1 . since s is a subset of all possible coalitions  p   pol s . therefore  if the intersection of pol s  with the grand-coalition halfspace  1  is empty  the intersection of this halfspace with p is empty  as well.
theorem 1. let be a game with transferable payoffs. if the core of g is empty  there is a certificate of emptiness s for it such that |s| 뫞 |n|.
proof.  sketch.  let n = |n| and p be the polyhedron of n obtained as the intersection of all halfspaces  1 . since we are not considering the feasibility constraint  1   there is no upper-bound on the values of any variable xi  and thus it is easy to see thatand dim p  = n.
모let hp+ be the halfspace defined by the grand-coalition inequality  1 . if the core of g is empty  the whole set of inequalities has no solution  that is  p 뫌 hp+ =  . let h몬f+ be the halfspace parallel to hp+ that first touches p  that is  the smallest relaxation of hp+ that intersect p. consider the opposite  as shown in figure 1  on the left. by construction  hp+ 뫌 hf+ =    hf = h몬f is a supporting hyperplane of p  and hf+ is a supporting halfspace of p. let f be the touching set of hf with p  and let d = dim f . in figure 1  it is the vertex at the bottom of the diamond p. from lemma 1  there is a set of halfspaces s   half p   with |s| 뫞 n   d  such that hf+ is a supporting halfspace for pol s . it follows that hp+ 뫌 pol s  =    whence s is an infeasibility certificate for the core of g. finally  note that the largest cardinality of s is n  and corresponds to the case dim f  = 1  that is  to the case where the face f is just a vertex. therefore the maximum cardinality of the certificate is n. in our three-dimensional example  such a certificate is  as shown in figure 1. 
모note that the above proof is constructive and has a nice geometrical interpretation. however  for the sake of completeness  we point out that-as we have recently found-the above result on infeasibility certificates may be also obtained as a consequence of helly's theorem on the intersection of families of convex sets  danzer et al.  1   whose proof is rather different  as it relies on algebraic techniques.
모exploiting the above property  we can now state our general result on the complexity of core non-emptiness for any  non-deterministic  polynomial-time compact representation. theorem 1. let r be a non-deterministic polynomial-time compact representation. given any coalitional game with transferable payoffs g 뫍 c r   deciding whether the core of g is not empty is in co-np.
proof. let be a game with transferable payoffs.
if its core is empty  from theorem1  there is an infeasibility certificate s  with |s| 뫞 n  where n is the number of players of g. for the sake of presentation  let us briefly sketch the case of a polynomial-time deterministic representation r. in this case  a non-deterministic turing machine may check in polynomial time that the core is empty by performing the following operations:  i  guessing the set s  i.e.  the coalitions of players corresponding to the halfspaces in s;  ii  computating  in deterministic polynomial time  the worth v s   for each s 뫍 s  and for the grand-coalition n; and  iii  checking that pol s  뫌 hp+ =    where hp+ is the halfspace defined by the grand-coalition inequality  1 . note that the last step is feasible in polynomial time  as we have to solve a linear system consisting of just n + 1 inequalities.
모the case of a non-deterministic polynomial-time compact representation r is a simple variation where  at step  ii   for each s 뫍 s  the machine should also guess the value w = v s  and a witness. 
모the above result settles the precise complexity of the core non-emptiness problem for marginal contribution nets  as asked for in  ieong and shoham  1 .
corollary 1. given a coalitional game with transferable payoffs encoded as a marginal contribution net  deciding whether its core is not empty is co-np-complete.
1 non-transferable payoffs increase the complexity
for games where the payoffs cannot be transferred among the players  core non-emptiness turns out to be harder than in the case of transferable payoffs we have studied above.
모first  for ntu games we next define a notation similar to that of marginal contribution nets  to describe the consequences of these games in a compact form.
모also here  games are described by associating player patterns with consequences  a coalition worth being thus characterized by the sums of the contributions of the rules whose patterns are satisfied by the players in the coalition.
definition 1. a marginal contribution net for game with non-transferable payoffs is a finite set of rules of the form pattern 뫸 consequences 
where pattern is a conjunction of positive and negative player literals  and consequences is a set of possible payoff addenda for the players in the coalition that trigger this rule  that is  for players occurring as positive literals in pattern.
모formally  given such a rule r  we say that a coalition s of players meets its pattern  if each player occurring positively in pattern also occurs in s  and none of the players occurring negatively in pattern occurs in s. the consequences of r are a set of vectors assigning an increment  either positive or negative  to some players occurring positively in pattern. all other players get no increment out of this vector. syntactically  we thus specify only the contributions for the players to be incremented  see example below . for each player p  there is a default implicitly specified rule  which is triggered by the player p and assigns to it the  initial  value 1. then  the only consequence of coalitions that do not meet any non-default rule is the outcome assigning payoff 1 to all their players.
모let s be a coalition and r the set of rules that s meets. the set of consequences v s  of s is the set of all imputation vectors that can be obtained by taking the sum of any tuple of vectors x몬1 ... x몬|r|  with each x몬i belonging to the consequences of some rule ri 뫍 r.
example 1. let us consider a game involving players a  b and c. then  consider the rules a 뫇 b 뫸  a+=1   a+=1 b+=1 
b 뫇  c 뫸  b+=1 .
then the set of consequences v {a}  is the singleton { 1 1 }  since only the implicit default rules apply. on the other hand  v {a b}  = { 1 1   1 1 }  v{b c} = { 1 1 }  and v {a b c}  = { 1 1   1 1 }.
theorem 1. let r be a non-deterministic polynomial-time compact representation. given any coalitional game with non-transferable payoffs g 뫍 c r   deciding whether the core of g is not empty is in . in particular  it is complete if r is the marginal contribution nets framework. however  if r is a deterministic polynomial-time compact representation  the problem is in co-np.
proof.  rough sketch.   membership in . let g =  be a game in c r  with non-transferable payoffs. a non-deterministic turing machine with an oracle in np may decide in polynomial time that the core is not empty as follows:  i  guessing the profile w 뫍 v n  and of a witness y that w is a consequence of v n ;  ii  exploiting y  checking in polynomial time that; and  iii  exploiting the oracle  checking that w belongs to the core. indeed  it is easy to see that the latter problem is in co-np.
모 membership in co-np . if r is a deterministic polynomial-time compact representation  a non-deterministic turing machine m may decide in polynomial time that the core is empty as follows. it computes in polynomial time all consequences of the grand-coalition and guesses  for each w 뫍 v n   a witness yw that w is not in the core. then  exploiting these witnesses  m checks in polynomial time that all such profiles do not belong to the core.
모-hardness . the reduction is from the problem of deciding the validity of 1qbf formulae in 1dnf. let 붯 =  붸 붹뷋 붸 붹   where 붸 and 붹 are vectors of boolean variables  and 뷋 붸 붹  is a boolean formula in 1dnf. from 붯  we build in polynomial time the following ntu game g붯  encoded as a marginal contribution net. the players of g붯 are: two players ati and afi   called existential players  corresponding to each variable 붸i of 붯; two players bti and bfi   called universal players  for each variable 붹i of 붯; a player di for each disjunct 붻i of 붯; and two more players sat and good  where the former is related to the satisfiability of 뷋 붸 붹   while the latter is a player that receives a penalty  b in coalitions that do not behave as we would like to  where b is a fixed number larger than any value that any coalitions may achieve.
모for any literal  occurring in some disjunct of the formula  denote by p l  the corresponding player of the game. e.g.  if
  then  then. then  the consequences for coalitions in g붯 are defined through the following rules:
bti 뫸  bti +=1 ; bfi 뫸  bfi +=1  ati 뫇 afi 뫸  ati +=1   afi +=1  di 뫸  di+=1 ; sat 뫸  sat+=1 ; good 뫸  good+=1 
p  1  뫇 p  1  뫇 p  1  뫇   i 뫇 뫸   +=     di 뫇  sat 뫇 good 뫸  good+=   b 
 d1 뫇 ... 뫇  dm 뫇 sat 뫇 good 뫸  good+=   b  bti 뫇  sat 뫇 good 뫸  bti +=1 good+=1  bfi 뫇  sat 뫇 good 뫸  bfi +=1 good+=1  ati 뫇  afi 뫸  ati +=1 ; afi 뫇  ati 뫸  aif +=1   ati 뫇  afi 뫇 good 뫸  good+=   b 
 bti 뫇  bfi 뫇 good 뫸  good+=   b  for all players.
모then  it can be shown that 붯 is valid if and only g붯 has a non empty core. first note that any imputation vector for the grand-coalition n assigns 1 to universal players  disjunct players  and to sat and good. for any pair of existential players ati and afi   they get either 1 or 1 but never the same value. then  we can associate with such a configuration of existential players a truth-value assignment for the corresponding boolean variables: if x몬 is an imputation vector  define 횾몬 such that 횾몬 붸i  = true if ati takes 1 in x몬  and 횾몬 붸i  = false if afi takes 1 in x몬. intuitively  if the formula is valid then 횾몬 is a witness of validity  and there is such an imputation vector x몬 in the core. indeed  in this case  to improve the payoff for all of its members  a coalition should avoid to include sat. however  this is impossible if 붯 is valid. 
