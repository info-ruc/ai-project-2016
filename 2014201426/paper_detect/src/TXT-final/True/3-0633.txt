
the quantifiedbooleanformula  qbf  problemis a powerful generalizationof the boolean satisfiability  sat  problem where variables can be both universally and existentially quantified. inspired by the fruitfulness of the established model for generating random sat instances  we define and study a general model for generating random qbf instances. we exhibit experimental results showing that our model bears certain desirable similarities to the random sat model  as well as a number of theoretical results concerning our model.
1 introduction
a phenomenal success story of artificial intelligence research over the past decade has been progress on the boolean satisfiability  sat  problem. the technologyof solvers for sat has been transformed by techniques such as conflict-drivenlearning  highly efficient propagation mechanisms  and randomization. today  state-of-the-art solvers can cope with problem instances having sizes that are orders of magnitude beyond what one would have optimistically predicted a decade ago.
﹛inspired and encouraged by the tremendous advances in boolean satisfiability  many researchers have recently turned to studying a powerful generalization of boolean satisfiability where both universal and existential quantification of variables is permitted; this generalization is often called the quantified boolean formula  qbf  problem. whereas the sat problem provides a framework wherein one can model search problems within the complexity class np  the qbf problem permits the modelling of problems having higher complexity-from the complexity class pspace-including problems from the areas of verification  planning  knowledge representation  game playing  logic  and combinatorics. recall that sat is known to be np-complete  and qbf is known to be pspace-complete.
﹛a significant tool for sat research has been the model for generating random sat instances studied by  mitchell et al.  1   in which it is possible to reliably generate instances that are robustly difficult. this model has become a canonical benchmark for solver evaluation  has been used heavily in conducting and thinking about sat-related research  and is widely regarded as a suitable basis for investigating  average  or  typical  case complexity. in addition  theoretical issues concerning this model have stimulated fruitful and highly non-trivial interaction among the areas of artificial intelligence  theoretical computer science  probability theory  and statistical physics. one particular question that has garnered significant attention is the  satisfiability threshold conjecture  which roughly states that  as the density of constraints is increased  formulas abruptly change from being satisfiable to being unsatisfiable at a critical threshold point.
﹛the utility and widespread embrace of the random sat model suggests that research on qbf could similarly benefit from random qbf models. this paper defines and studies a general model for generating random instances of the qbf problem. we exhibit experimental results showing that our model bears certain desirable similarities to the random sat model; in particular  we show that our model exhibits threshold and easy-hard-easy phenomena as in the sat model. however  we also experimentally demonstrate that the much larger parameter space of our model offers a richer framework for exploring and controlling complexity than the sat model. in addition  we present a number of theoretical results concerning our model  namely  we give techniques for establishing lower and upper bounds on the purported threshold in our model. this places our work in contrast to previous work on random qbf models  discussed below   which contained very little rigorous theoretical analysis. our theoretical results demonstrate nice connections to both previously studied problems as well as less studied but natural problems; we believe that these results evidence that our model is mathematically tangible and holds promise for being analyzed on the level of sophistication that work on the sat model has reached.
formulation of qbf. in this paper  we use the formulation of qbf where consecutive variables having the same quantifier are combined into a set. the following are the thus the general forms of qbf formulas having one  two  and three quantifier blocks  respectively:
 x1耳
 y1 x1耳
 x1 y1 x1耳
by a quantifier block  we mean an expression qv where q is a quantifier    or    and v is a set of boolean variables. in general  an instance of qbf contains a sequence of quantifier blocks which alternate between universal and existential type  followed by a set of clauses  denoted here by 耳.1 the semantics of these formulas are defined as is standard in logic; for instance  a formula  y1 x1耳 is true if for every assignment to the variables y1  there exists an assignment to the variables x1 such that 耳 is true. an intuitive way to view a qbf formula is as a game between two players: a  universal player   who attempts to falsify 耳  and an  existential player   who attempts to satisfy 耳. players set their variables in the order given by the quantifier prefix. for instance  a formula  x1 y1 x1耳 can be viewed as a three-round game in which the existential player first sets the variables x1  the universal player then sets the variables y1  and the existential player finishes by setting the variables x1. in general  the formula is true if the existential player can always win the game by satisfying 耳.
description of model. let us review the random sat model  which our model generalizes. this model takes three parameters: the clause length k  the number of variables n  and the number of clauses c. a random formula with these parameters  denoted here by k-f n c   is generated one clause at a time; each clause is generated by selecting  uniformly at random  k distinct variables  and then negating each with probability one half.
﹛now we describe our random qbf model. in the random sat model  every clause has the same length. in our model  this also holds  but in addition  the number of literals in a clause from each quantifier block is a constant. the first parameter to our model is thus a tuple specifying  for each quantifier block  the number of literals from that block that are in a clause. for instance  the tuple  1  specifies that the generated formulas are of the form  y1 x1耳  where each clause in 耳 has 1 literals  1 from y1 and 1 from x1. we will call such formulas  1 -qbf formulas. as another example  the tuple  1 1  specifies that the generated formulas are of the form  x1 y1 x1耳  where each clause in 耳 has 1 literals  1 from x1  1 from y1  and 1 from x1. analogously  we call such formulas  1 1 -qbf formulas.
﹛the second parameter to our model is a tuple of the same length as the first one  specifying the number of variables in each quantifier block. the third parameter to our model is simply the number of clauses c. as an example  suppose that the first tuple is  1   the second tuple is  1   and the number of clauses is 1. the generated formulas are of the form  y1 x1耳  where y1 has 1 variables  x1 has 1 variables  each clause in 耳 has 1 literals from y1 and 1 literals from x1  and there is a total of 1 clauses in 耳. each clause is generatedby selecting uniformlyat random for each quantifier block  the designated number of distinct variables  and then negating each variable with probability one half. we denote such a random formula by  1 -f  1  1 . in general  to denote random formulas from our model  we use the notation
      jl kl ... j1 k1 -f  ml nl ... m1 n1  c  or
 kl jl 1 ... j1 k1 -f  nl ml 1 ... m1 n1  c 
depending on whether or not the number of quantifier blocks is even or odd  respectively.
﹛notice that in a random qbf from this model  if any quantifier block is picked and the clauses are restricted to literals over the quantifier block  the result is a random formula over the variables of the quantifier block in the sense of the random sat model. it can in fact be verified that the model has a certain  recursive  property: generating a random qbf and then randomly instantiating the variables of the outermost quantifier block results in another random qbf from the model.
previous work. random qbf models have been previously studied by  cadoli et al.  1  and  gent and walsh  1 .  cadoli et al.  1  have experimentally studied the qbf generalization of the sat model where clauses of fixed length k are generated by randomly choosing k distinct variables from the entire set of variables  and then negating each with probability one half. in this generalization  denoted fcl  the generation of clauses does not differentiate among variables from different quantifier blocks. it was pointed out in  gent and walsh  1  that this model is  flawed  in that it generates trivially false formulas when the number of clauses is on the order of the square root of n  the number of variables. these trivially false formulas arise from pairs of clauses where one clause contains a single existential literal  the other contains a single existential literal that is the complement of the first  and no universal variable is repeated in the pair.
﹛in attempts to remedy this issue   gent and walsh  1  proposed two models  model a and model b  and  cadoli et al.  1  proposed another model  fcl1. model a and fcl1 are essentially modifications of the original fcl model that disallow the types of clauses that lead to the trivial falsity; for instance  in model a  each clause is generated independently as before  but clauses containing one existential literal are simply discarded and replaced. as pointed out in  gent and walsh  1   instances generated by model a lack uniformity; in our view  the definitions of model a and fcl1 have an ad hoc flavor that we believe make them less amenable to mathematical analysis.
﹛the study of model b in  gent and walsh  1  is concerned mostly with qbf formulas with two quantifier blocks; results of two experiments are reported. the parameterizations of model b studied can be obtained within our model  and indeed our model can be viewed as a generalization of these parameterizations. however  no systematic definition of the parameter space of model b is given. we believe that one of the contributions of this paper is the precise articula-
tion of a general random qbf model that may be instantiated in various ways  and from which it is possible to methodically embark on experimental and theoretical explorations of the parameter space.
1 experimental results
our first set of experimental results concerns  1 -qbf formulas  all of which have the same number of variables  1. we varied both the number of clauses  as well as the ratio of universal to existential variables  denoted by 老  rho . figure 1 shows the computational cost of deciding these formulas.

ratio=clauses/ existential variables 
figure 1: computationalcost of random 1 -qbf formulas with 1 variables.
﹛each curve corresponds to a different value of 老. for instance  using the introduced notation  the curve with 老 = 1 corresponds to the hardness of formulas of the form  1 -f  1  c  for varying numbers of clauses c. the hardness is plotted as a function of the ratio of clauses to existential variables; in the case of 老 = 1 and 1 variables  this ratio is equal to c/1. note that all of the experiments were performed using the solver qube-bj  giunchiglia et al.  1   and each point of our plots represents the median value.
﹛figure 1 concerns exactly the same formulas studied by figure 1  but shows the probability of truth instead of the computational cost.

ratio=clauses/ existential variables 
figure 1: probability of truth of random  1 -qbf formulas with 1 variables.
﹛examining each value of 老 individually  we see that as the number of clauses is increased  the formulas change from being almost certainly true to almost certainly false. moreover  this transition seems to take place relatively abruptly  suggesting that our model exhibits a threshold phenomenon as is conjectured in the random sat model. also  recall that in the random sat model  computational difficulty exhibits an easy-hard-easy pattern  where the computational difficulty of formulas peaks around the point where half of the forulas are satisfiable. for each value of 老 in these two figures  and in all of the other experiments we performed  our model also exhibits this phenomena.
﹛now  let us consider the curves of figure 1 together. the picture suggested is an extremely intriguing one: starting from the left  the peaks of each of the four curves appear to increase as 老 decreases  attain a maximum  and then decrease as 老 further decreases. that is  the peaks of the easy-hardeasy patterns appear to themselves exhibit an easy-hard-easy pattern! one lesson begged by this figure is that if one wishes to generate the computationally hardest quantified formulas for a given number of variables  it is of crucial importance to select the appropriate relative numbers of variables in each quantifier block. it is also clear from this figure that  even after we have committed ourselves to studying  1 -qbf formulas and fixed the number of variables  there are still two parameters  老 and the clause density  that can be used to control complexity. we envision that the large parameter space of our model will be useful in the evaluationof qbf solvers. for instance  by tuning the clause density appropriately  one can generate an ensemble of  1 -qbf formulas with 1 variables which all have the same hardness  for one solver   but different 老 values; observing the behavior of another solver on such an ensemble could give insights into the relative behaviors of the solvers.

ratio=clauses/ existential variables 
figure 1: formulas of type  1 1 -f  1 1  c . the x-axis is the ratio of clauses to 1  the number of existential variables in the innermost block x1.
﹛figure 1 shows results on  1 1 -qbf formulas in which each quantifier block has 1 variables  for a total of 1 variables. when there is an odd number of quantifier blocks  a solver can conclude truth of a formula as soon as it finds an assignment to the outermost quantifier block such that the rest of the formula is true. accordingly  for an odd number of quantifier blocks  the hardness drops down more slowly on the right of the peak  the  false  region  than on the left  the  true  region . this slowness in droppingdown on the right is quite pronounced in figure 1. note that a dual phenomenon takes place for an even number of quantifier blocks; see for example figure 1.

ratio=clauses/ existential variables 
figure 1: formulas of type  1 -f  1  c .
﹛figure 1 shows results on  1 -qbf formulas with 老 = 1  that is  with the same numberof existential and universalvariables  1 each  for a total of 1 variables. interestingly  although the number of variables is less than in figure 1  the hardest formulas  of figure 1  are considerably harder than those of figure 1  emphasizing the importance of the first parameter of our model  the tuple giving  for each quantifier block  the number of literals per clause.
﹛figure 1 shows results for  1 -qbf formulas with 1 variables. we again see that differences in 老 can dramatically affect complexity.1

ratio=clauses/ existential variables 
figureof type  1 -f  1  c  and
 1 	 .
1 theoretical results
in this section  we present a number of theoretical results which concern techniques for proving lower and upper bounds on the purported threshold in our model. in the random sat model  theoretical work generally studies asymptotic properties of the model  in particular  properties that hold as the number of variables approaches infinity. in this section  we will similarly be concernedwith asymptotic properties of our model  and we assume that in parameterizations
      jl kl ... j1 k1 -f  ml nl ... m1 n1  c  and
﹛﹛ kl jl 1 ... j1 k1 -f  nl ml 1 ... m1 n1  c  of our model  the ki and ji are constant  but the ni  mi  and c are all functions of an underlying argument n. we will discuss properties that hold almost surely by which we mean with probability tending to one as n approaches infinity.
﹛our first result concerns a way of obtainingthreshold upper bounds  that is   almost surely false  results. to illustrate the idea  let us focus on  j k -qbf formulas with two quantifier blocks  which are of the form  y1 x1耳. consider the game view  mentioned in the introduction  of such a formula: the universal player wishes to set y1 so that the resulting formula cannot be satisfied by the existential player. a reasonable tactic for the universal player is to attempt to set the variables y1 so that the number of clauses in the resulting formula is maximized. suppose that the universal player chooses a setting to y1 in such a way that she does not  look at  the existential literals of the formula-that is  the choice of assignment to y1 depends only on the universal literals in the formula. with this form of choice  in a sense that can be made precise  the resulting formula  over x1  can be verified to be a random sat formula. if the universal player can guarantee that the resulting random sat formula has sufficiently many clauses  then almost sure falsity follows by making use of sat threshold upper bounds.
﹛let us be a bit more precise. we show how to obtain almost sure falsity results for formulas of the form  j k -f  m n  d . assume that k-f n c  formulas are almost surely false  that is  c/n is an upper bound for the k-sat threshold. if we restrict such a formula to the universal literals  the y1 literals   we obtain a j-f m d  formula. assume further that d ≡ c is sufficiently high so that  almost surely  a j-f m d  has an assignment leaving c clauses unsatisfied.  in notation  we assume that minsat j-f m d   ≒ d   c almost surely  where minsat f  denotes the minimum  over all assignments  of the number of clauses satisfied in the formula f.  together  these two assumptions  in light of the above discussion  imply that  j k -f  m n  d  formulas are almost surely false. the following proposition is a formal statement of this claim  but in a more general form. proposition 1. suppose that instances of
﹛﹛ kl jl 1 ... j1 k1 -f  nl ml 1 ... m1 n1  c  are almost surely false  and that d is sufficiently high so that almost surely  it holds that
minsat jp kp ... kl+1 jl -f  mp np ... nl+1 ml  d  is less than or equal to d   c. then  instances of
      jp kp ... j1 k1 -f  mp np ... m1 n1  d  are almost surely false.
﹛note that one can formulate a dual of proposition 1 that allows one to infer  almost surely true  results from previous  almost surely true  results  and that concerns maxsat instead of minsat.
﹛we next observe that  given a parameterization  of the model   if the parameterization is almost surely true after the elimination of a  prefix   then the original parameterizationis almost surely true. this permits  for instance  the derivation of  almost surely true  results for formulas beginning with a universal quantifier from such results for formulas beginning with an existential quantifier.
proposition 1. let
 jl kl ... j1 k1 -f  ml nl ... m1 n1  c 
be a parameterization of the model. if for some i   l it holds that instances of
      ji ki ... j1 k1 -f  mi ni ... m1 n1  c  or
    ki+1 ji ... j1 k1 -f  ni+1 mi ... m1 n1  c  are almost surely true  then instances of
      jl kl ... j1 k1 -f  ml nl ... m1 n1  c  are almost surely true.
﹛proposition 1 follows from the general fact that a quantified formula 朴 is true if eliminating one or more quantifier blocks from the outside of 朴  along with their associated literals  gives a true formula.
example 1. we demonstrate how to make use of the two propositions given so far by explicitly computing some threshold bounds for our model. we will consider  1 -f  老n n  cn  formulas  that is  formulas of the type considered in figures 1 and 1.
﹛we begin by looking at the case where 老 = 1  that is   1 -f  n n  cn  formulas. we can use proposition 1 specialized to two quantifier blocks  that is  with p = l = 1  to obtain an upper bound of c = 1 for such formulas  as discussed prior to the statement of that proposition. how is this done  the first requisite ingredient is a value cu such that 1-f n cun  formulas are almost surely false  that is  a sat threshold upper bound. by  dubois et al.  1   we can take cu = 1. the second ingredient needed is an upper bound for minsat 1-f n cn  . by theorem 1  which is presented below  we have that minsat 1-f n cn   ≒  1 cn for c =1. using the proposition with c = cun and d = 1n  we see that  1 cn ≒  1n     cun  and hence we have minsat 1-f n cn   ≒ d   c as required. therefore  instances of  1 -f  n n  cn  are almost surely false for c = 1  and hence for all c ≡ 1 .
﹛now let cl be a lower bound on the 1-sat threshold  so that instances of 1-f n cln  are almost surely true. we can take cl = 1 by  kaporis et al.  1 . by proposition 1  instances of  1 -f  n n  cln  are almost surely true. the idea is that  1 -f  n n  cln  formulas are almost surely true because after  eliminating  the first quantifier block in such formulas  one obtains 1-f n cln  formulas  which are almost surely true by our choice of cl. to summarize the results observed so far  we have that  1 -f  n n  cn  instances are almost surely true when c ≒ cl = 1  and almost surely false when c ≡ 1.
﹛now  let us consider  1 -f  老n n  cn  formulas. regarding lower bounds  as before  we have by proposition 1 that instances of  1 -f  老n n  cln  are almost surely true. turning to upper bounds  we observe that  by a standard probabilistic argument  every 1-sat formula has an assignment satisfying  at most  1 of the clauses. thus  we have minsat 1-f 老n 1cun   ≒ 1cun for any value of 老. using proposition 1 as before with c = cun and d = 1cun  we obtain that instances of  1 -f  老n n  cn  are almost surely false for c ≡ 1cu  that is  1cu is a threshold upper bound on formulas  1 -f  老n n  cn   for any value of 老.
﹛summarizing  we have obtained that for any value of 老  formulas  1 -f  老n n  cn  are almost surely false when c ≒ cl  and almost surely true when c ≡ 1cu. that is  such formulas change from being almost surely true to almost surely false between cl and 1cu. if we set cl and cu to 1  which is an approximate value of the 1-sat threshold  we expect the threshold for such formulas to lie between c = 1 and c = 1﹞ 1=1  where c denotes the ratio of clauses to existential variables; this expectation is consistent with figure 1.
﹛in the usual random sat model  whenever the clause length is fixed  it is known that at a sufficiently low constant clause-to-variable ratio  formulas are almost surely satisfiable  and that at a sufficiently high constant clause-to-variable ratio  formulas are almost surely unsatisfiable. these results  of course  validate the hypothesisthat there is a thresholdphenomenonin this model. we can show analogous results in our model.
proposition 1. fix  jl kl ... j1 k1  to be a tuple with k1 ≡ 1  and for i ﹋ {1 ... l}  let ni n  be a linear function of n  that is  ni n  = 考in for a constant 考i   1. there exist positive constants al and au such that instances of
 jl kl ... j1 k1 -f  ml nl ... m1 n1  cn 
are almost surely true when c ≒ al  and instances of
 jl kl ... j1 k1 -f  ml nl ... m1 n1  cn 
are almost surely false when c ≡ au.  this proposition is meant to address formulas with both even and odd numbers of quantifier blocks  that is  we permit jl = 1. 
﹛the  almost surely true  part follows from proposition 1 along with known lower bounds on the sat threshold  while the  almost surely false  part follows from the fact that shifting existential quantifiers inward preserves truth of quantified formulas  the idea of proposition 1  and a standard first moment argument.
﹛we now study threshold upper bounds for our model in greater detail. proposition 1 establishes a connection between minsat and upper bounds in our model. although minsat has not  as far as we know  been studied explicitly in previous work  we certainly believe that it is a natural concept of independent interest. we have the following result concerning it.
theorem 1. for every k ≡ 1  there exists a function gk such that for all c   1  it holds almost surely that minsat k-f n cn   ≒ gk c cn + o n .
﹛we plot obtainable g1 and g1 in figure 1  comparing them against the values 1 and 1 obtainable by a standard probabilistic argument.
﹛we prove this theorem by analyzing a simple algorithm similar to one used in the paper  coppersmith et al.  1  to study maxsat. the algorithm is analyzed using the differential equation approach of  wormald  1  that has been used in many random sat threshold lower bound arguments.

figure 1: upper bounds for minsat k-f n cn   from theorem 1.
﹛now we look further at threshold lower bounds in our model  focusing on formulas with quantifier prefix   . one can observe that if all  small  subformulas of a random sat formula are satisfiable  at clause-to-variable ratio c  then formulas at clause-to-variable ratio c are true.
proposition 1. fix a tuple  j k  and constants c 老   1. there exists a positive constant x   1  depending on j  c  and 老  such that if all subformulas of size xcn in an instance of k-f n cn  are satisfiable almost surely  then instances of  j k -f  老n n  cn  are true almost surely.
﹛proposition 1 follows from the fact that a sufficiently small y   1 can be picked so that the probability of minsat j-f 老n cn   ≒ ycn
convergesto zero. this can be provedby using a union bound and chernoff bounds on a first moment. the desired x can then be obtained as  1   y .
﹛this  small subformula  property has not been previously studied to our knowledge  but as with minsat  we believe that it is a natural concept of possible independent interest. we can show that this property holds for random sat formulas  for subformulas having size equal to a constant fraction of the number of clauses.
theorem 1. for all constants k ≡ 1 and c   1  there exists a constant x   1 depending on k and c such that all size xcn subformulas of k-f n cn  are satisfiable almost surely.
﹛the proof of theorem 1 makes use of  chvatal and szemeredi  1  lemma 1 .
﹛proposition 1 and theorem 1 can be used together to obtain threshold lower bounds for    formulas. in particular  notice that in proposition 1  relative to fixed c and 老  increasing j allows one to decrease x. moreover  the lower the x required in theorem 1  the higher the c may be. thus  fixing k and 老  increasing j allows us to obtain higher and higher lower bounds on the threshold of  j k -f  老n n  cn .
acknowledgements. the authors wish to thankv∩ ctor dalmau and bart selman for helpful comments  and massimo narizzano for his help with qube.
