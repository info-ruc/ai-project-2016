
we analyze the asymptotic conditional validity of modal formulas  i.e.  the probability that a formula 뷍 is valid in the finite kripke structures in which a given modal formula   is valid  when the size of these kripke structures grows to infinity. we characterize the formulas 뷍 that are almost surely valid  i.e.  with probability 1  in case   is a flat  s1consistent formula  and show that these formulas 뷍 are exactly those which follow from   according to the nonmonotonic modal logic s1g. our results provide - for the first time - a probabilistic semantics to a well-known nonmonotonic modal logic  establishing a new bridge between nonmonotonic and probabilistic reasoning  and give a computational account of the asymptotic conditional validity problem in kripke structures.
1 introduction
asymptotic probabilities in modal logic. asymptotic  or limit  probabilities of classical logic formulas have been investigated in various contexts  glebskii et al.  1; fagin  1; compton  1; kolaitis and vardi  1; le bars  1 . halpern and kapron have analyzed asymptotic probability in modal logic  halpern and kapron  1   where  instead of relational structures  kripke structures are considered  and where the size of a structure is measured in terms of the number of its worlds. among various results  1 they have shown that every modal formula is either almost surely true or almost surely false in finite kripke structures. thus  there is a 1 law for modal logic k  analogous to the 1 law for function-free first-order logic  fagin  1; glebskii et al.  1 .
모to give a simple example  if p is a propositional letter of a considered finite alphabet a  then the modal formula1 mp is almost surely true  w.r.t. modal logic k . in fact  it can be seen that if n 뫸   then the cardinality of the set an of kripke structures for a of size 뫞 n satisfying mp
 i.e.  where at least one world satisfying p is reachable from each world  grows much faster than the cardinality of the set bn of kripke structures which do not satisfy mp  and thus limn뫸 |an|/|cn| = 1 where cn is the set of all kripke structures with n worlds over the considered alphabet.
모assigning asymptotic probabilities to modal formulas provides an interesting nonstandard semantics to modal logics and has important connections to philosophy and to artificial intelligence:
philosophy: it has been observed  halpern and kapron  1; gottlob  1  that the modal formulas that are almost surely true in all kripke models are exactly those formulas which are valid in carnap's modal logic  exposed in his wellknown foundational treatise meaning and necessity  carnap  1 . carnap argued that precisely these formulas are those to be considered logically true  l-true . the same logic has since be considered by various philosophers and logicians  gottlob  1 .
artificial intelligence: various nonmonotonic modal logics have been defined in the literature. examples are autoepistemic logic  moore  1   nonmonotonic logics k  s1  etc.  marek and truszczynski  1뫣    the logic mbnf  lifschitz  1  and the logic of minimal knowledge s1g  halpern and moses  1 . in these logics  the modal operator k is interpreted as an epistemic operator of knowledge or of belief. as observed in  gottlob  1   the formulas that can be derived from an empty set of premises in all these logics precisely coincide with those formulas which are almost surely true in all kripke structures. this set of formulas is furthermore identical to the stable set  stalnaker  1  based on the empty set of formulas  thus  in a sense  to the  absolute  stable set  containing only those formulas that are epistemic consequences of the empty theory  i.e.  that can be assumed in the case of total factual ignorance  for a definition of stable sets  see section 1 . we thus retain that in nonmonotonic and epistemic logics  in absence of further knowledge  a modal formula is considered true if and only if this formula is almost surely valid.
reasoning and asymptotic conditional truth. while almost sure validity provides an appealing probabilistic seman-
tics of truth in the case of total factual ignorance  this does not yet allow us to reason on the basis of premises  which is the the most important goal of all logical formalisms  and  in particular  of nonmonotonic and epistemic logics. in the setting of limit probabilities  the inference   |= 뷍 of a  possibly modal  formula 뷍 from a knowledge base  theory    would most intuitively correspond to the statement that the conditional probability p 뷍 |   is asymptotically equal to 1. assuming a uniform probability distribution of kripke structures  this means that for the sets an and bn of kripke models of size n satisfying 뷍 뫇   and    respectively  the limit limn뫸 |an|/|bn| exists and is equal to 1.
모there is  in general  no 1 law for conditional probabilities in our setting  which immediately follows from previous results  see e.g.  grove et al.  1b   and from the fact that modal logic corresponds to a fragment of functionfree first-order logic. the existence and determination of conditional probabilities in first and higher order logics has been the subject of several studies  grove et al.  1b; 1a . however  to our best knowledge  conditional probabilities for modal logics have never been studied.
모observe that reasoning via conditional limit probabilities as explained above clearly constitutes a form of nonmonotonic reasoning. for example  if p is a propositional letter  then |=lim mp but k p |1=lim mp  thus  adding a premise may invalidate a consequence  here |=lim denotes inference of almost sure formulas under conditional limit probabilities . the nonmonotonic behaviour of conditional inference has been pointed out in the context of fo and higher order classical logic  see e.g.  grove et al.  1b  . we deem the context of modal logic particularly interesting  because most nonmonotonic logics that have been defined are modal logics. it would thus be very interesting to know how the nonmonotonic modal logic obtained from conditional limit probabilities of kripke structures relates to well-known and well-studied nonmonotonic modal logics.
nonmonotonic modal logics. for every  classical  monotonic system of modal logic s  a nonmonotonic version nm-s is obtained by the following definition: a set e of modal formulas is an nm-s-expansion of a knowledge base   iff e = cns   뫋 { k붺|붺 뫍 lk a    e}   where
cns is the consequence operator according to modal logic s and lk a  is the underlying modal language  i.e.  the set of all possible modal formulas over the alphabet of propositions a1. in particular  moore's autoepistemic logic corresponds to nm-kd1. for more background  consult  marek and truszczynski  1뫣  .
모it was often criticized that the above fixed-point equation is somewhat too liberal  because it allows a theory to have expansions that are not sufficiently  grounded  in the premises and contain positive knowledge that a rational agent should never conclude from the premises. for this reason  ground nonmonotonic modal logics have been defined by restricting the introspection of the agent to non-modal sentences. the notion of groundedness has a rather intuitive motivation: in fact  it corresponds to discarding any reasoning based on epistemic assumptions  which  for example  would enable the agent to conclude that something is true in the world  by assuming to know it. the fixed-point equation defining a sgexpansion of   is: e = cns   뫋 { k붺 | 붺 뫍 l a  e}   where l a  denotes the set of all objective  i.e.  non-modal  formulas of the underlying propositional language. according to this equation  we can associate a logic sg to each modal logic s. given   뫍 lk a   뷍 뫍 lk a   we say that 뷍 is entailed by   in sg  and write   |=sg 뷍  iff 뷍 belongs to all sg-expansions for  .
모among all ground nonmonotonic logics  the logic s1g  which  unlike nm-s1  is a true nonmonotonic logic  has received considerable attention in the literature and is generally referred to as the logic of minimal knowledge  halpern and moses  1   or the logic of maximal ignorance . in fact  independently from its fixed-point characterization  s1g was characterized on a semantic basis  by means of a preference criterion among the models of an agent's knowledge selecting just those models in which objective knowledge  i.e  the set of formulas of type k  such that   뫍 l a   is minimal  halpern and moses  1; shoham  1; lifschitz  1 . as shown in  shoham  1   s1g has a simple  elegant model theory: the s1g models of a theory t are precisely those kripke structures which are universal  i.e.  totally connected  and are maximal set of worlds  w.r.t. set-containment . for details on ground nonmonotonic modal logics and s1g  see  halpern and moses  1; lifschitz  1; donini et al.  1 .
main problems studied. the investigations reported in this paper were motivated by the following questions:
1. given a formula    which formulas 뷍 are almost surely true in the kripke models of    i.e.  how can we characterize the formulas 뷍 that are true with limit probability one in the kripke models of    when the size of these kripke models grows towards infinity 
1. given that modal inference under almost sure validityconstitutes a form of nonmonotonic reasoning  to which of the nonmonotonic modal logics from the abovementioned plethora of logics does this form of reasoning best correspond 
1. can we characterize the set of formulas   that guarantee a 1 law for the asymptotic probability p 뷍|   for arbitrary modal formulas 뷍 
1. what is the complexity of modal reasoning based onasymptotic conditional probabilities 
모for studying these questions  we make a very weak assumption on    which assures that   does not contradict some principles of knowledge: we assume that   is s1-consistent  i.e.  we assume that   is consistent with the axioms of  monotonic  s1  which means that   admits at least one s1-model. this assumption is indeed very weak. it does neither mean that   contains the s1 axioms  or that these axioms should follow from    nor that   has to be interpreted under s1 kripke structures only. our assumption merely requires that formulas such as kp 뫇 k p which bluntly contradict some axioms of  monotonic  s1 cannot be deduced from  . if   satisfies this requirement  we say that   is knowledgeconsistent. we make this assumption because knowledgeinconsistent theories are well-known to be inconsistent for all currently known nonmonotonic modal logics anyway  i.e.  in each such nonmonotonic logic  a knowledge-inconsistent formula   entails a contradiction and thus all formulas of the modal language lk a . in particular  with regard to our goal of comparing asymptotic conditional reasoning to nonmonotonic modal logics  there is no point to consider knowledge-inconsistent modal premises. moreover  we characterize asymptotic conditional reasoning when the premise is a flat modal formula  i.e.  a formula without nested occurrences of the modal operator. the flat fragment of a modal logic of knowledge is certainly a very important  if not the most important  syntactically restricted fragment. it consists of the boolean closure of knowledge bases  i.e.  of objective theories under the k operator. in particular  the flat fragment in s1g is extremely powerful and expressive. as shown in  rosati  1   via appropriate translations  this fragment captures the well-known formalisms of default logic and logic programming under the stable model semantics. in the present paper we limit our attention to this flat fragment. however  we think that  by slightly more involved methods  our results carry over to the fully nested fragment  i.e.  the fragment with nesting depth greater than 1 .
results. by first answering the second of the above-stated research questions  we show the following main result:
answer to question 1:   almost surely entails 뷍 iff 뷍 is entailed by   in s1g.
모this result gives a fresh probabilistic semantics to the wellknown nonmonotonic modal logic s1g  providing a new justification for s1g based on probabilistic rationality. at the same time  it provides the answers to our questions 1 and 1  too. in fact  as already mentioned  reasoning in s1g has precise characterizations in terms of model-theory and complexity  hence the same characterizations now apply to asymptotic conditional reasoning over kripke models:
answer to question 1:   almost surely entails 뷍 iff 뷍 is satisfied by all kripke models of   that are universal and have a maximal set of worlds.
answer to question 1: deciding whether   almost surely entails 뷍 is 붫p1-complete.1
모a theory is honest  halpern and moses  1  iff it has exactly one s1g-model. it has been argued that the epistemic state of a perfectly rational agent is necessarily honest  e.g.  it could not be of the form  kt1  뫈  kt1  where t1 and t1 are theories that contradict each other. honest premises drastically simplify asymptotic conditional reasoning:
answer to question 1: the class of knowledge-consistent premises   that imply a 1 law is exactly the class of honest formulas. in other words  the honest formulas are precisely the formulas   such that  for all 뷍  the asymptotic probability that 뷍 holds in the structures in which   is valid is either 1 or 1. moreover  asymptotic conditional reasoning based on honest theories is only -complete.
모due to space limitations  we can only include the sketches of some results in the present version of the paper.
1 preliminaries
we assume familiarity with modal logics k and s1. we deal with a propositional alphabet a such that either a is finite and fixed  i.e.  it is the same for every problem instance  or a is not bounded  but each problem instance comes along with

   is the complement of =npnp; is the class of problems solved in ptime by a logarithmic number of calls to an np-oracle.
a finite alphabet a as part of the input. we denote by l a  the set of propositional  or objective  formulas over a  denote by lk a  the set of modal formulas over a  and denote  the set of flat modal formulas  i.e.  the subset of lk a  of formulas over a satisfying the following abstract syntax:
모모모  ::= kf |    |  1 뫇  1  where f 뫍 l a  we also use the symbol true to denote the formula a 뫈  a  and the symbol false to denote the formula a 뫇  a.
모we now recall some auxiliary definitions that we will use in the following sections  marek and truszczynski  1;뫣 donini et al.  1 . given   뫍 lk a   we denote by ma    the set of modal atoms from    i.e.  the set of subformulas of the form k뷍 occurring in  . in the following  we say that an occurrence of a modal atom k뷍 in a formula   뫍 lk a  is strict if it does not lie within the scope of a modal operator.
모given a partition  p n  of the set ma    and a formula 뷍 뫍 lk a   we denote by 뷍 p n  the formula obtained from 뷍 by substituting each strict occurrence in 뷍 of a modal atom in p with true  and each strict occurrence in 뷍 of a
모modal atom in n with false. notice that  if p 뫋 n contains ma 뷍   then 뷍 p n  is a propositional formula.
	let  	뫍	lk a  and let  p n  be a partition of
ma   . we denote by obj v p n  the propositional formula obj  p n  =   p n  뫇 k뷍뫍p 뷍 p n .
모given a partition  p n  of the set ma     we say that  p n  is s1-consistent with   if  p n  satisfies the following conditions:  1  the propositional formula obj  p n  is satisfiable;  1  for each k뷍 뫍 n  the propositional formula obj  p n  뫇  뷍 p n  is satisfiable. it is immediate to see that there exists a partition of ma    s1-consistent with   iff   is knowledge-consistent  i.e.  there exists an s1-structure s such that  w s  |= k  where w is a world of s. finally  given a structure s = hw r v i and a world w 뫍 w  we say that  p n  is the partition of ma    satisfied by  w s  if  for each k뷍 뫍 ma      w s  |= k뷍 iff k뷍 뫍 p.
1 strong almost-sure conditional validity
in the work of halpern and kapron  halpern and kapron  1   almost sure structure validity is studied by considering all possible kripke structures equally likely  i.e.  uniformly distributed. this amounts to assume that that every propositional variable is true with probability 1 in a randomly chosen world. under such an assumption  the asymptotic probability of   w.r.t. a propositional alphabet a corresponds to the limit limn뫸 |wn |/|wn|  where:  i  wn denotes the set of all n-structures over a  i.e.  the structures with n worlds of the form hw r v i  where w = {1 ... n}  the accessibility relation r is a binary relation over w  and v is a function mapping each world into a propositional interpretation over a;  ii  wn  denotes the set of all n-structures in which   holds;  iii  |s| represents the cardinality of a set s. moreover  under the above uniform probability assumption  asymptotic conditional probability of 뷍 given   corresponds to the limit limn뫸 |wn  뫇뷍 |/|wn |.
모it would be more appealing to consider the notion of strong almost sure validity  where the asymptotic probability of a formula 뷍 is required to be equal to 1 for every possible probability distribution assigning rational truth probabilities to the propositional variables. it turns out that in the context of  halpern and kapron  1  both concepts are equivalent  thus all relevant results of  halpern and kapron  1  extend to strong almost sure validity. in the context of conditional probabilities  these concepts differ  however. in this paper we choose to characterize the notion of strong almost sure conditional validity  which is independent of a particular fixed probability distribution. however  we will use  section 1  the concept of almost sure conditional validity  i.e.  the one corresponding to the uniform distribution of kripke structures  as a tool for establishing  section 1  our main result on strong almost sure validity.
모more formally  we associate to each propositional atom a 뫍 a a rational probability m such that 1   m   1  which is interpreted as the probability that the proposition a is true. such an assignment is part of the input. assignments giving probability 1  resp. 1  to a are not considered  since in such cases the proposition a is certainly true  resp. false  and all its occurrences in a formula can be eliminated in a simple way. we assume without loss of generality that m is a finite sum of the negative powers of two. hence  we say that p is a probability assignment over an alphabet a if p is a function mapping each propositional symbol from a to a rational number m such that there exists a finite binary sequence m1 ...mp such that.
모it is immediate to verify the following relationship between the cardinality of a set of interpetations and the number of different n-structures defined over such interpretations.1
lemma 1 let i be a set of propositional interpretations  and let wn be the set of n-structures defined using the set of interpretations i. then  |wn| = |i|n 몫 1.
모let   뷍 뫍 lk a   and let p be a probability assignment over a. then  pnp 뷍|   denotes the probability that 뷍 is valid in the n-structures in which   is valid  under the probability assignment p. we are now ready to define almost-sure and strong almost-sure conditional validity.
definition 1  p-almost-sure validity  let p be a probability assignment over a. we say that 뷍 conditioned by   is p-almost-surely valid if limn뫸 pnp 뷍|   = 1  i.e.  the asymptotic probability that 뷍 conditioned by   is valid is 1 under the probability assignment p. conversely  if limn뫸 pnp 뷍|     1  then we say that 뷍 conditioned by   is not p-almost-surely valid.
definition 1  strong-almost-sure validity  뷍 conditioned by   is strongly almost-surely valid if limn뫸 pnp 뷍|   = 1 for each probability assignment p over a. conversely  if there exists a probability assignment p over a such that limn뫸 pnp 뷍|     1  then we say that 뷍 conditioned by   is not strongly almost-surely valid.
we denote by sas   a  the set of formulas 뷍 from lk a  such that 뷍 conditioned by   is strongly almost-surely valid.
1 counting structures
in this section we prove the correspondence between the notion of stable set in nonmonotonic modal logics and strong almost-sure conditional validity with respect to objective formulas  and establish a first correspondence between s1g and strong almost-sure conditional validity in modal logic.
모from now on  we denote by h the number of propositional interpretations of a  i.e.  h = 1|a|. moreover  given a formula f 뫍 l a   we denote by hf the number of interpretations of a satisfying f.
모we start our analysis by studying the properties of the set of n-structures for f  i.e.  the n-structures in which a propositional formula f is valid. first of all  from lemma 1  it follows that the number of n-structures for f is hf 몫 1.
모then  we recall the definition of stable set of modal formulas. let f be a satisfiable propositional formula over the propositional alphabet a. the stable set of f in a  denoted by stable f a   is the unique set of modal formulas t   lk a  that satisfies the following conditions:  i  for each 뷍 뫍 l a   뷍 뫍 t iff f   뷍 is a tautology;  ii  if 뷍 뫍 t then k뷍 뫍 t ;  iii  if 뷍 뫍 lk a    t then  k뷍 뫍 t ;
 iv  t is closed under propositional consequence  marek and truszczynski  1뫣  .
모next  we prove the correspondence between formulas strongly almost-surely valid with respect to an objective formula f and the formulas in stable f a . the proof is easily obtained by extending an analogous result in  halpern and kapron  1 .
lemma 1 let f 뫍 l a  be a satisfiable objective formula. then  sas f a  = stable f a .
we now introduce two auxiliary lemmas.
lemma 1 let   be a flat and knowledge-consistent formula  let wn  be the set of n-structures for   and let dn be the set of n-structures for   in which all worlds satisfy the same partition  p n  of ma    s1-consistent with  . then  limn뫸 |dn|/|wn | = 1.
proofsketch. the proof is divided in two steps: first  we prove that  if   is a flat and knowledge-consistent formula    where  denotes the set of n-structures for   in which no world satisfies an s1-inconsistent partition of ma   . then  we concentrate on the set: let  denote the subset of  in which two worlds satisfy two different s1-consistent partitions of
m be the subset of in which all worlds satisfy  p1 n1  and let dn1 be the subset of dn1 in which all worlds satisfy  p1 n1 . we prove that either limn뫸 |dn1|/|dn1| = 1 or limn뫸 |dn1|/|dn1| = 1. 
모the following property can be derived by an argument analogous to the proof of lemma 1.
lemma 1 let   be a flat and knowledge-consistent formula and let  p n  be a partition of ma    consistent with  . let wn  p n  denote the set of n-structures for   in which all worlds satisfy the partition  p n   and let dn be the set ofv n-structures for obj  p n 뫇뷃 n   where 뷃 n  =
	kf뫍n  kf.	then  .
moreover  limn뫸 |wn  p n | =  hobj  p n  n 몫 1.
we now define s1g-preferred partitions of modal atoms.
definition 1  s1g-preferred partition  let   뫍 lk a . a partition  p n  of ma    is s1g-preferred for   if  p n  is s1-consistent with   and there exists no other partition  p1 n1  1=  p n  of ma    such that  i   p1 n1  is s1-consistent with  ; and  ii  the propositional formula obj  p n  뫇  obj  p1 n1  is not satisfiable.
모it is immediate to verify that s1g-preferred partitions of ma    are in one-to-one correspondence with s1g-expansions of  : in particular  each such partition  p n  identifies the s1g-expansion corresponding to stable obj  p n  a .
모we are now ready to show a first fundamental step towards the correspondence between s1g and strong almost-sure conditional validity: for each knowledge-consistent modal formula    to compute  strong  almost sure conditional validity we can safely consider only the set of n-structures in which all worlds satisfy one of the partitions of ma    that are s1gpreferred for  .
theorem 1 let   be a flat  knowledge-consistent formula  let wn  denote the set of n-structures for    and let dn be the union of the sets of n-structures for   in which all worlds satisfy the same partition  p n  of ma     where  p n  is s1g-preferred for  . then  limn뫸 |dn|/|wn | = 1.
proof. let cn1 be the union of the sets of n-structures for obj  p n 뫇 뷃 n  for each partition  p n  of ma    that is s1-consistent with  . first  by lemma 1 and lemma 1 it follows that . moreover  let cn be the union of the sets of n-structures for obj  p n  뫇 뷃 n  for each partition  p n  of ma    that is s1g-preferred for  : by the same lemmas it follows that limn뫸 |cn|/|dn| =
1. thus  we have to prove that .
모let  p n  be a partition  p n  of ma    s1g-preferred for    and consider all the partitions  p1 n1  of ma    such that obj  p n  is satisfied by all propositional interpretations satisfying obj  p1 n1 . let cn p n  be the set of nstructures for obj  p n  뫇 뷃 n   and let be the union of the set of n-structures for obj  p1 n1  뫇 뷃 n1  for each such partition  p1 n1 . obviously    
  since  p n  is one of such partitions  p1 n1  .
we now prove that .	let cn1 =
. that is is the set of n-structures for obj  p1 n1  뫇 뷃 n  for each partition  p1 n1  that is s1consistent with   and such that obj  p n  is satisfied by all propositional interpretations satisfying obj  p1 n1   and there exists at least an interpretation satisfying obj  p n 뫇  obj  p1 n1 . now let k be the number of interpretations of a satisfying obj  p n : it is immediate to verify that there can be at most k such different partitions  p1 n1 . moreover  for each such partition  p1 n1   there exists at least a propositional interpretation i that satisfies obj  p n  and does not satisfy obj  p1 n1 . therefore  from lemma 1
we have that .
consequently    which proves that
. hence  .	
1 asymptotic conditional probability and s1g
in this section we prove the main result of the paper  which establishes the correspondence between strong almost-sure conditioned validity and entailment in the logic s1g. to this aim  we need some preliminary definitions and properties.
모let a1 be the set of propositional atoms ai such that a 뫍 a and 1 뫞 i 뫞 m. we define the canonical probability assignment pc over a1 as follows: for each a 뫍
a1. let a be a propositional alphabet and let if be the set of propositional interpretations over a that satisfy f. the canonical probability of a propositional formula f  denoted by cp f   is defined as .
모the following auxiliary lemma establishes a sufficient condition over the partitions of ma    which implies that limn뫸 pnpc 뷍|     1.
lemma 1 let   뫍 lfk a . if there exists a partition  p n  of ma    such that:  1   p n  is s1g-preferred for  ;  1  for each partition  p1 n1  that is s1g-preferred for    cp obj  p n   뫟 cp obj  p1 n1  ;  1  뷍 does not hold in the structures for obj  p n   then nlim뫸 pnpc 뷍|     1.
모let a 뫍 a and let p a  = k where k is a rational number satisfying the definition of probability assignment. then  we can construct a propositional formula fk a  defined over an alphabet ak = {a1 ... amk}  where mk is a number depending on k  such that p a  = cp fk a  . then  given a probability assignment p over a  we define 뷉p    as the formula obtained from   by replacing  for each a 뫍 a  each occurrence of a in   with fp a  a . now  in order to prove our main result  we need some auxiliary lemmas.
lemma 1 let 뷍 뫍 lk a   and let f 뫍 l a . then  뷍 뫍 sas f a  iff 뷉p 뷍  뫍 sas 뷉p f  ak .
lemma 1 let   뷍 뫍 lk a . then  for each partition  p n  that is s1g-preferred for    the partition  뷉p p  뷉p n   is s1g-preferred for 뷉p     while for each partition  뷉p p  뷉p n   that is s1g-preferred for 뷉p     the partition  p n  is s1g-preferred for  .
lemma 1 let   뫍 lk a . if a partition  p n  of ma    is s1g-preferred for    then the stable set of obj  p n  in a is an s1g-expansion for  . moreover  if a set t   lk a  is an s1g-expansion for    then there exists a partition  p n  of ma    such that  p n  is s1g-preferred for   and stable obj  p n  a  = t .
theorem 1 let   뫍 lfk a   뷍 뫍 lk a   and let   be a knowledge-consistent formula. then  뷍 conditioned by   is strongly almost-surely valid iff   |=s1g 뷍.
proof. first  if   |=s1g 뷍  then  from definition of entailment in s1g and from lemma 1 it follows that  for each partition  p n  that is s1g-preferred for    뷍 belongs to stable obj  p n  a   consequently  by lemma 1  뷍 뫍 sas obj  p n  a . hence  by lemma 1 and lemma 1  for each probability assignment p over a  뷉p 뷍  뫍 sas 뷉p obj  p n   ak . therefore  by theorem 1  limn뫸 pnpc 뷉p 뷍 |뷉p     = 1  which implies that 뷍 conditioned by   is strongly almost-surely valid.
모conversely  if   1|=s1g 뷍  then by lemma 1 it follows that there exists a partition  p n  that is s1g-preferred for   and such that 뷍 does not belong to stable obj  p n  a   consequently  by lemma 1  뷍 1뫍 sas obj  p n  a . therefore  by lemma 1  뷉p 뷍  1뫍 sas 뷉p obj  p n   ak . moreover  it is immediate to verify the existence a probability assignment p1 over a such that  for each partition  p1 n1  that is s1g-preferred for    cp 뷉p1 obj  p n    뫟 cp 뷉p1 obj  p1 n1   . consequently  by lemma 1  it follows that limn뫸 pnpc 뷉p 뷍 |뷉p       1  i.e.  뷍 conditioned by   is not strongly almost-surely valid. 
1 complexity results
as explained above  we consider both the case in which a is a fixed finite alphabet and the case in which it is considered as finite but not fixed in advance. if a is finite and fixed  then  based on the algorithm for entailment in s1g reported in  donini et al.  1  it can be easily shown that entailment in s1g can be decided in polynomial time  and therefore  by theorem 1  strong almost-sure conditional validity can be decided in polynomial time as well. consider now the case of a finite  non-fixed alphabet a.
theorem 1 let  and let   be a knowledge-consistent formula. deciding whether 뷍 conditioned by   is strongly almost-surely valid is a -complete problem.
proof. follows immediately from theorem 1 and from the fact that the entailment problem   |=s1g 뷍 when   뫍 -complete  which is an immediate consequence of corollary 1 of  donini et al.  1  and of theorem 1 of  rosati  1  .	
모next  we study a subclass of flat modal formulas for which deciding strong almost-sure conditional validity is computationally easier than in the general case: the class of honest formulas  introduced by  halpern and moses  1 . a flat formula   is honest iff it has exactly one s1g-model. it is known that deciding whether   is honest is a 붣p1-complete problem. moreover  if   is honest  then deciding the entailment   |=s1g 뷍 is also -complete. therefore  from theorem 1 the following property holds.
theorem 1 let   뫍 lfk a   뷍 뫍 lk a   and let   be a honest formula. deciding whether 뷍 conditioned by   is p strongly almost-surely valid is 붣1-complete.
모furthermore  the notion of honesty precisely characterizes the subclass of formulas  among the formulas   such that k  is s1-consistent  that condition according to a 1 law  i.e.  such that either limn뫸 pnp 뷍|   = 1 for each probability assignment p or limn뫸 pnp 뷍|   = 1 for each probability assignment p  which is immediately implied by theorem 1 and by the fact that a honest formula has a single s1g-model.
1 conclusions
the present work can be extended in several directions. in particular  we are currently investigating the following issues:  i  strong almost-sure validity for  classes of  conditioning formulas with nested occurrences of modalities;  ii  extending the study of asymptotic conditional validity to the framework of multimodal logic;  iii  computing p-almostsure conditional validity  i.e.  the value of the asymptotic conditional validity for a given probability distribution p of the truth of primitive propositions.
