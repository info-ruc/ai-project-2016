 

     an interactive scene interpretation system  isis  is being developed by stanford research institute's artificial intelligence center as a tool for constructing and experimenting with man achine and automatic scene analysis methods tailored for particular image domains. a region analysis subsystem was developed recently based on the work of brice and fennema  and yaklmovsky. using this subsystem a series of experiments was conducted to determine good criteria for initially partitioning a scene into atomic regions and merging these regions into a final partition of the scene along object boundaries. semantic  problemdependent  knowledge is essential for complete  correct partitions of complex real-world scenes. an interactive approach to semantic scene segmentation was developed and demonstrated on both landscape and indoor scenes  this approach provides a reasonable methodology for segmenting scenes that cannot be processed completely automatically at present and is a promising basis for a future fully automatic system. 
	i . 	i n t r o d u c t i o n 
     most computer analyses of r e a l - w o r l d scenes f i r s t attempt to p a r t i t i o n the image i n t o coherent regions corresponding to known objects   1   1  1  1   . regions provide a convenient basis f o r semantic analysis by reducing both the amount of d e t a i l and the ambiguities of i n t e r p r e t a t i o n found at the picture-element l e v e l . 
     an i n t e r a c t i v e scene i n t e r p r e t a t i o n system  isis  is being developed by stanford research i n s t i t u t e ' s a r t i f i c i a l i n t e l l i g e n c e center as a t o o l for constructing and experimenting w i t h manmachine and automatic scene-analysis methods t a i l o r e d for p a r t i c u l a r image domains  1  1   . a subsystem was developed to explore s y s t e m a t i c a l l y region-analysis techniques applied to several image domains. we summarize our most informative f i n d ings in t h i s paper. a more complete presentation 
of our results can be found in   1   . 
	i i . 	basic model 
     following brlce and fennema  1   we divide region analysis into two stages: first partition and region growing. the purpose of the first partition stage is to obtain a conservative initial segmentation of the image where each region consists of picture elements belonging to only one object. in the region growing stage  adjacent regions with similar characteristics are merged into a single region to simplify further the organization. the desired result is a set of regions corresponding to distinct objects in the scene. 
     region analysis is computationally expensive  making it desirable to obtain a first partition that is as coarse as possible without extending the starting regions beyond object boundaries. the common practice is to sample the picture to reduce resolution and then immediately combine adjacent 
samples with identical characteristics. when data are finely quantized or multidimensional  i.e.  when color and range data are available  demanding strict equality on all attributes can lead to an unnecessarily large number of regions  many of which are caused by quantization noise. it may be helpful  therefore  to classify each sample into a small number of categories and then to treat picture elements assigned to the same category as identical  1  1 . we have conducted experiments with several sampling and quantization schemes for obtaining first partitions of landscape and office scenes  and a few methods have proved empirically to be adequate. we report our findings in section iii. 
     following yaklmovsky  1   our region-growing algorithm proceeds by serially selecting the pair of adjacent regions in the current organization that are globally  most alike   and merging these into a single region. the order in which regions are merged is determined by a function that compares the similarity of a given pair of adjacent regions with the similarities of other pairs of regions that remain to be merged. a variety of criteria for region similarity have been used  including brightness contrast  1  1  and average color contrast  1 . we present experimental results with various similarity functions in section iv. 
     the experiments described in this report are illustrated by the landscape and indoor scenes in figure 1. the basic region analysis process is shown in figures 1 through 1. the first partition in figure 1 is based on the brightness values associated with the landscape scene shown in figure la  sampled to a 1 x 1 resolution. this partition includes 1 initial regions  half as many regions as individual picture elements. region growing proceeds sequentially by merging adjacent regions across the weakest remaining boundary in the present partition. the boundary strength is based on average absolute brightness and color difference. the results of merging arc illustrated  respectively  with 1  1  and 1 regions remaining  see figures 1 through 1 . 
i i i . first-partition experiments 

     the objective of the first partition stage is to group adjacent picture samples having similar attributes to obtain the fewest initial regions without a false merge occurring. in the example above  the picture was sampled to a 1 x 1 resolution; then adjacent samples with identical brightness were combined to form homogeneous atomic regions  figure 1 . we consider here some attempts to improve the quality of the first partition by using different sampling methods and different criteria for judging the similarity of adjacent samples. 
 the research reported herein was supported by the national aeronautics and space a d m i n i s t r a t i o n under contract nasw-1. 

1 

sampling experiments 

     we experimented with modal  mean  and straight sampling to determine which method is the most advisable for first partition. all experiments were performed on gray scale images using a 1 x 1 rectangular sampling grid. note that in scenes with periodic texture a random sampling strategy would have been necessary to avoid aliasing effects. 
     in modal sampling  figure 1   the gray level of each grid point is taken to be the most frequently occurring value of gray level for nearby points. the number of initial regions obtained in this manner is significantly reduced  by about onethird  because many small  noise  points  which 
occurred in the treetop and the ground  disappeared. some fine detail and contrast boundaries were lost  however  in the modal smoothing. mean sampling of the gray level in a small neighborhood around each grid point is a poor technique because it tends to smooth discontinuities  see figure 1 . 
     from experiments with the images presented here and several others  we concluded that f i r s t partitions based on a straight sampling of the gray-scale image taken through a neutral density filter contained most of the information necessary to arrive at a conservative partition of real landscape and indoor scenes. 
color quantization 

     the sampling experiments of the last section were based entirely on brightness information. the other extreme is to base the first partition exclusively on color information  with brightness normalized out. one way to accomplish this is to transform the original image into a two-dimensional color space based on the relative content of red  green  and blue at each point  using the model described in  1  . this color space can be quantized into uniform intervals  with image points falling into the same color quantum grouped together into regions. we found that the partitions obtained in this manner were consistently worse than partitions based on sampled brightness. major leaks occurred between semantlcally distinct regions in both landscape and indoor scenes. moreover  because of textural irregularities  the total number of regions in landscape scenes was greater than the number pro-
duced by partitions based on sampled brightness. 
     we tried to improve first partitions based on color quantization by selecting quantization intervals corresponding to characteristic colors of prominent objects. our attempts were unsuccessful in both landscape scenes  because of the overlapping hue distributions of the principal objects  and in indoor scenes  because interior surfaces are generally color coordinated and hues tend to cluster in a narrow range. 
extraction of distinguished objects 

     objects can often be extracted from the image prior to general partitioning by selecting contiguous collections of image points with distinguishing properties. for example  the sky was the only region in our landscape scenes that is brighter than 1  on a scale of 1 . extraction is especially effective when multisensory data are available  increasing the probability that particular objects 
will be distinguished along some dimension. by ex-
tracting distinguished objects sequentially  or  in general  hierarchically  we can take advantage of context reductions achieved by earlier predicates. for example  although the picture on the wall in figure la is a complex pattern  we were able to extract it by simple conditions on height  hue  and saturation once the wall samples were accounted for 
     table 1 presents a set of sequentially applied criteria developed interactively using isis for stanford research institute office scenes. points not classified by the criteria given in table 1 were partitioned on the basis of their sampled brightness. figure 1 provides a comparison of the partition obtained using these criteria with the partition obtained by sampled brightness alone. the simplification of the partition is clear from the comparison. 
     in landscape scenes objects are usually distinguished by texture and shape rather than by features at the image point level. consequently  object extraction techniques are more difficult to apply and we have not  as yet  been able to use them successfully. 
	iv 	merge priority experiments 
     the sequence of merges performed during region growing is ordered by nonsemantic measures of region similarity. the purpose of these experiments was 
to determine conservative similarity measures  which will defer questionable merges in the hope that the decision will be clarified or even rendered unnecessary in the context resulting from the execution of 
more reliable merges -
     we compared the quality of several different measures of region similarity by performing a first partition based on sampled brightness  and then by applying a global  best-first merge order based on each measure of similarity until only 1 regions remained in the scene. the results of the merge sequences were compared on the basis of how well they honored the correct organization on the scene. 
     figures 1 and 1 through 1 present the results of merging  down to 1 regions with six different measures of region similarity. each figure legend gives the formula used for computing the similarity of adjacent regions in each case. in these formulas  br . is the brightness seen through a neutral density filter  of the i t n image point on the boundary of region a  and brbi is the brightness of adjacent image points in region b; r a i   gai  and bai are the brightnesses of the ith boundary element from region a seen through the red  green  and blue filters respectively  and rbi  gb  and bbi are the corresponding brightnesses from region b; t&t ¡êft  and bfl are the average brightnesses over region a seen through the red  green  and blue f i l t e r s   and *b  kd  and bb are the corresponding averages over region b. 
     in figure 1  the similarity of adjacent regions was determined by averaging over sample points along the common boundary the maximum color contrast between any two picture elements drawn from the original  full-resolution  sampling neighborhoods on opposite sides of the boundary. this method was expected to overcome errors resulting from inadequate sampling; however  textured regions  such as the ground and the treetop  failed to coalesce before 

1 

before distinct smooth regions grew together. our best results were obtained using the measure of similarity applied in figure 1. in this case the similarity of two regions was computed conservatively using the maximum of both the boundary color contrast and the region color contrast as defined in the legends of figures 1 and 1. 
	v. 	semantic region growth 

     we saw in the merge priority function experiments of the previous section that  regardless of the nonsemantlc similarity criterion used  an erroneous merge is proposed well before a final partition is obtained. semantics must be used either to refine the boundary strength criterion so that it proposes fewer erroneous merges  1  or to block proposed merges that are incorrect. stepping through merges proposed by our best nonsemantic similarity criterion  we observed that serious false merges seldom occurred until the regions 
involved had grown sufficiently large to permit semantic interpretations based on region properties . this suggested that merging errors could be avoided on semantic grounds simply by refusing to merge regions with different interpretations. we tested this idea interactively by modifying the region growing algorithm to check semantic compatability before performing a proposed merge. merging is allowed only if both regions carry the same interpretation or if at least one of the regions is not yet interpreted. newly merged regions inherit the interpretation of their parents  or parent  if only one region is interpreted . when two uninterpreted regions are merged  if the size of the resultant regions exceeds a threshold  the program requests the experimenter to supply manually a correct interpretation. 
     this interactive region-growing algorithm partitioned both a landscape and an indoor scene with only minor errors  caused primarily by inadequate spatial sampling . in both experiments  the size threshold for manual interpretation was set empirically at seven samples. the final partition depicted in figure 1 was based on the first partition in figure 1b. initially  manual interpretations were provided for the 1  out of 1  first partition regions that exceeded threshold size. about 1 additional interpretations were provided during the subsequent analysis when uninterpreted regions attained threshold size by merging. approximately the same number of interpretations had to be supplied i n i t i a l l y and during region growing in the landscape scene. when our semantic region-growing algorithm was applied to the first partition of figure 1  we obtained the results shown in figure 1. in both cases there were seven distinct interpretations . 
	vi. 	conclusion and future plans 

     several experiments in automatic and interactive scene analysis using isis were performed. 
our positive results with the interactive  semantic regions. these outlines would provide most of the required region interpretations and also serve as a good initial partition from which detailed boundaries can be grown rapidly. 
     second  the semantic region growing algorithm provides a promising basis for a future automatic system in which region interpretations are deduced from local attributes and contextual constraints 
imposed by previously interpreted regions. the automatic system will have to deal with regions that are ambiguous at a given stage of partitioning. merges involving such regions will be deferred until the ambiguity has been resolved as a result of other  
more reliable merges. the use of semantics for blocking merges  rather than for altering the order in which merges are proposed   cf.  1 j  should sim-
plify training  since region labeling criteria and contextual constraints can be introduced or refined in direct response to specific merging errors as these errors are observed . 
