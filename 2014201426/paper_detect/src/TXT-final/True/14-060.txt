 
     first generation ai in medicine programs have clearly demonstrated the usefulness of al techniques however  il has also been recognized that the use. of notions such as causal relationships  temporal patterns  and aggregate disease categories in these programs has been too weak from our study of clinician's behavior we realized that a diagnostic or therapeutic program must consider a case at various levels of detail to integrate overall understanding with detailed knowledge  to explore these issues  we have undertaken a study of the problem of providing expert consultation for electrolyte and acid-base disturbances we have partly completed an implementation of abel  the diagnostic component of the overall effort. in this paper we concentrate on abll.s mechanism for describing a patient. called the patient-specific model  this description includes data about the patient as well as the program's hypothetical interpretations of these data in a multilevel causal network. the lowest level of this description consists of pathophysiological knowledge about the patient  which is successively aggregated into higher level concepts and relations  gradually shifting the content from pathophysiological to syndromic knowledge the aggregate level of this description summarizes the patient data providing a global perspective for efficient exploration of the diagnostic possibilities the pathophysiological level description provides the ability to handle complex clinical situations arising in illnesses with multiple etiologies  to evaluate the physiological validity of diagnostic possibilities being explored  and to organize large amounts of seemingly unrelated facts into coherent causal descriptions. 
1. introduction 
     we have studied difficulties arising in the operations of the  first generation  of ai programs in medicine and have undertaken the development of knowledge representation structures to support needed improvements. the description of a patient in existing programs such as internisi -i   pip   and mycin  1j starts from a single list of findings about the patient. using a database of associations between diseases and findings  or rules establishing those connections   these programs form an interpretation of the patient's condition which is essentially a list of possible diseases  ranked by a calculated estimate of likelihood or degree of belief in each. 
     researchers have recognized the need 1.1  lo use notions such as causal relationships  temporal patterns  and aggregate disease categories in the description of a programs diagnostic understanding  but the mechanisms provided lo do this have been too weak. for example  although causality appears as a term in descriptions in pip and internist 1. in both cases its use is limited to guiding the propagation of likelihood measures. these programs fail to capture the human notion that explanation should rest on a chain of cause-effect deduction although  the casnet/glaucoma  program uses a network of causally-related states and defines diseases as paths in this network  its primary reasoning mechanism is nevertheless the local propagation of probability weights. 
     similarly  it has been realized that a diagnostic or therapeutic program must consider a case al various levels of detail in order to integrate its overall understanding with its detailed knowledge. this insight also has not prevailed in the actual mechanisms provided in existing programs. 
     to explore the issues outlined here  we have undertaken a study of the medical problem of providing expert consultation in cases of electrolyte and acid-base disturbances. we have partly completed implementation of a program. abit.  which is the diagnostic component of our overall effort in this paper we concentrate on abel's mechanism for describinr a patient called the patient-specific model  psm       this description includes data about the patient as well as the program's hypothetical interpretations of these data in causal hierarchical networks. we describe the representations of medical knowledge and the processing strategies needed to enable abel to construct a psm from the initial data presented to the program about a patient fhe same representations and procedures will also be useful to revise the psm during the process of diagnosis  but we will concentrate here on the logically prior operation of building the psm. 
     our understanding of medical expert reasoning suggests that an expert physician may have an understanding of a difficult case in terms of several levels of detail. at the shallowest that understanding may be in terms of commonly occurring associations of syndromes and diseases  whereas at the deepest it may include a biochemical and pathophysiological interpretation of abnormal findings. for our program to reason al a sophisticated level of competence  it wilt need to share such a range of representations. the psm is  therefore  a multi-level causal model  each level of which attempts to give a coherent account of the patient's case this model also serves as the basis for an english generation facility that provides explanations of the program's understanding. 
     the psm is created by instantiating portions of abel's general medical knowledge and filling in its details from the specific case being considered. the instantiation of the psm is very strongly guided by initially given data  because the psm includes only those disorders and connections that are needed to explain the current case. instantiation is accomplished by five major operators. aggregation and elaboration make connections across the levels of detail in the 
psm by filling in the structure above and below a selected part of the network  respectively. in a domain such as abel's. multiple disorders in a single patient and the presence of homeostalic mechanisms requires the program to reason about the joint effects of several mechanisms which collectively influence a single quantity or slate. component decomposition and summation relate disorders at the same level of detail by mutually constraining a total phenomenon and its components; the net change in any quantity must be consistent with the sum of individual changes in its parts. the final operator  projection  forges the causal links within a single level of detail in the search for eiiologic explanations. the operators all interact because the complete psm must be self-consistent both within each level and across all its levels. therefore  each operation typically requires the invocation of others to complete or verify the creation of related parts of the psm. 
1. hierarchical representation of medical knowledge 
     based on our observation that a physician's knowledge is expressed at various levels of detail  we have developed a hierarchical multi-level representation scheme to describe medical knowledge and procedures lo instantiate this knowledge to describe a particular patient's illness. the lowest level of description consists of pathophysiological knowledge about diseases  which is successively aggregated into higher level concepts and relations  gradually shifting the content of the description from physiological lo syndromic knowledge. the aggregate syndromic knowledge provides us with a concise 
global perspective and helps in ihe efficient exploration of diagnostic possibilities  fhe physiological knowledge provides us the capability of handling complex clinical situations arising in patients with multiple disturbances  evaluating the physiological validity of the diagnostic possibilities being explored  organizing large number of seemingly unrelated facts and 
1 

formulating therapy recommendations and prognosis. finally. as the causalphysiological reasoning tends to be categorical and syndromic reasoning probabilistic  the hierarchical description allows us to blend together the use of categorical and probabilistic reasoning. 1  
1 multi-level description of states 
     medical knowledge about different diseases and their pathophysiology is understood to varying degrees of detail. while it may be easier for a program to reason succinctly with medical knowledge artificially represented- at a uniform level of detail  we must be able to reason with medical knowledge at different levels of detail to exploit all the medical information available. although this does not pose any difficulty in medical domains where the pathophysiology of diseases is not well developed  in a domain such as electrolyte and acid-base disturbances where  on the one hand  the pathophysiology of the disturbances is well developed  and on the other  the pathophysiology of many of the diseases leading to these disturbances is relatively poorly understood  we are constantly faced with this problem. 
     secondly  the information about a patient parallels the physician's medical knowledge about diseases and therefore also comes at different levels of detail. for example   serum creatinine concentration of 1  is at a distinctly different level than  high serum creatinine  1 and  lower gastrointestinal loss  than  diarrhea . we need some mechanism by which we can interrelate these concepts finally  in order to be effective in diagnostic problem solving and communicating with clinicians we ought to have the ability to portray the diagnostic problem in a small and compact space. yet to be efficacious  we must maintain the ability to take every possible detail into consideration. we have solved this problem by representing the medical knowledge in five distinct levels of detail from a deep pathophysiological level to a more aggregate level of clinical knowledge about disease associations. 
     bach level of the description can be viewed as a semantic net describing a network of relations between diseases and findings each node represents a 
     normal or abnormal physiological state and each link represents some relation  causal  associaiional. etc.  between different states. a state  interchangeably used with node  in the system such as  diarrhea  is represented as a node in the causal network. each node is associated with a set of attributes describing its temporal characteristics  severity or value  and other relevant attributes. a state is called a primitive-node if it does not contain internal structure and is called a composite-node if it can be defined in terms of a causal network of states at the next more detailed level of description one of the nodes in this causal network is designated as the focus node and the causal network is called the elaboration structure of the composiie node. the focus node identifies the essential part of the causal structure of the node above it. indeed  the collection of focal nodes acts to align the causal networks represented by different levels of the psm. we note that very often a composite node and its focal description at the next level share the same name; this is typical in english  where the level of detail of place names  for example  is often obtained from context and not encoded in the name used nodes that do not play a role as the focal definition of any node at a higher level are called non-aggregable nodes. they represent a dcuiiled aspect of the causal model which is subsumed under other nodes with different foci at less detailed levels of description. 


this information is represented in the knowledge base by decomposing lower 
gi loss into its constituents  and associating appropriate quantitative information with the decomposition . the loss of lower gl fluid would result in the loss of corresponding quantities of its constituents  in proportion to the total quantiiy of fluid loss  as shown in fig 1 therefore  an excessive loss of lower gi fluid without proper replacement of fluid and electrolytes would result in a net reduction in the total quantity of fluid in extracellular compartment  hypovolemia  because the concentration of k and hco1 in lower gi fluid is greater than in plasma fluid  there is a corresponding reduction in the concentration of k  hypokalemia  and hco-j  hypobicarbonatemia  in the extfacellular fluid finally  as the concentration of o and na in the lower gl fluid is lower than that in plasma fluid  there is an increase in the concentration of ci  hyperchloremia  and na  hypcrnatremia  in the extracellular fluid. hits is represented at the next level of description as shown in fig 1. fig. 1 shows the aggregation of this information along with some additional causes and consequences of lower gi loss at the next more aggregate level of detail the lower gi loss at this level is a non-aggregable stale and therefore docs not have an aggregation at the next level above. fig. 1 shows the description of the aggregate effects of diarrhea  one of the causes of lower gi loss . the summarization of the description of lower gl loss and diarrhea shown in fig. 1 is achieved through the use of link aggregation and elaboration  described in the next subsection. 

1 multi-level description of causal links 
　　a causal link specifies the cause-effect relation between the cause  the antecedent  and the effect  the consequent  states. in past programs  e.g.  pip. internist   causal links were described by specifying the type of causality  may-be-caused-by. complication-of. etc.   and a number or a set of numbers representing in some form the likelihood  conditional probability   importance  
etc.. of observing the effect given the cause or vice versa. we now believe that this simple representation of the relation between states is inadequate. the form of presentation of an effect and the conditional probability of observing it depends upon vanous aspects of the cause such as severity  duration  etc.  as 

1 

well as other factors in the context in which the link is invoked1   such as the patient's age. sex and weight  and the current hypothesis about the patient . therefore a causal link in the system  an object denoting the causal relation between a cause-effect pair  specifies a multivariate relation between various aspects of the cause and effect  and also specifies the context and assumptions which constrain the causal relation  as shown in fig. 1. 

     one important function of diagnostic reasoning is to relate causally the diseases and symptoms observed in a patient. these causal relations play a central role in identifying clusters that can be meaningfully aggregated in developing coherent diagnoses. the presence or absence of a causal relation between a pair of suites can change their diagnostic and prognostic interpreunions therefore  the system should and does have the capability of hypothesizing the presence or absence of a causal link. litis is the reason why links are objects in their own right rather than simple pointers between nodes. 
     to reason with a causal network representation effectively  a program must make conclusions about a node or link depending only on information that is locally available from the neighborhood of the mechanism in question. if nonlocal effects are to be invoked in causal explanations  they must be explicitly identified  e.g.. as pan of the context of the causal link  or else they corrupt our ability to reason with any portion of the network. if at some level of detail two distant phenomena interact  we must aggregate the description of the causal network to a level where the two phenomena are adjacent to one another. f urlher. because the causal relations specified by links are not guaranteed to be true under all circumstances  they represent strong associations  not logical truth   the validity of deductions degrades with every additional intermediate link. that is. a causal pathway containing a large number of links is less likely to be valid than one using only a few links. therefore  in order to explore a large diagnostic space  we must aggregate the diagnostic space lo a level where each link represents an aggregate causal phenomenon covering larger distances and thus minimizing the possibility of error in the deduction this ability to move from one level of description lo another is provided by the multi-level description proposed here. 
can be elaborated as follows: diarrhea causes lower gi loss  which causes dehydration. expressed at the next level of detail  the lower gi fluid loss can be described as consisting of the loss of water and sodium along with other electrolytes. the water loss in the presence of the reduced total quantity of extracellular sodium results in lower extracellular volume  which at the higher 
level of description is described as dehydration. 
1. reasoning about components 
　　one of the important areas of medical diagnosis not adequately addressed by the first generation of aim programs is the evaluation of the effect of more than one disease present in the patient simultaneously  especially when one of the diseases alters ihe presentation of the others. this problem does not place serious limitations on programs dealing with single problems such as the therapy of glaucoma or die diagnosis of bacteremia. but. in the case of electrolyte and acid-base disturbances where a large fraction of cases involve multiple diagnoses  the ability lo evaluate the joint influence of multiple disease and the ability lo decompose their influences on observable findings is particularly important. 
     for example  let us consider a patient with diarrhea and vomiting leading to severe hypokalemia  l.ct us also suppose that wc know about die diarrhea  but we are noi aware of die vomiting the observed hypokalemia is too severe to be properly accounted for by the diarrhea alone without the ability to decompose the hypokalemia  we would have to attribute it completely to the diarrhea or completely to something else. in either case1 we fail because the total state of hypokalemia is inconsistent with any of its possible single causes. thus  any single cause hypothesized by the program  e.g.. vomiting  will not be severe enough to account for the observed hypokalemia by ilself. as argued above  we need the ability to hypothesize that only a part of the hypokalemia is accounted for by diarrhea we introduce the notion that any pnmilive node in the causal hierarchy1 may have components  which are other primitive nodes which together make up the given node. 
　in our system this is achieved by a pair of operators: component summation and us dual component decomposition using our example  these operators allow u   to attribute only a part of hypokalemia to the diarrhea and lo compute tiiat part of hypokalemia mat is not caused by diarrhea  called the unaccounted component of the hypokalemia  these operations deal not only with the magnitude of some disorder but also with other attributes such as duration ihcy are implemented by associating with each primitive node a multivariate relation dial constrains atinbutes of ihe node and its constituents. component summation combines attributes of the components to generate the attributes of the joint node; component decomposition identifies unaccounted components by noting differences between the joint node and its existing components. these operations enrich the psm by instantiating and unifying together component nodes when the case demands them. this occurs whenever multiple causes contribute jointly lo a single effect an important case of this arises whenever feedback is modeled  because in any feedback loop there is at least one node acted on boui by an outside factor and by the feedback loop itself. 
     as the psm is built  component summation and decomposition operations can cause a node in the program's general knowledge to be instantiated as a node and its several components. if a node is primitive and there are multiple causes  die contribution of each cause is instantiated separately. then the profile of the combination is computed using component summation. the combined effect is then instantiated and connected to its constituents by 

1. the patient specific model 
     diagnosis is the process of actively seeking information and identifying the disease processes  causing the patient's illness in other words  diagnosis involves ascertaining the facts and their implications. the effectiveness of the information gathering process depends on the analysis of the available facts. from our experience with the existing diagnostic systems  1 . we arc convinced that a relatively simple representation of physician's analysis of patient's illness  i.e.. a list of disease hypotheses  is incapable of providing the desired level of expertise. the patient description must unify all the known facts about the patient  their interpretations  their suspected interrelationships and disease hypotheses in order to explain these findings. finally  we observe that at any point in diagnostic reasoning practiced by human experts  there are only a few significantly different explanations for the patient's illness under consideration. 
     in the program  each such explanation is represented by a patient specific model  psm  note that within each psm all the diseases  findings  etc.  are mutually complementary  while the alternate psm's are mutually exclusive and competing. in this section we describe procedures for building and extending a patient specific model based on the known findings and the program's medical knowledge. these operations are initial formulation to create an initial patient description from the presenting complaints and laboratory results  aggregation to summarize the description at a given level of detail to the next more uggregate level  elaboration to elaborate the description at a given level of aggregation to the next more detailed level and projection to hypothesize associated findings and diseases suggested by stales in the psm. 
1 initial formulation 
     from observing the clinical behavior of physicians  we have noticed that when presented with the chief complaints and other voluntarily provided information tn a case  the physicians set up a tentative diagnosis i his diagnosis serves as a specific framework which can be used in soliciting information and for organizing the incoming information. similarly the program when provided with the initial findings and a set of serum electrolyte values constructs a small set of psm's as its initial possible diagnoses  using the following steps first it analyses the electrolytes and formulates all possible single or multiple acid-base disturbances that are consistent with the electrolyte values provided and selects from them a small set which is consistent with the initial findings. next  it generates a pathophysiological explanation of the electrolytes based on each of the proposed acid-base disturbance. this is performed by elaborating all known clinical information to the pathophysiological level  where its relationships to the laboratory data are determined by projecting the unique causes and definite consequences of every node. then the program sumnian/es these pathophysiological descriptions to the clinical level by repeated application of aggregation operations. this process results in the initial description of the patient at every level of detail it is this description which is later modified by the diagnostic process as new information becomes available. note that each of the mechanisms  aggregation  elaboration and projection are used in the initial formulation of the psm. 
1 aggregation 
the aggregation process allows us to summarize the description of the patient's illness at any given level to the next more aggregate level the summarization of a causal network can be achieved by recognizing that a central node and its surrounding causal relationships may be expressed at a more aggregate level by a single node  called focal aggregation   and by summarizing a chain of relations between nodes by a single cau.al relation between the initial cause and the final effect nodes  called causal aggregation . 
1.1 focal aggregation 
     in aggregating a causal network we must first identify the nodes in the network that form anchor point  i.e.. landmarks; points of special significance  around which the causal phenomenon can be summarized. consider a partiallv-compktecl psm in which some nodes ai a detailed level of aggregation have been instantiated. any of these nodes is an anchor point if:  1  in the medical knowledge base such a node is the focus of some node at the next more aggregate level in the network  and  1  at least one such higher level node already exists or can be instantiated within the psm if it exists and the constraints on the focal link are satisfied  then the focal link connecting the two is insinuated if it does not exist  then both it and the focal link are insinuated finally  if more than one possible description of the node is consistent with the causal structure above  we defer the aggregation process until we can obtain some additional information to resolve this ambiguity. 
1.1 causal aggregation 
     once we have determined the focal aggregations for nodes at a given level of aggregation we need to describe the causal relations among these aggregate nodes the process of causal aggregation takes a node and its causes and aggregates the relauon between them according to one of three rules. first  if the node has no causal predecessors or if none of the causal paths leading into the node  called predecessor paths  have a node with a focal aggregation then the focal aggregation of the node either is an ultimate etiology or is totally unaccounted for and does not need to be causally aggregated. second  if every predecessor path has a node with a focal aggregation then the focal aggregation of the node is fully accounted for the causal aggregation is achieved by instantiaung a causal link between the focal aggregation of the node and the first focal aggregation in each path. finally  if only some of the predecessor paths have nodes with focal aggregauons then the focal aggregation of this node is partially accounted for the causal aggregation is achieved by decomposing the node into two components: 1  due to paths which have focal aggregation  called accounted component : and 1  due to paths that do not  called unaccounted component . then  the focal aggregation of the node is decomposed based on the decomposition at the present level and the two cases are treated as described above. 
1 elaboration 
elaboration is the dual of the aggregation operation described above and is used to elaborate the description of a causal network at a given level of 
1 

aggregation to the next more detailed level. this is achieved by elaborating each link in the causal network by first describing the cause and effect of the link at the next more detailed level  called focal elaboration  and then instantiating the causa  pathway between these detailed nodes  called causal elaboration  if the causal pathway being instantiated interacts with other causal paths in the psm the combined effects of the multiple causality are computed using component summation. ihe combined effects of this summation c;in then be aggregated to reflect the belter understanding of the causal phenomenon at higher levels of aggregation. 
1.1 focal elaboration 
     focal elaboration is the inverse of focal aggregation. to foc1lly elaborate a composite node the program computes the possible profile of the focal concept associated with the given node if a node at the next lower level of aggregation matches this profile and is consistent with the node above  it instantiates the focal link connecting the two. if not  it instantiates the focal node and the focal link connecting the two. 1.1 causal elaboration 
     causal elaboration is the dual of causal aggregation. a composite causal link can be elaboarded if the cause and the effect nodes of the link have focal elaborations to elaborate a composite link the program matches the causal path associated with the link starting at the focal nodes of the cause and the effect of the link with existing paths in the psm. if some part of this pathway is not present in the psm  the program recursively calls itself on each link in the pathway  starting from the focus node of the source  that is absent in the psm. if the link being recursively elaborated is a primitive link and if its effect node is not present in the psm. the effect node and the link are instantiated. otherwise  if the effect node is present  it matches the attributes of the cause and the effect nodes if they are compatible  it instantiates the link. otherwise  if the effect node is an observed node  the program decomposes the effect node and instantiates the link connecting the cause and the component of the effect node contributed by it otherwise  if the effect node is accounted for by some other cause  it instanuates the combined effect by summing the components of the two causes finally  it aggregates the effect node to revise the description at the next more aggregate level. 
1 projection 
the projection operation is used to hypothesize and explain the associated findings and diseases suggested by the slates in the psm. ihe projection operation is very similar to elaboration it differs from elaboration in that the causal relation being projected is hypothetical and therefore is not present in the psm furthermore  the projection operation fails if the causal description of the hypothesized link is inconsistent with the description in the psm at any level of aggregation as a result  the application of the projection operation cannot result in the decomposition of a fully accounted node  creating an additional unaccounted component and therefore degrading the quality of explanation. 
     we envision using the projection operation in the diagnostic problem solver for exploring diagnostic possibilities  evaluating their physiological validity and in generating expectations about the consequences of hypothesized diagnoses. 
1. an example 
     let us consider a 1 year old 1 kg patient who has been suffering from moderately severe diarrhea for the last two days and. as a result  has developed moderately severe metabolic acidosis and hypokalemia. the laboratory analysis of the patient's blood sample  serum analysis  is; na: 1  k: 1  ci: 
1. hc1 : 1. p c1 : 1. and ph: 1. 
1 initial formulation 
　　to exercise the program  let us provide it initially with only the laboratory data. based on these data  the program generates all possible acid-base disturbances that can account for the laboratory data. they are: 
1. metabolic-acidosis 
1. chronic-respiratory-alkalosis + acutc-rcspiratory-acidosis 
1. metabolic-acidosis -f chronic-respiratory-alkalosis 
+ acute-respiraiory-acidosis 
1. metabolic-alkalosis + chronic-respiratory-alkalosis + acute-respiraiory-acidosis. 
based on the complexity 1 likelihood and severity of each component  the list of possible disturbances is pruned and rank-ordered. the rank-ordered list of likely disturbances is 
1. metabolic-acidosis  severity: 1  
1. chronic-respiratory-alkalosis  severity: 1  
+ acute-respiraiory-acidosis  severity: 1 . 
the program now creates a psm1 for each possible acid-base disturbance and asserb in ii instantiations of the laboratory data  at the pathophysiological level  and the appropriate acid-base disturbances  at the clinical level . in the rest of the example we will focus on the first acid-base disturbance  namely metabolic acidosis. the program focally elaborates the metabolic acidosis through the intermediate levels until it reaches the pathophysiological level and thus identifies the amount of hco1 loss corresponding to the severity of the metabolic-acidosis. based on this information and the laboratory data  it instantiates the feedback loop corresponding to the acid-base homeostatic mechanism. next  it projects back each node whose cause can be uniquely determined and projects forward the definite consequences of each node in the psm we now have the pathophysiological level explanation of the electrolytes consistent with the diagnosis of metabolic-acidosis as shown in fig. 1. 

fig. 1. initially formulated psm 
1 aggregation 
     after the pathophysiological description is completed  this description is aggregated through the intermediate levels to the clinical level of detail. to illustrate this operation let us consider the low-serum-k-l node at the pathophysiological level. focally aggregating this node  we instantiate hypokalemia-! as shown in fig. 1. to determine the causal aggregation of this node at the next level of detail we must focally aggregate the first aggregable node in each path leading back; in this case low-ph-1. focally aggregating low-ph-1 we instantiate acidemia-1 next  we compute the component of lowscrum-k that can be accounted for by low-ph-1 and the component that remains to be accounted for because of the unaccounted k-loss-1. then we compute the mapping of these components at the next level of aggregation and instantiate normokalemia-1  the component accounted by low-ph-1  and hypo-
1 or if the effect node is a causal predecessor of some observed node that completely accounts for it 
1 triple disturbances arc quite rare and are generally not considered during initial formulation unless there is compelling evidence for their presence. 
1 the rank ordering of the diseases is based on occam's razor -- simpler hypotheses are preferred 
1 for case of explanation  the example described here uses a three level psm instead of the five level psm used in the program 
1 note here that as we arc at pathophysiological level  each link being projected is primitive thus  projecting back at this level can be restated as instantiating the cause 
ind the link connecting the cause and the effect node 
kalemia-1  due to unaccounted k-loss-1 . we then connect the normokalemia-1 to acidemia-1 and mark the hypokalemia-1 as unaccounted  indicated in the figure by an asterisk . next  in order to causally aggregate low-ph-1 we focally aggregate low-pcc -l and i1w-hco1-i into hypocapnia-1 and hypobicarbonatcmia-1 respectively. as each path leading back from low-ph-1 terminates in a node with focal aggregation  the focal aggregation of low-ph-1  acidemia-1  is fully accounted node. therefore  we connect acidemia-  to hypocapnia-1 and hypobicarbonatemia-1. this process is repealed for each aggregable node at the current level and then the whole process is repealed at the next level until we reach the clinical level of aggregation 
1 projection 
     to illustrate the projection operator  let us assume that the diagnostic component has hypothesized that the unaccounted component of hypokalemia at the clinical level  hypokalemia-1  is caused by diarrhea and wishes to determine if this is so and how this assumption fib with the current psm. the result of this operation is shown in fig. 1. 

fig. 1. psm extended to include diarrhea 
　　to project the link between hypokalemia and diarrhea the program evaluates the link to determine the attribute profile of the diarrhea consistent with hypokalemia-1 from which it determines the profile of diarrhea at the next more detailed level  it then attempts to match the causal path associated with the link  hypokalemia  -- lower-ghoss  -- diarrhea  at the next level. as none of the links in this pathway are present and as this causal pathway is consistent with the description at the next level  the program recursively calls itself on each link in the path. considering the first link  that is. hypokalemia  -- lowerghoss . it finds the causal path associated with this link at the next level of detail  low-serum-k  -- low-total-k  -- k-loss  -- lower-ghoss . matching this path with the description in the psm  it finds that all but one link  k-loss  - lower-ghoss  is already present. since this link is primitive  the program evaluates the profile of the lower-ghoss consistent with the unaccounted component of k-loss and instantiates it and the causal link connecting lowerghoss-1 to k-loss-1. to reflect this addition at the higher levels of detail  the program aggregates the low-serum-k-1  the effect node in the path . as the low-serum-k-1 is now a fully accounted node  the component structure associated with its focal aggregation  hypokalemia-!  is deleted and the causal links associated with the accounted component of hypokalemia-1 and an additional link from lowcr-gmoss-1 are connected to it. this process is repeated until we establish the relation between the diarrhea and hypokalemia at the clinical level. 
1 elaboration 
the process of elaboration is similar to that of projection described above and differs from it in two major ways. 1  the causal link and the associated nodes already exist in the psm at the higher level of aggregation and 1  we have already determined that the causal link being elaborated is valid. therefore if a causal pathway associated with the link at some level of detail is not consistent with the description in the psm. the program modifies the psm appropriately to accommodate the pathway. in the example being described the second  and more interesting  case does not arise  to demonstrate the elaboration process let us establish the relation between diarrheal and metabolic-acidosis-1 at the clinical level the result of elaborating this link is shown in fig. 1. 
1. english explanation 
　　to illustrate the program's understanding of the patient's illness at various levels of detail  an english generator was implemented to translate the psm at any given level into us english description ' the descriptions are given at three levels of detail in fig. 1. 
clinical level 
     this is a 1 year old 1 kg male patient with moderate diarrhea. his electrolytes are: 
	na: 1 	hco1: 1 	agap: 1 
	k: 1 	pco 1 : 1 
	c1.1 	ph:1 
     the diarrhea causes moderate metabolic acidosis  which causes mild acidemia. the acidemia and diarrhea cause mild hypokalemia and acidemia causes hyperventilation. all findings have been accounted for. 
intermediate level 
     this is a 1 year old 1 kg male patient with moderate diarrhea. his electrolytes are:.... 
     the diarrhea causes moderate lower gl loss  which causes moderate metabolic acidosis the metabolic acidosis along with moderate hypocapnia causes moderate hypobicarbonatemia. the hypobicarbonaiemia along with hypocapnia causes mild acidemia the acidemia and lower gl loss cause mild hypokalemia and acidemia causes hypocapnia. the acidemia also causes hyperventilation all findings have been accounted for. 
pathophysiological level 
     this is a 1 year old 1 kg male patient with moderate lower gl loss. his electrolytes are:.... 
     moderate lower gl loss  reduced renal hco1 threshold and normal hco1 buffer binding jointly cause no hco1 c h a n b e  e no hco1 change causes low ccf hco1. which causes low serum hco1 the low serum hoo  and low serum pcc 1 jointly cause lo* serum ph. the low serum ph causes k shift out of cells and causes increased respiration rate the increased respiration rate causes low serum pc1 . which causes noima  iico1 buffer binding the low scrum pc1 also causes reduced renal hco1     n o ' d and increased respiration rale causes increased ventilation. the lower gl loss and k shift out of cells jointly cause k loss the k loss causes low ccf k. which 
 causes low scrum k. all findings have been accounted for. 
fig. 1. english explanation at different levels of detail 
1. conclusion 
     we have begun a complex and challenging task: to reason about difficult medical problems with a representation that is capable of capturing the subtlety and richness of knowledge and hypotheses used by expert physicians. we have thus far succeeded in creating a representation and a set of structure building operators which are able to create a patient description based on causal models  multiple levels of detail in description  and the explicit use of components of quantities and states the various viewpoints on the patient represented by 
'different cuts through this complex description arc kept consistent by the 
 1 the generator makes use of the methodology and some of the code of a generator built by william swartoui as pan of an interactive system which explains and justifies portions of expert programs |1  

1 

operators. we believe that this approach displays a level of understanding not achieved before in medical reasoning programs or others which need to describe an organization of hypotheses or mechanisms at different levels of detail. 
     in continuing to develop our diagnostic and therapeutic programs  we believe that the organizational framework provided by the psm and its associated operators gives us a suitable machinery for exploring the choice of reasoning strategies and recording our programs' changing conceptions of a 
case. the rich network of interconnections in the psm constrains a diagnostic reasoner to generate only a relatively small number of coherent explanations  thereby reducing the space of possibilities to be investigated in seeking a diagnosis. in particular  enforcing the requirements of causal consistency  at each appropriate level of detail  on any tenable explanation provides a means of pruning the diagnostic space and permits us to try a  hypothesize and debug  reasoning strategy the multiple level interconnections of the psm also help us merge decisions and considerations we have described as categorical and probabilistic. although much work clearly remains before developments such as those described here form the fabric of truly successful medical consulting systems  we have proposed here a useful new representational basis for such work. 













1 

1 

1 









1 

1 

1 

1 

1 

