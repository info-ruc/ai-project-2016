                                            loopy sam                          ananth ranganathan michael kaess frank dellaert                    center robotics intelligent machines college computing                                      georgia institute technology                                   ananthkaessdellaertccgatechedu                        abstract      smoothing approaches simultaneous local      ization mapping slam problem robotics      superior common Ô¨Åltering ap      proaches exact better equipped deal      nonlinearities computing entire robot      trajectory Ô¨Åltering algorithms      perform map updates constant time exist      analogous smoothing method available aim      rectify situation presenting smoothing      based solution slam using loopy belief prop   figure  gaussian markov random field gmrf correspond      agation lbp perform trajectory ing illustrative smoothing mapping sam problem      map updates constant time loop    poses robot trajectory poses graph shown      closed environment slam prob      circles landmarks squares      lem represented gaussian markov ran      dom field gmrf lbp performed                                                        repeated marginalization poses recently introduced tech      prove lbp case equivalent                                                        niques sparse extended information filter seif      gaussseidel relaxation linear                                                        thrun et al  junction tree filter tjtf      ability compute marginal covariances efÔ¨Åciently                                                        paskin  present approximations informa      smoothing algorithm previously                                                        tion matrix sparse sparsity representation allows      stumbling block widespread use lbp                                                        constant time update Ô¨Ålter      enables efÔ¨Åcient recovery marginal      variances albeit approximately landmarks   contrast Ô¨Åltering approaches      poses Ô¨Ånal covariances overconÔ¨Å   compute current robot pose map smoothing      dent ones obtained spanning tree approach recovers complete robot trajectory map      gmrf conservative making useful     smoothing information matrix naturally stays sparse      data association experiments simulation time need approximations      ing real data presented                      smoothing incorporate new information past robot                                                        poses opposed Ô¨Åltering approaches update                                                        pose marginalized    introduction                                       number variables increases continuously smoothing  problem simultaneous localization mapping  realworld scenarios especially involving explo  slam core competency robotics ration larger matrix contains far entries  tracted large attention classical solution Ô¨Ålterbased methods dellaert eustice et al   slam problem uses extended kalman filter ekf filters efÔ¨Åcient smoothing limited  smith cheeseman  maintains joint distri number structure points observed repeatedly  bution current robot pose landmarks map case inability correct previous poses  form gaussian distribution updating lead poor results  variance matrix distribution requires time crucial limitation approaches based  ekf algorithm does scale large maps recent work information form gaussian recovering es  slam problem focussed improving time timate map robot pose involves matrix inversion  complexity solutions commonly used technique computationally infeasible large systems  update information form gaussian distribu case Ô¨Åltering approaches  tion information matrix dense through seif obtaining mean involves matrix inversion                                                    ijcai                                                    solution obtained cases through iterative addition algorithm incremental largely runs  process solves linear constant time advantages graphical slam  number iterations performed each step main  tain runtime bounds algorithm approximation  smoothing mapping  based assumption slam solution evolves                                                        begin reviewing sam framework given del  slowly time relinearization problem                                                        laert  smoothing framework aim  each time step required iterative method                                                        cover maximum posteriori map estimate entire  does yield covariance needed    Œî  maximumlikelihood data association estimate trajectory  xi  ‚àà  landmark locations                                                                   Œî  uncertainty landmark locations pose map  lj  ‚àà  given landmark mea    paper deals use loopy belief propagation    Œî  ‚àà             Œî   lbp weiss freeman  obtain approximate surements                odometry                                                               computed maximizing joint posterior  solution slam problem including marginal                              lz  variances map pose consider case trajectory landmark locations  map consists set features build smooth    ‚àó  Œî                                                                    Œò      argmax lz          ing mapping sam approach introduced dellaert                   Œò   updates joint distribution robot tra                                                                 Œî  jectory map using square root information form Œò  set unknown variables  gaussian distribution approach based robot trajectory landmark locations posterior  fact sam problem treated graph factorized using bayes law  ical model viewpoint gaussian markov random field                                                           lz ‚àù   ux lp  gmrf  winkler  inference                                                                                    m  formed using lbp                                                            xixi‚àíui                                                                         ‚àù           k                     provide constant time update algorithm                                  zkxi lj   wildÔ¨Åre algorithm estimating map robot                                  trajectory including marginal covariances naive xixi‚àíui motion model parameterized                                                                     implementation lbp requires    time update  odometry iand    ik jk landmark measure  marginal distributions number nodes ment model assuming correspondences ikjk  graph wildÔ¨Åre algorithm discards negligibly small mes known prior initial pose taken  sages nodes subsequently nodes constant usually origin priors remaining  received sent signiÔ¨Åcant messages updated poses landmark locations assumed uniform  show number nodes involved signiÔ¨Åcant assume gaussian motion measurement models  message exchange unless signiÔ¨Åcant event standard slam literature motion model  loop closing occurs complete graph given xi  fixi‚àíuiwiwherewi zeromean gaus  dated increasing time bound             sian noise covariance matrix qi similarly measure                                                                                           relinearization gmrf graph required ment equation given ik jk     sam problem nonlinear general performed normally distributed zeromean measurement noise  constant time using technique similar wildÔ¨Åre al variance rk  gorithm nodes changed relinearized practice linearized versions motion mea  need periodically differ surement models considered example use  ence current estimate linearization point extended kalman filter ekf approach slam smith et  exceeds speciÔ¨Åed threshold relinearization al  multiple iterations used obtain  linear time signiÔ¨Åcant update gmrf graph vergence minimum following assume    prove lbp gmrf equivalent gauss good linearization point available  seidel relaxation provides exact map estimates working iteration nonlinear optimization method  nodes covariances overconÔ¨Ådent shown dellaert  results sparse  approximate nature inference conservative linear squares problem Œ¥Œò                                                                           approximation covariances obtained restricting infer            m  ence spanning tree gmrf graph used ‚àó                     i‚àí                                                                         Œ¥Œò      argmin      f    Œ¥xi‚àí  Œ¥xi ‚àí ai   perform data association                                                                       qi                                                                    Œ¥Œò        terms related work closest relaxation based                                                                                                           k  approaches given duckett et al  frese duckett              ik       jk                                                                                  h  Œ¥xi   Œ¥lj ‚àí ck           unable compute marginal                              rk  covariances poses landmarks graphical slam               folkesson christensen  method      i‚àí                                                        fi   sparse jacobian fi lineariza  builds graphical model smoothing problem ap                                                                       Œî ‚àí    proach shares common features graphical slam tion point i‚àí      i‚àí  odome                                                                                        ik     jk  including ability modify data association Ô¨Çy try prediction error analogously hk jk respec  increase efÔ¨Åciency eliminating variables judiciously tively sparse jacobians hk respect change                                                    ijcai                                                                                                    ik jk  evaluated linearization point ik jk  constant proportionality         Œî                                              using formulation write edge potentials  ck  zk ‚àí hkxi lj  measurement prediction                     ‚àí                                                     œàxilj ‚àùn  yij  Œ∑ij  Œõij  whereyij  error Œ£ mahalanobis distance respect                                                            vector  xi lj   dropped index  covariance matrix Œ£ andweusethematrixgi  ‚àíid√ód                                                         corresponding pair ikjk convenience distribution  dimension xi avoid treating Œ¥xi specially                                                        parameters given    solution squares problem  given                                                                                                    Œ∑i           hi  linear aŒ¥Œò ‚àí                    Œî    ij              ‚àí                                                                  Œ∑ij                rk  ck         hessian matrix jacobian matrix obtained            Œ∑ij          jk                                                                                                        assembling individual measurement jacobians            ii   ij                                                                                          Œõ     Œõ            hi         hi   vector measurement errors Œî     ij   ij              ‚àí                                                                Œõij     ji   jj            rk                                                                            Œõij  Œõij           jk         jk  sam markov random field                                                        potentials edges linking poses deÔ¨Åned  show inference posterior  analogously  formed placing sam problem markov random    gmrf potentials singleton cliques similarly  field mrf framework graph mrf undi                      ‚àí                                                        deÔ¨Åned œÜyin    yi Œ∑i Œõi yi ‚ààx land  rected adjacency structure indicates variables           ‚àí                                                        Œ∑i ŒõiŒºi Œõi     follows   poten  linked common factor measurement constraint                                                                  tials œÜyi represent beliefs unknowns    pairwise mrf described factored probability den                                                        uniform prior exists mrf node yi Œ∑i Œõi  sity given                                                      set zero note setting Œõi zero equivalent            ‚àù   œÜyi    œàyiyj           having gaussian prior inÔ¨Ånite covariance                                                    ij                     belief propagation  second product pairwise cliques goal belief propagation case Ô¨Ånd  counted posterior  modeled pair marginal probability belief yi node yi ‚àà Œò  wise mrf singleton cliques correspond marginal sam graph complete characterization  prior distributions singleton measurements gps belief propagation algorithm gmrfs  unknown variables edge cliques correspond scope paper provide highlevel equations  motion measurement likelihoods respectively  data Ô¨Çow details weiss free    linear case considered previous section man   equations translate                                  beliefs computed using message passing algo                                                      rithm each node passes messages neighbors         ‚àí ln œÜyi ‚àù    xi ‚àí Œºi                                pi                     turn uses incoming messages compute belief                          i‚àí                       belief propagation guaranteed compute correct    ‚àí ln œàxi‚àíxi ‚àù    f   Œ¥xi‚àí  Œ¥xi ‚àí ai                                            qi      beliefs graphical model does contain loops                                                       proven Ô¨Ånds correct map solution                            ik       jk             ‚àí ln œàxi lj  ‚àù    h  Œ¥xi    Œ¥lj ‚àí ck        gaussian graphical models presence loops                                   rk                                                        means beliefs correct covariances  yi ‚ààx gives gaussian markov ran incorrect general weiss freeman   dom field gmrf corresponding linearized sam    lbp works repeatedly computing messages  problem note context sam problem liefs node graph starting constant mes  singleton clique factors set unity sages weiss freeman  synchronous  Ô¨Årst pose clamped origin        asynchronous fashion sweep graph iterated                                                        beliefs converge denoting current iteration    loopy belief propagation sam                   discrete time superscript belief parameters infor                                                                                       use loopy belief propagation lbp sam gmrf mation vector matrix node given                                                                                       t‚àí  solve linear  obtain map          mi      Œ∑i     mji               values unknown variables covariances                        j‚ààn                                                                                    i  ease computation use information form                           t‚àí  gaussian specify single pairwise clique potentials       mi   Œõi         mji              gmrf given  expressed using                      j‚ààni  information vector Œ∑ information matrix Œõand parameters message mij yj node yi  deÔ¨Åne information form                    node yj                                                                                               ‚àí          ‚àí        Œî                                              ji   ii       t‚àí          Œ∑ Œõ exp   Œ∑ ‚àí   Œõx              mij     Œ∑ij ‚àí Œõij Œõij  mi ‚àí mji                                                                                                                                                                                              t‚àí                                                                                    Œ∑ij  mi ‚àí mji       additive constant Œõ fullrank equation                                                                                                       jj    ji  ii        t‚àí ‚àí  ij   corresponds gaussian density                   mij  Œõij   ‚àí  Œõij Œõij  mi ‚àí mji     Œõij              xŒõ‚àíŒ∑ Œõ‚àín   Œº           use deÔ¨Ånitions                                                      ijcai                                                    algorithm  wildÔ¨Åre algorithm lbp               wildÔ¨Åre algorithm running time    push recently added nodes neighbors situations number edges large message devi      sam graph gve queue                 ations true special events                                  loop closures occur shown figure                                                                                                                                                            instances complete graph updated resulting       pop node compute messages myk          ‚ààn                                          complexity note special clause required handle               using                           instances  algorithm automatically updates            mt  ‚àímt‚àí                  yk    yk      push                  nodes graph message deviations die       update belief using            relinearization sam graph involves comput                                                        ing clique potentials new linearization points                                                        performed using wildÔ¨Åre algorithm differ                                                        ence deviations node beliefs                                                        respective linearization points used instead                                                        message deviations case variants                                                        possible technique delay relinearization                                                        belief deviations greater certain threshold                                                        given proportion nodes graph proportion                                                        approaches unity relinearization                                                        formed rarely second strategy perform                                                        linearization regular time intervals remains                                                        choice strategies depends type                                                        application environment size sam graph                                                          components loopy                                                        sam  algorithm each step new pose node new mea                                                        surement links possibly new landmark nodes added  figure  wildÔ¨Åre algorithm updates nodes signif sam gmrf Ô¨Åxed number lbp iterations  icant message deviations starting recently added performed using wildÔ¨Åre algorithm update  node normal operation left frontier graph  updated during loop closings right graph liefs nodes periodically relinearization performed  updated updated poses shown brown dark using variant wildÔ¨Åre algorithm means  changed nodes yellow light robot moving counter pose landmark nodes sam gmrf obtained  clockwise starting                     belief information vector matrix each node                                                        correspond map solutions trajectory                                                        map respectively    constant time loopy sam  each iteration lbp deÔ¨Åned  marginal covariances  number nodes graph slow useful show recover approximate marginal  especially trajectory included node count variances nodes lbp beliefs important  improve bound incremen use covariances bound search area possible  tal operation new nodes edges added correspondences data association usually  gmrf                                                 ing projection combined pose landmark uncer    key observation getting constant time algorithm tainty measurement space computation  each step nodes updated ex requires knowledge marginal covariances poses  perience actual change values nodes landmarks  ones recently added graph inverse belief information matrix each node  commence belief updation sweep iteration sam gmrf gives marginal covariance  lbp recently added node new mes general belief obtained lbp overconÔ¨Ådent  sages initially seen deviate previous values underconÔ¨Ådent proven overcon  large amounts deviations smaller Ô¨Ådent gaussian mrfs pairwise cliques weiss  graph message freeman  overconÔ¨Ådent covariances used  viations negligible smaller prespeciÔ¨Åed data association results valid corre  signiÔ¨Åcance threshold beliefs longer change spondences rejected Ô¨Årst conservative approxima  remaining nodes need updated                  tion use inverse diagonal blocks    wildÔ¨Åre algorithm called message hessian matrix marginal covariances  viations previous iteration spread like wildÔ¨Åre results overly conservative estimates  point origin gradually negligible illus better approximation obtained restricting mes  trated figure  algorithm implementation features sage passing spanning tree sam gmrf  queue nodes signiÔ¨Åcant message deviations spanning tree obtained deleting edges gmrf  incoming edges pushed summary algorithm inference exact conservative estimate  given algorithm                               true marginal covariances better Ô¨Årst                                                    ijcai                                                                                                                                update time step                                                                        update                                                                  messages                                                                      beliefs                                                                                                                                                                                                                                                                                                                                  time  sec                                                                                                                                                                                                                                                                                                                                                                   steps                                                        figure  runtime simulation consisting  steps                                                        times message belief computation total update                                                        step shown times obtained ghz linux machine                                                        using implementation algorithm ocaml note                                                        spikes end corresponding loop closures    figure  spanning tree gmrf graph edges col jacobian jande corresponding measurement  ored blue dark linear simulation covariances error result true                                                                                      simulation  ground truth shown blue dark t‚àí             t‚àí    ‚àíi  conÔ¨Ådent lbp covariances shown green light conserva mj ‚àí mij  Œ∑j      mkj   mj  tive covariance estimates obtained restricting bp spanning             k‚àànj  tree shown red dark                                                                ‚àíi                                                        mj  estimate mj considering node                                                                             t‚àí      ‚àíi         ‚àíi ‚àíi  order approximation maintenance spanning tree yj similarly mj ‚àí mij  mj sincemj yj                                                            ‚àíi  message passing require extra work span mj holds deÔ¨Ånition information form  ning tree extended each step gaussian substituting identities deÔ¨Ånitions Œ∑  use wildÔ¨Åre algorithm overall scheme Œõ  message equation  gives  mains constant time figure  illustrates nature result   approximation                                          using  belief equation                                                                                                                                                         mt      Œ∑       ‚àí      y‚àíi    loopy sam gaussseidel relaxation                                   kj kj       ij                                                                            j‚ààn          j‚ààn  prove section computing map solution                                using lbp gmrf equivalent modiÔ¨Åed form                                ‚àíi                                                                       Œ∑i  bi ‚àí   aij yj               gaussseidel relaxation commonly used solve                      j‚ààn  linear systems relaxation previously used                        context slam duckett et al  capable closely corresponds relaxation equation   recovering marginal covariances shortcoming lbp map computation lbp simply modiÔ¨Åed  overcomes equivalence map portion lbp version gaussseidel relaxation  relaxation interesting result connects technique  wellunderstood method linear algebra       results    relaxation solves linear aŒ¥Œò‚àíb  encoun  tered section  iterating set equations each linear gaussian simulations  updates value exactly unknown using Ô¨Årst present results applying approach  current estimate                   trolled simulation devoid nonlinearities simulation                aiiyi    bi ‚àí   aij yj             consisted environment randomly placed uniformly                              ji                      distributed landmarks robot followed large shaped                                                        Ô¨Ågure environment run included loop clo                                               ‚àà  sum variables iand sures ‚Äúwaist‚Äù Ô¨Ågure  Œòx                                               figure  gives results linear simulation consist                                                   begin proof noting message ing  steps trajectory length  total    given  rewritten                 number nodes sam gmrf                                 ‚àíi                                                         mji     jkiek ‚àí aij yj             veriÔ¨Åed algorithm  spikes        ‚àíi                                              graph corresponding loop closures clearly vis  yj estimate yj considering node ible spikes occur lbp update makes sweep  yi index measurement linking yi yj through graph instances                                                    ijcai                                                    
