       faithful integration description logics logic programmingâˆ—                            boris motik                               riccardo rosati               department science          dipartimento di informatica sistemistica                 university manchester uk            universita di roma â€œla sapienzaâ€ italy                          abstract                          consequences dl lp respectively                                                        component unlike existing approaches ap      integrating description logics dl logic pro                                                        proach allows user freely switch open      gramming lp produce powerful                                                        closedworld views arbitrary predicates dl lp      useful formalism dls lp based                                                        means example argue logic produces      quite different principles achieving seam                                                        intuitive practically useful consequences      integration trivial paper intro                                                          base approach logic minimal knowledge      duce hybrid mknf knowledge bases faithfully                                                        negation failure mknf developed lifschitz      integrate dls lp using logic minimal                                                         unify major approaches nonmonotonic      knowledge negation failure mknf lif                                                        reasoning obtain intuitive consequences hybrid      schitz  reasoning algorithms                                                        logic modify certain technical aspects mknf regard      tight data complexity bounds inter                                                        ing universe discourse equality      esting fragments logic                                                          functionfree logic programs usually decidable                                                        rules safe decidable dls exist    introduction                                       show restrictions dl lp sufï¬cient  integrating description logics dls logic programming obtain decidable hybrid formalism interaction  lp common framework produce powerful dl negationasfailure obtain decidability  formalism example lp rules used model apply wellknown notion dlsafety motik et al  straints exceptions dl knowledge bases adding  makes rules applicable individuals  rule layer dlbased web ontology language known present reasoning algorithms  owl currently central task development cases general positive negationas  semantic web language stack rule interchange failure nondisjunctive positive nondisjunctive strat  format rif working group world wide web iï¬ed nondisjunctive necessarily stratiï¬ed dl  sortium wc currently working standardizing safe rules finally present tight data complexity bounds  language dls lp based fundamen each case show combining dls lp  tally different assumptions dls fragments ï¬rstorder does increase data complexity lp  logic employ openworld semantics lp pro  approach related nonmonotonic exten  vides negationasfailure closedworld semantics sions dls donini et al  propose mknf    approaches integrating dls lp pro based extension dl alc lp rules  posed recently rosati  proposes approach unique assumption una baader hollun  terprets predicates dl knowledge base der  propose extension dls dlsafe default  openworld predicates occurring lp rules rules subsumed approach treat  closedworld semantics eiter et al  propose ment equality wellknown embedding default  loose coupling dls lp extending lp rules logic mknf lifschitz  finally bonatti et al  special atoms interpreted queries dl knowledge base  present extension dls circumscription    paper introduce hybrid mknf knowledge bases allows nonmonotonic reasoning unnamed individuals  integrate arbitrary description logic dl dis unary predicates decidability desired  junctive logic programs negationasfailure inte leave detailed proofs motik rosati   gration faithful sense provides exactly present proof sketches    âˆ—     work partially funded epsrc project reol  preliminaries  epc eu project tones fet fp    approach actually applicable ï¬rstorder fragment description logics approach applicable  work motivated primarily knowledge representa ï¬rstorder fragment dl satisfying conditions each  tion fragment description logic   knowledge base oâˆˆdlcan translated formula                                                    ijcai                                                     Ï€o functionfree ï¬rstorder logic equality iiit aruler nondisjunctive  positive   supports aboxesâ€”assertions form aan fact   safe variables occur  predicate ai constants dlandiii satisï¬ability positive body atom program ï¬nite set mknf  checking instance checking checking entailments rules hybrid mknf knowledge base pair                       form     aan  decidable assume fa deï¬ne semantics translating ï¬rst                                                    miliarity standard dl notation baader et al   order mknf formula follows                                                        deï¬nition  let hybrid mknf knowl  mknf   ï¬rstorder version mknf lifschitz                                                         edge base extend Ï€ follows  understood variant ï¬rstorder modal logic                                                        vector free variables  preference relation models implements                                                           Ï€râˆ€x  âˆ¨ âˆ¨ âŠ‚  nonmonotonic semantics syntax mknf obtained                                                                                             âˆ§ âˆ§ âˆ§ bâˆ’ âˆ§ âˆ§ bâˆ’                                                                                                extending ï¬rstorder logic modal operators  Ï€p       Ï€r     Ï€kk   Ï€o âˆ§ Ï€p  formula ttnwhereti terms ï¬rst      râˆˆp  order atomforÏ•  mknf formula Ï• Ï•                                                                                                  satisï¬able mknf model Ï€ ex  modal     atoms respectively Ï• ground does ists entails closed mknf formula Ïˆ written Ïˆ  contain variables Ï• positive does contain                                                        Ï€k mknf Ïˆ  Ï•tx formula obtained Ï• replacing  free occurrences variable term     mknf deï¬ned  lifschitz  considers arbitrary    assume apart constants used mknf models consider herbrand models sec  formulae countably inï¬nite supply constants tion  introduce restriction obtain intuitive  used formulae  denote herbrand logic compatible dls lp  universe signature assume signa der semantics lifschitz aa  mknf âˆƒx  ax  ture contains special equality predicate â‰ˆ interpreted aa does ï¬x interpretation to  congruence relation anmknf structure triple remedy interpret constants  imnwherei   herbrand ï¬rstorder interpretation standard data management applications donini et al  andm   nonempty sets herbrand ï¬rst  reiter  order ensure model large  order interpretations  satisï¬ability closed mknf assume countably inï¬nite supply constants  formulae mknf structure imn deï¬ned fol consider inï¬nite models dif  lows ï¬rstorder atom                        ferent constants interpreted different objects                                                          equalityfree ï¬rstorder formula satisï¬able ar  imn       iff true  imn   Â¬Ï•       imn  Ï•                    bitrary model iff satisï¬able herbrand model                    iff                                 inï¬nite supply constants occurring formula  imn   Ï• âˆ§ Ï• iff imn  Ï• imn  Ï•  imn   âˆƒx  Ï• iff imn  Ï•Î±x Î± âˆˆ fitting  theorem  equality  imn   Ï•   iff  Ï• âˆˆ    distinguish arbitrary herbrand models com  imn   Ï• iff  Ï• âˆˆ  patibility dls need â‰ˆ clearly                                                        terpret identity interpret congruence    symbols true false âˆ¨ âˆ€andâŠ‚ material implication ï¬rstorder formula equality satisï¬able model  interpreted usual mknf interpretation â€œtrue equalityâ€ iff satisï¬able model â‰ˆ  nonempty set ï¬rstorder interpretations letÏ• ordinary predicate interpreted congruence fitting  Ïˆ closed mknf formulae mknf interpretation    theorem  approach fully compat  model Ï• written  Ï•ifimm  Ï• ible dls  âˆ…thenk Ï• iff Ï•  each âˆˆ mknf model Ï• ï¬rstorder formula Ï• similarly logic fully compatible  model Ï• ii imm   Ï• each  âŠƒ lp ground atom Î±ifo  âˆ…thenk Î± iff  i âˆˆ  socalled preference semantics mknf entails Î± stable model semantics lifschitz   ï¬nally Ï• entails Ïˆ written Ï• mknf Ïˆifimm  Ïˆ  believe treatment equality matches com  each mknf model Ï• âˆˆ                 mon intuition negationasfailure version                                                        mknf  lifschitz  Ï•  aa âˆ§Â¬not ab    hybrid mknf knowledge bases                        model singleton universe                                                         entails â‰ˆ   consider quite unintuitive                                                              Ï•          deï¬nition  let dl knowledge base ï¬rstorder did say expect                                       â‰ˆ                                   functionfree atom ttn occurs different problems semantics      called dlatom atoms called nondl lp commonly based herbrand models follow  atomsanmknf rule   following form hi          âˆ’                                            practice approach Ï• mknf unsatisï¬able  bi  bi ï¬rstorder functionfree atoms       satisï¬able explicitly stating â‰ˆ        âˆ¨ âˆ¨ hn â†                                motik rosati  allow rules                             âˆ’          âˆ’              bm bk        tain modal nonmodal atoms order general                                                        ize known extensions dls rules swrl                                  âˆ’  sets hi bi  bi  called rule dllog rosati  show gen  headthepositive body negative body respectively eral rules converted rules modal atoms                                                    ijcai                                                     furthermore mixing modal nonmodal atoms produces  marriedjohn  notmarriedjohn respec  unintuitive semantics good practice use fully tively let  âˆª clearly âŠ‚  nonmodal fully modal rules                          marriedjohn   marriedjohnin                                                        tuitively contains â€œmore knowledgeâ€ pref  dlsafety making rules safe usually sufï¬ces make erence semantics mknf gives following semantics                                                            functionfree lp decidable show  mknf model mknf formula  Ï•                                                                                                  does hold mknf rules note mknf rules contain minimal knowledge justiï¬ed values atoms                                                                                                 modal atoms existing undecidability results ï¬rstorder example assuming married john true                                                                                                        combinations dls rules directly applicable implies consequences notmarried john                                                         each consequence justiï¬ed sense  theorem  safe hybrid mknf knowledge base                                                        longs minimal knowledge entailed knowledge  ground atom checking undecid                                                        base each notatom replaced value  able dl allows express axiom c                                                          understand open closedworld reasoning    c   makes equivalent inï¬nite set                               âˆƒ                                                                  teract formalism let assert spouse  elements accessed rules pbill nowbill married different people dif  rules safe words safety sufï¬cient ferent models  ensures marriedbill holds  condition domain independence ensure decidability models precondition  satisï¬ed  apply wellknown dlsafety restriction makes derive notmarriedbill highriskbillin  rules applicable individuals known way reasoning performed openworld seman  abox indepth discussion motik et al  tics modal operators allow â€œclosedworld  deï¬nition  mknf rule dlsafe variable glassesâ€ consider consequences models  occurs nondlatom body finally let assert spousebob ann pboband  hybrid mknf knowledge base dlsafe rules pann  derive discountbob  dlsafe                                          trast derive discountbill  rule     note dlatoms interpreted way non differs ï¬rstorder implication  requires  dlatoms dlsafety merely provides syntactic restriction spousex knownâ€”that hold ï¬rst  ensuring decidability hybrid mknf knowledge base order models spouse different different   pletpg obtained replacing each models   spousebill value yandthe  rule variables constants possible rule  â€œï¬reâ€ dlsafe  ways knowledge base kg pg called ground example expressed existing combinations  instantiation                                   dls lp rules eiter et al   lemma  dlsafe hybrid mknf knowledge base rive new dl facts approach rosati   kg ground instantiation Ïˆ ground mknf dl predicates interpreted openworld seman                                                                                    formula Ïˆ iff kg  Ïˆ                     tics occur     example                                               reasoning algorithms  consider determining car insurance premium based given nonground hybrid mknf knowledge base  various information driver convention dl algorithms ï¬rst compute ground knowledge base kg  predicates start uppercase nondlpredicates obtain mknf theory modal operators quan  lowercase letter let following hybrid mknf tiï¬ers program variables step exponen  knowledge base predicate means â€œpersonâ€      tial nondisjunctive datalog combined                         notmarried â‰¡Â¬married        complexity higher data complexity exponen                                                                                                          notmarried   highrisk      tial factor dantsin et al   expected                              âˆƒ                       logic mknf knowledge base                             spouse    married       just consider data complexitywhichis       notmarriedx â†  px marriedx     measured size facts size abox    discountx â† spousex px py   denote data complexity reasoning dl                                                               np    eâŠ†np           let assert pjohn ï¬rstorder seman   andset                                                                           simplicity write oandp instead Ï€k  tics models contain married john                           tain notmarriedjohn  applies closed Ï€  andÏ€     mknf models  clearly inï¬  worldassumptiontomarried default people  nite devise convenient ï¬nite representation                                                                                                           sumed married marriedjohn does adopt approach used rosati                                                        represent mknf model using ï¬rstorder formula  hold models  rule  â€œï¬resâ€ derives                 notmarriedjohn  implies highriskjohn Ï•   Ï•  formalize follows    preference semantics mknf strongly related deï¬nition  let hybrid mknf knowl  notion gelfondlifschitz reduct used edge base set katoms written kakisthe  ï¬ne stable models let mknf interpre    smallest set contains iallkatoms pg iia  tations consisting ï¬rstorder interpretations modal atom Î¾ each modal atom Î¾ occurring pg                                                    ijcai                                                       subset kaktheobjective knowledge algorithm  entailment general hybrid mknf kbs              ob     oâˆª                          formula kp       Î¾âˆˆp Î¾ partition algorithm notentailsdlkÏˆ  kak consistent obkp   Î¾ each Î¾ âˆˆ  input    let Ï• mknf formula  partition   dlsafe hybrid mknf knowledge base                                                          Ïˆ               Â¬  kak formula Ï•kpn  obtained Ï•     ground formula                    true    âˆˆ           false       output  placing each Î¾      Î¾       oth     true  Ïˆ false  erwise Ï•notpn obtained Ï• replacing each              Î¾ true Î¾ âˆˆ false ï¬nally                                                                  let ground instantiation  Ï•   Ï•   pn      pn                            partition nofkakg âˆªk exists                            dl    set modal atoms subset dlatoms  pgp evaluates trueand                                        Î¾  Î¾ âˆˆ sdl   sdl                                                                           oâˆªpdl  satisï¬able                                                                     mknf model strongly related particular parti  oâˆªpdl  Î¾ each Î¾ âˆˆ ndland  tion kak                                                                                                                                                each qaan âˆˆ qbbn âˆˆ                                                                       deï¬nition  mknf interpretation induces par    oâˆªpdl   ai â‰ˆ bi  â‰¤ â‰¤              kak     âˆˆ                                                                     tition       Î¾    implies      Î¾        Î³  pgnotpn each partition   Î¾ âˆˆ implies   Î¾                                    âˆ…                                                                             following key lemma shows each mknf model       Î³p âˆª  evaluates falseor                                      kak                       b   represented partition              oâˆªpdl  unsatisï¬able                                                                oâˆªpb    Î¾       Î¾ âˆˆ   lemma  let  mknf model kg            dl          dlor                                                                                                      b  partition kak induced equal qaan âˆˆ qbbn âˆˆ                             ob                                      b  set interpretations     kp                         oâˆªpdl   ai â‰ˆ bi  â‰¤ â‰¤    ï¬nd mknf model kg need ï¬nd      following conditions holds  partition kak different ways Ïˆ  âˆˆ  different types rules                                  ii Ïˆ  Â¬ âˆˆ                                                          return true return false  general case disjunctive datalog gen  eral case guess partition kakthisis  captured algorithm                               contradiction mknf model kgfi                                                        nally condition  ensures   Ïˆsokg   Ïˆtheâ‡  theorem   let dlsafe hybrid mknf knowl                                                        direction analogous  edge base Ïˆ Â¬  ground atom                                                           notentailsdlkÏˆ returns true iff   Ïˆ runs computed polynomial time size                                                                                                 data complexity                                    nonground rules bounded partition                                                        guessed condition  checked time polyno  proof sketch â‡’ifnotentailsdlkÏˆ returns truea mial size kg checking conditions â€“   partition kak satisfying conditions al requires polynomial number calls oracle running  gorithm  exists show    obkp  steps performed disproving                                                                                                mknf model kg condition  dition  requires guessing partition  poly  sistent dlatoms condition  nomial number calls oracle running  sistent nondlatoms nondlpredicate performed validating condition                                                                                           ee  obkp  qaan hold qbbn âˆˆ performed  algorithm runs   obkp  ai â‰ˆ bi condition    âˆ…  condition  imm  pgp each âˆˆ  furthermore values katoms determined positive programs positive hybrid mknf knowl  nsoimm    pg clearly imm    edge base iff  each smodel                                                                                                            imm   kg assume mknf   each msincek positive mknf model                                        modelâ€”that mknf interpretation exists exists  âŠ† analogous case                                            âŠƒ    kg each âˆˆ    positive disjunctive datalog words positive                                induces partition  kak   queries need ensure preference semantics                                                                                Î¾ implies  Î¾wehavep   âŠ‚   mknf let  notentailsdl algorithm                                     represent  âˆª   partition algorithm  condition                                      âˆ… lemma     obkp   adapting proof theorem  following                âˆ… obkp  satisï¬able condition  validated imm  Î³p n âˆª  each i âˆˆ  theorem  let positive dlsafe hy                                           âˆª        brid mknf knowledge base ground atom  invalidates condition ï¬nally                   clearly consistent invalidates conditions notentailsdl returns true iff    condition  hold n âˆª which runs data complexity                                                    ijcai                                                     positive nondisjunctive programs nondisjunctive â€¢ each body atom Î¾ reachp âŠ† headkÎ»r                                                                                                  â‰¥Î»r  positive construct deterministically obkp   Î¾ each âŠ† headk ei  bottomup fashion easily show     ther obkp âˆªp    Î¾ obkp âˆªp  unsatisï¬able   implies âˆª  mknf interpreta                                                           stratiï¬ed stratiï¬cation Î» exists stratiï¬  tions immediately implies following                                                        cation Î» partitions strata Ïƒi   Î»rithese  theorem  each positive dlsafe nondisjunctive hybrid quence strata ÏƒÏƒn identiï¬ed Î»  mknf knowledge base mknf model     called stratiï¬cation  deï¬nition  positive nondisjunctive dlsafe hy stratiï¬cation ensures deriving atom Î¾ stra  brid mknf knowledge base rk dk tk oper tum Ïƒi does change values kandnot  ators deï¬ned subsets kak follows      atoms strata iand  â‰¤  respectively exam     ss  âˆªk                                  ple consider knowledge base dl propositional                     contains rule form         â‰¡   âˆ¨   âˆ§  â‰¡Â¬                    bi âˆˆ each  â‰¤ â‰¤   logic               contains rules                                                          â†        â†                                                                                        ordinary datalog    dksk   Î¾  Î¾ âˆˆ kak oâˆªsdl  Î¾âˆª         stratiï¬ed evaluating ï¬rst rule derive raf            qb   qa  âˆˆ                                           dl      ter evaluate second rule derive sbut                  oâˆªsb     â‰ˆ    â‰¤ â‰¤                   dl                       objective knowledge âˆ§ âˆ§oand implies Â¬q    tksrks   âˆª dks                               invalidates atom body ï¬rst rule                                                        intuitively deï¬nition  ensures interaction    operator tk monotonic lattice subsets                                                      tween  derived facts does happen clearly  kak âŠ† implies tks âŠ† tks  rk                                                        checking stratiï¬cation difï¬cult general  monotonic similarly case datalog dk                                                        employs una rule contains dlatom  monotonic ï¬rstorder logic monotonic                                                        head stratiï¬cation checked usual  knastertarskiâ€™s theorem tk ï¬xpoint                Ï‰                                       case interesting allows deï¬ne complex  denote  easy show following                                                      straints dl knowledge bases show  theorem   let positive nondisjunctive dlsafe compute models stratiï¬ed program                                        ob   Ï‰   hybrid mknf knowledge base         ktk                 âˆ…                                    deï¬nition  let ÏƒÏƒk stratiï¬cation dl  iifm   thenm  single mknf model   safe mknf knowledge base  sequence subsets  iiifk mknf model model equal           ka                           âˆ…                                   Ï‰     pc             uuk    Ïƒ  inductively deï¬ned  iii data complexity computing tk             â‰¤         Ï‰               âˆª                                                                  ui  tÏ‡i Ï‡i  uiâˆ’   Ïƒi Ïƒi ob                                            Ï‰                                            true         proof sketch clearly  tk ï¬x tained Ïƒi replacing each Î¾ uiâˆ’ Î¾                                                                                         Ï‰  point tk  pgifm mknf model   false finally let uk  uk                                          mknf interpretation âŠƒ  kg     following theorem analogous case ordinary  each i âˆˆ  exist induce partition                                                   stratiï¬ed datalog   kak âŠ‚  clearly tkp                                                     theorem  let stratiï¬ed dlsafe mknf knowl    âˆˆpgorp                        Ï‰                                edge base    obku Ï‰  regardless  consistent minimal ï¬xpoint tk                    Ï‰                                                          stratiï¬cation used compute  following claims hold  proof ii analogous iii ordinary datalog                uk                                                        iifm   âˆ…thenm  mknf model kiiifk  rks computed polynomial time number                                                        mknf model model equal iiithe  atoms kak linear size pg computing                      Ï‰                                                             data complexity computing uk   dks  requires polynomial number calls oracle  running finally number iterations bounded  size kak implies claim           nondisjunctive nonstratiï¬ed programs                                                        nondisjunctive nonstratiï¬ed knowledge base                               obkt Ï‰     entailment checking     iff       aand    knowledge base Î³  pgnotpn algo  Â¬      ob   Ï‰            iff  ktk                                rithm  nondisjunctive positive use                                                        orem  ensure preference semantics mknf  stratiï¬ed programs ï¬rst deï¬ne notion stratiï¬ca deï¬ne nondisjunctivenotentailsdlÏƒ Ïˆ                                                                                               Ï‰   tion appropriate mknf programs                    algorithm  replace condition  tÎ³   deï¬nition  let nondisjunctive hybrid theorem  nondisjunctive nonstratiï¬ed hybrid                                                                                 Â¬  mknf knowledge base Î»  pg â†’  function assign mknf knowledge base  Ïˆ        ground                                                                         nondisjunctive entails dlk               âˆˆpg                                     atom algorithm                       Ïˆ  ing each     positive integer Î»  integer                                                 âˆˆ â‰¤â‰¥letheadk set head turns true iff   Ïˆ runs data complexity ep   atoms rules âˆˆpg Î»r     Î»  stratiï¬cation conditions hold each âˆˆpg  data complexity                                                â‰¤Î»r    â€¢ each body atom Î¾ reachp âŠ† headk         determine data complexityâ€”the complexity                                            Î»r      obkp   Î¾ each âŠ† headk ei  measured sizes abox facts pâ€”      ther obkp âˆªp    Î¾ obkp âˆªp  unsatisï¬able checking entailment hybrid mknf knowledge base                                                    ijcai                                                     
