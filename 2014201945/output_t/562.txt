     conditional constraint satisfaction logical foundations complexity                 georg gottlob                 gianluigi greco                  toni mancini           computing laboratory            dip di matematica       dip di informatica sistemistica             oxford university           universita della calabria universita di roma â€œla sapienzaâ€           ox qd oxford uk              rende italy            roma italy      georggottlobcomlaboxacuk       ggrecomatunicalit          tmancinidisuniromait                        abstract                            ccsps proposed dynamic csps                                                        mittal falkenhainer  csps tailored sup      conditional constraint satisfaction problems cc port conditional activation variables constraints      sps generalizations classical csps sup used model diagnosis structural design      port conditional activation variables conï¬guration problems example application      straints despite emerged ccsps  think automated personal pc conï¬gurator      context modelling intrinsic dynamism devoted assemble pc components conditional      diagnosis structural design product conï¬g constraints require components added      uration applications complete characterization current conï¬guration depending choices      computational properties expres motherboard does embed videocard      siveness missing fact aim pa compatible added      precisely face open research issues despite emerged ccsps framework      ccsps formally characterized terms efforts spent design specialized algo      suitable fragment ï¬rstorder logic second rithms efï¬cient solution soininen et al       complexity basic reasoning tasks cc  bowen bahler  sabin et al  gelle falt      sps studied establishing completeness results ings  keppens shen  aspects      ï¬rst second level polynomial investigated research questions      hierarchy finally motivated hardness fact open instance expressiveness      sults island tractability ccsps identi complexity issues arising setting par      ï¬ed extending structural decomposition meth  tially studied literature soininen et al       ods originally proposed csps                 bowen bahler  mittal falkenhainer                                                         importantly differently case classical    introduction                                       csps classes instances efï¬ciently                                                        solvable singled pearson jeavons  constraint satisfaction static framework original  gottlob et al  island tractability known  formulation used model solve deci ccsps identiï¬cation instead crucial appli  sion problems scenarios uncertainty dynamism cations real world scenarios  come play constraint satisfaction problem aim paper precisely shed lights  csp instance dechter  basically triple  var         var                                   aspects face research questions make           ï¬nite set variables ï¬ analysis formal shall exploit logicbased charac                                         nite domain values  cccq   ï¬nite                                                                                                       terization csp instance cf kolaitis vardi    set constraints each ci pair siri inwhich pair Ï† dwhered constraint database     âŠ† var                                 âŠ†    si  si       called constraint scopeandri    set constraint relations ri each constraint  called constraint relation solving csp ci siriandÏ† âˆƒfoâˆ§ sentence ex  stance simply mean determining sub istentially quantiï¬ed ï¬rstorder formula negations  stitution Î¸  var â†’ satisï¬es constraints disjunctions relational vocabulary consisting    remove assumption variables atoms risi framework investigate  mains values constraints known class constraint satisfaction problems build  change time generalized csp frame âˆƒfoâ†’âˆ§ fragment ï¬rstorder logic consists  works proposed literature formulas obtained extending âˆƒfoâˆ§ im  verfaillie jussien  references plication connective â€œâ†’â€ rationale approach  paper focus core extensions enhancing âˆƒfoâˆ§ implication connective  sidering framework conditional constraint satisfac mathematically wellfounded approach model conditional  tion problems ccsps                                activation variables exempliï¬ed                                                      ijcai                                                     example  consider pc conï¬guration scenario ifÏ†x  Ïˆz foâ†’âˆ§thenÏ†x  âˆ§ Ïˆz  âˆƒfoâ†’âˆ§ formula                             foâ†’âˆ§                                                                                     âˆƒm  motherboardm âˆ§ hasnovideom  â†’               ifÏ†    foâˆ§ Ïˆ xy  foâ†’âˆ§then                         âˆƒvc  ï¬tmv  âˆ§ cost vc     Ï†x  â†’âˆƒyÏˆ x y  foâ†’âˆ§  states intuitively motherboard needed assem set variables Ïˆ denoted vÏˆ  ble pc embedded video example  following formula Ïˆ âˆˆâˆƒfoâ†’âˆ§ adds  videocard ï¬tting requirements chosen requirements conï¬guration constraints  additional cost                     example  names shortened simplicity                      âˆƒ    fact show foâ†’âˆ§ formulas characterize âˆƒmmm    âˆ§ hm â†’âˆƒvc fmv     âˆ§ cvc  precise logical sense class ccsps based          âˆ§ em â†’  bm â†’âˆƒhgmh  result embark systematic study âˆƒfoâ†’âˆ§  summary                                           vÏˆmvch                                                                                                            âˆƒ  Â£ investigate expressive power ccsps depict given constraint database foâ†’âˆ§ formula                                                                           ing section  clear picture relationships Ïˆ denote Ïˆ constraint satisfaction problem   logicbased csp formalisms results com instance deciding assignment variables Ïˆ sat                                                                                  parison graphically summarized figure       isï¬es constraints   Â£                                                       note presence implication    section  study computational complexity nective differently standard csps formula Ïˆ âˆˆ   basic reasoning tasks ccsps considered                                                        âˆƒfoâ†’âˆ§  satisï¬ed partial assignments vÏˆ   case interested ï¬nding generic solu formally partial assignment Î¸ Ïˆ mapping   tion case solutions reï¬ned means subset vÏˆ values Î¸reduct Ïˆ   proorders analysis summarized fig formula Î¸Ïˆ resulting Ïˆ  applying sub   ure  emerges reasoning ccsps intractable stitutions Î¸ variables Ïˆ  replacing   hardness membership results established atoms variable vÏˆ vÎ¸ occurs   various classes ï¬rst second level poly â€œfalseâ€ vÎ¸ denotes variables domain Î¸   nomial hierarchy                                    solution Ïˆ partial assignment Î¸ Î¸Ïˆ  Â£ motivated complexity results section  evaluates true denoted Î¸Ïˆ   turn identify tractable classes âˆƒfoâ†’âˆ§ formulas                                                        example  consider database containing rela   issuing restrictions constraints interactions                                                        tions    mv   bad news show decomposition methods tra                                                          vc vc     ditional csps guarantee tractability ccsps                                                         mh followings assignments par   nphardness satisfiability problem                                                        tial         Î¸  mmvvcc   holds class ccsps constraints inter                           actions modelled acyclic primal graph         Î¸   mmhh   dechter                                 note Î¸ solution Ïˆ                                                        hand Î¸reduct Ïˆ evaluates true   Â£ major reason failure traditional decompo   sition methods primal graph obscures real                   âˆƒfo   nature interactions occurring ccsps  expressiveness     â†’âˆ§ formulas   variables activation section  introduce ï¬rst crucial questions ccsps relate   special graphical representation ccsps called impli approaches deal conditional activation vari   cation graphandshowthatsatisfiability   feasible ables constraints expressive   logcfl polynomial time instances precise logical sense classical csps   implications graphs acyclic gener questions answered section   ally bounded treewidth robertson seymour  let csp formalism formalism modelling                                                        constraint satisfaction problems subset fo let                                                                                           âˆˆ          âˆƒfoâ†’âˆ§    formulas syntax semantics           constraint database formula Ï† let Ï†                                                        denote set solutions set variables  section propose framework modelling condi                                                        vletsÏ† dv denote set obtained sÏ†  tional activation variables constraints csps stricting each solution variables  based extension fragment âˆƒfoâˆ§                                                          let csp formalisms  say  logical implication formalized                                                        weakly simulates each Ï† âˆˆ exists    âˆƒfoâ†’âˆ§  sentence vocabulary constraint                                                        Ï† âˆˆ each constraint database sÏ†  relations formula âˆƒ       belongs                      xÏ†x          Ï†                    Ï†   vÏ† say expressive iff  fragment foâ†’âˆ§ ï¬rstorder logic deï¬ned follows simulates does simulate fiff simulates   â€œtrueâ€ â€œfalseâ€ foâ†’âˆ§                  viceversa equivalentiff does                                                                                                      atom form rx  âˆˆrisinfoâ†’âˆ§      simulate andf does simulate  say                                                        incomparable                                                      ijcai                                                                                                             possible show details omitted lack space                                                        constraint Ï€ legal assignment Î¸ satisï¬es                                                        iff corresponding partial assignment Î¸ ÏˆÏ€ satisï¬es                                                        subformula Ï†c âˆ€ditissÏ€ dsÏˆÏ€                                    âˆƒ                       surprisingly ccsps previously simulated          figure  expressiveness foâ†’âˆ§          means different logicbased frameworks instance                                                                                  armed notions compared expres bowen bahler  expressed ccsps means                                                        fof logic bacchus walsh  discussed  siveness âˆƒfoâ†’âˆ§ conditional csps ccsps                                                        rich formalism implications simulated nega  âˆƒfoâˆ§  positive existential disjunctive frag                                                        tions disjunctions introducing speciï¬c propagation  ment âˆƒfoâˆ¨âˆ§ fo results summarized figure                                                         method characterizing method enforces gener    comparison conditional csps                 alized arcconsistency precise logical characteriza                                                        tion ccsps unknown clear  ccsp speciï¬cation Ï€  tuple var  var  cc ca   var set variables var âŠ† var set theorem  ccsp simulates âˆƒfoâ†’âˆ§  initial variables intuitively variables initially            âˆƒ  â€œactiveâ€ set constraints partitioned proof sketch let Ïˆ foâ†’âˆ§ formula build                                                        ccsp  Ï€Ïˆ follows atoms converted  compatibility ccandactivity ca constraints                                                        compatibility constraints each subformula    compatibility constraints constraint atoms tra                    ditional csps activity constraints follow Ï† x  â†’âˆƒyÏ† x y  Ï†  cx âˆ§Â·Â·Â·âˆ§ckx                                            rv                                                             ing kinds require variable rv cvvkâ†’  al y  yym create Ã— fresh variables yi  ways require variable arv vvkarvâ†’  require  â‰¤ â‰¤  â‰¤ â‰¤ Ã— activation constraints                                                                                         â†’rn                                        rv           rv   rn vvk   require arn  form cjx â†’y cjx â†’ym  â‰¤ â‰¤ arv             arn            â†’                   âŠ†var                                             arv   vvk     vvkv                   constraints form  â†’ yi shown                                                                                  ccsp instance pair Ï€ whereÏ€  speciï¬  each database sÏˆ dsÏ€Ïˆ dvÏˆ            cation constraint database legal assignment interestingly Ïˆ lefthand side im                                    var   Ï€   partial mapping Î¸ variables domain plicative formula constraint atom encoding           values asolution legal assignment  adjusted use fresh variables show  var  âŠ†v             Î¸   Î¸ satisï¬es active compatibility stronger kind simulation âˆ€d sÏˆ dsÏ€Ïˆ  straints compatibility constraints variables  vÎ¸and Î¸ satisï¬es activity constraint corollary  ccsp âˆƒfoâ†’âˆ§ equivalent    â€¢warvâ†’ satisï¬ed wâŠ†vÎ¸ implies âˆˆvÎ¸       leaving section note mittal falken                  rv                                    hainer  solutions ccsps required    â€¢ cvvkâ†’v  satisï¬ed vvkâŠ†vÎ¸                                                        subsetminimal fact simulation techniques      Î¸vÎ¸vk âˆˆ implies âˆˆvÎ¸                                                        orem   case left sides implications    â€¢warn               wâŠ†v              âˆˆv         â†’  satisï¬ed    Î¸ implies    Î¸        straint atoms established onetoone correspondence                  rn    â€¢ cvvkâ†’v  satisï¬ed vvkâŠ†vÎ¸   tween solutions ccsps assignments âˆƒfoâ†’âˆ§      Î¸vÎ¸vk âˆˆ implies  âˆˆvÎ¸ formulas properties solutions pre  usual set solutions denoted sÏ€ served formal results omitted                    âˆƒ    show foâ†’âˆ§ formulas fact el  comparison logics csps  egant mathematicallyfounded characterization ccsps                                                        comparison csps ccsps proposed  theorem  âˆƒfoâ†’âˆ§  simulates ccsp                  soininen et al  focusing knowledge repre                       var var                     sentation perspective shown ccsps  proof sketch let Ï€      cv  build modular representable standard csps intuitively  âˆƒfoâ†’âˆ§  formula ÏˆÏ€  âˆƒvar  var       Ï†cwhere                                     câˆˆcc âˆªca           small changes ccsp result signiï¬cant changes  Ï†c obtained follows                            corresponding csp encoding   â€¢ is compatibility constraint cvvkthen based logical equivalence ccsps                             â†’                âˆƒ    Ï†     âˆˆvvkvar dom         foâ†’âˆ§    formally compare ccsps   â€¢ activity constraint cvvkâ†’rv  Ï†c given csps fact prove ccsps formulas                                                        âˆƒ                                   âˆƒ    cvvk â†’ domv                            foâ†’âˆ§ â€œsimulatedâ€ foâˆ§thear                                                        gument way encode â€œâ†’â€ connective  note activity constraints fact simulated                                                        means conjunctions turn â€œâ†’â€ encode dis  rv compatibility constraints cf mittal falken                                                        junction atoms following relationships hold  hainer  wlog assumed ex  istence monadic relation dom listing possible values theorem  âˆƒfoâ†’âˆ§  expressive  variables â€” relation simulation âˆƒfoâˆ§  incomparable âˆƒfoâˆ¨âˆ§  possible required intricate                                                           proofs reported extended version paper available  struction Ï€            Ïˆ                                           wwwunicalitâˆ¼ggreco                                                    ijcai                                                       complexity reasoning ccsps                            â€”       â€œâŠ†â€        â€œâ‰¤â€        â€œâ€                                                      checking      conpc    conpc    conpc  let Ïˆ   ccsp instance intrinsic complexity                    Î£p      npolog  np                                                     relevance   npc                    basic reasoning tasks Ïˆ studied                               npolog  np  soininen et al  mittal falkenhainer inpar necessity conpc conpc        ticular known satisfiability problem does figure  complexity ccsps â€˜câ€™ stands complete  exists partial assignment Î¸ Î¸ solution  Ïˆ npcomplete                              xxn  satisï¬able deciding ex    important reasoning tasks ist truth assignments variables making each clause  come play csps complexity cj true wellknown conpcomplete problem  investigated ccsps section explore build ccsp instance ÏˆÎ¦ dÎ¦ follows    issues focusing following problems        each clause cj wlog form tj âˆ¨                                                           âˆ¨                                          Â¬    â€¢                                                   tj  tj wheretj variable xi negation xi      checking given partial assignment Î¸isÎ¸ solution dÎ¦                                    âˆˆ      Ïˆ                                             contains relation rcj   ttt    ti                                                        â€œtrueâ€ â€œfalseâ€ st cj satisï¬ed tji  ti âˆ€i    â€¢ relevance given variable xisx   contained                                                        each variable xi Î¦ dÎ¦ contains rela      vÎ¸ solution Î¸ Ïˆ                                                        tion rvi  â€œtrueâ€ â€œfalseâ€ finally unsat      â€¢ necessity given variable xisx   contained                                                        dÎ¦ relation indÎ¦thefor      vÎ¸ solution Î¸ Ïˆ                   Î¦            âˆƒ                        âˆ§                                                        mula Ïˆ   form  xnz â‰¤iâ‰¤n rvi xi                                                                            â†’                  âˆˆ    moving ccsps problems specialized â‰¤jâ‰¤m rcj xj xj xj  unsat  wherexji  care solutions partial assignments                                                           xn variable xji occurs cj  knowing solutions let truth value assignment variables Î¦let                                                                                                        variable â€œactiveâ€ quite relevant instance Î¸ denote assignment ÏˆÎ¦ dÎ¦ xi  product conï¬guration interested ï¬nding mapped â€œtrueâ€ resp â€œfalseâ€ Î¸x iff xi true resp  conï¬guration minimum number additional com false Î¸x iff satisfying  ponents meets usersâ€™ requirements     solution Î¸ ÏˆÎ¦ dÎ¦ vÎ¸ âŠ‡                                                                                                     order model scenarios convenient  xn occur vÎ¸                                                                                                           ï¬ne notion solutions means preorder satisfying assignment Î¦ Î¸   set possible partial assignments accordingly Î¸x conclude proof assignment                                                                                         solution Î¸ Ïˆ said minimal each solution Î¸  xu does satisfy Î¦ notice Î¸ âŠ†minimal                                             holds Î¸ Î¸  particular consider minimal â‡” satisfying assignment Î¦                                                solutions following preorders  checkingâ‰¤   checking   conpcomplete mem  subset minimality â€œâŠ†â€ Î¸ âŠ†v Î¸ iff vÎ¸ âŠ†vÎ¸     berships shown similar arguments                      â‰¤      â‰¤       â‰¤v       hardness checkingâ‰¤  shown observing  minimum cardinality â€œ â€ Î¸  Î¸ iff  Î¸       Î¸                                                                                                       reduction Î¸ fact â‰¤minimal â‡” Î¸ âŠ†  weighted cardinality â€œ â€ weight attached each      â‡”                                 Î¦      variable                                     minimal   satisfying assignment  finally                                                      hardness checkingâŠ† follows assigning unitary        Î¸  Î¸ iff        wx  â‰¤          wx                    xâˆˆvÎ¸          xâˆˆvÎ¸            weights variables ÏˆÎ¦    depict complete picture complexity ï¬g  ures arising ccsp setting                                                           restricted classes ccsps  theorem   complexity checking relevance    light intractability results previous section  necessity  variants  minimal solu        âˆˆ   âŠ†    â‰¤                                   relevant single classes ccsps efï¬  tions    â€œ â€ â€œ â€ â€œ â€  shown figure     ciently solved aim investigate adapt  proof sketch preorder considered results eas approaches used traditional csps tractable  ily derive standard results csps space limi classes identiï¬ed structural decomposition methods  tations report proof sketches variants pearson jeavons  gottlob et al   checking                                                          hardness acyclic structures  checkingâŠ†   conpcomplete membership let Ïˆ  ccsp instance let Î¸ partial assignment let Ïˆ fo formula structure constraints interac  Î¸  Ïˆ consider complementary problem deciding tions Ïˆ represented primal graph gÏˆ  assignment Î¸ Î¸ solution vÏˆe variables occur edge  Ïˆ ii vÎ¸ âŠ†vÎ¸ does hold clearly Î¸ appear constraint atom Ïˆ focus  guessed np ii checked classes primal graphs having bounded treewidth    hardness deciding boolean formula  tree decomposition graph ve pair                                                                             junctive normal form Î¦c âˆ§ âˆ§ cm variables tÏ‡ wheret      nf   tree Ï‡ function                                                        signing each vertex âˆˆ set vertices Ï‡p âŠ†     fact preorders widely used reï¬ning following conditions satisï¬ed  âˆ€b âˆˆ   lution concepts ai frameworks               âˆƒp âˆˆ  âˆˆ Ï‡pâˆ€b dâˆˆe âˆƒp âˆˆ                                                      ijcai                                                                                                           sjthenrsjixi evaluates false database                                                        implication trivially satisï¬ed xi                                                        mapped sj xi ii âˆˆ sj mapped                                                                                                                                                           sj fact holds construction Î¸                                                           â‡  assume solution Î¸ Ï†i di                                                        ï¬rst notice following properties hold Î¸p                                                        vÎ¸x  xnandpifxi   mapped sj Î¸                                                        xi mapped sj each ii âˆˆ sj                                                                    Î¸                                                        build set  sj âˆƒxi mapped sj Î¸and                                                        notice exact cover                                                          tractable classes                                                        classical approaches fail isolating classes tractable      figure  exactcoverbysets instance      ccsps propose study decomposition strategy                                                        speciï¬c âˆƒfoâ†’âˆ§ formulas shall focus plain        âŠ†        âˆ€  âˆˆ            âˆˆ     âˆˆ       Ï‡    ntheset       Ï‡      formulas nesting implication connective                                                   induces connected subtree thewidth tÏ‡  allowed formally plain âˆƒfoâ†’âˆ§ formula form  maxpâˆˆn  Ï‡p âˆ’ andthetreewidth short twgis                   minimum width tree decompositions          âˆƒxÏ† x  âˆ§    bix  â†’âˆƒyihix yi    let subset fo denote cspbtwl                   â‰¤iâ‰¤n  class csp instances Ï† dwhereÏ†      â‰¥                                                      andÏ† bi hi foâˆ§  tw   Ï†   bounded ï¬xed constant fact arbitrary formulas plain iteratively                                                                                                known gottlob et al  thatsatisfiability substituting each subformula Ï† â†’ Ï† â†’ Ï†  âˆ§ Ï†   solved polynomial time cspbtwâˆƒfoâˆ§we   âˆ§   â†’   âˆ§  â†’                                     csp    âˆƒ             Ï†   Ï†    Ï†      Ï†    Ï†   transformation preserves  show case btw foâ†’âˆ§  set solutions feasible quadratic time  restricted class cspacâˆƒfoâ†’âˆ§                                                          let Ïˆ plain âˆƒfoâ†’âˆ§ constraint interactions  acyclic instances having treewidth  Ïˆ represented implication graph igÏˆ  theorem   satisfiability nphard  vewherev     vÏˆ âˆªb  bnâˆªh  hn  stricted class cspacâˆƒfoâ†’âˆ§                edges form  pairs variables oc                                                        curring atom bi occurs atom  proof let   set elements let                                                                                          bi hi occurs atom hiand bihi    sm number sets each containing exactly             â†’âˆƒ         three elements recall exactcoverby each subformula bi     yihi xyi   portion                                                        implication graph exactcoverbysets  sets problem deciding exists set câŠ†                                                        instance proof theorem  reveals â€œhid   sm âˆˆc si   siâˆ©sj                                                       denâ€ intricacy problem reported figure  bjii  âˆ… each sisj âˆˆcwith   npcomplete                                                        hjii refer implication rsjixi â†’ rsji xi     example instance figure  shows left                                                          class cspibtwâˆƒfoâ†’âˆ§ deï¬ned set  sets  iii  iiiands                                                          ccsps instances Ïˆ dwhereÏˆ plain  iii solution consists set ss                                                        mula âˆƒ   â†’âˆ§  ig  bounded    build ccsp instance Ïˆi di fol          fo                tw    Ïˆ                                                        ï¬xed constant algorithm called decidesolutionk decid  lows  each item ii di contains relation                                                        ing instance cspibtwâˆƒfoâˆ§ solution  rii    sj   sj  âˆˆsand   ii  âˆˆ  sj   each                                                        reported figure   set sj item ii  âˆˆ  sj  di contains                                                          algorithm works tree decomposition igÏ†  lation rsji   sj  relation                                                        width shape nf roughly based  di formula Ïˆi form                                                      recursive procedure ï¬ndsolution receives input  âˆƒx  xn riixi âˆ§ iiji âŠ†s rsjixi â†’                                 i                 avertexv  âˆˆ each vertex equipped nodes          rsji xi   importantly given constraint relations associated variables  denoted aswellas             di                                           Ï†               Ïˆ     unary   Ïˆ            does contain  nodes  bn  hn sets  edge trivially acyclic         nodes denoted   respectively                                                                                         claim exists exact cover basically ï¬ndsolution guesses each child          sâ‡”    di                                                                        sets    Ïˆ            admits solution          partial assignment  conforming    â‡’                                                                 Î¸              let  exact cover consider assignment Î¸ assignment â€œstatesâ€ bc hcthestatebc                                                    Î¸  build follows  Ïˆ          Î¸  andxi     resp hc mapping bc resp hctothevalues                        âˆˆ       âˆˆc  mapped if     note  willf wasf mapping bcbit states                                     conjunction rii xi satisï¬ed Î¸  construction conjunct bi Ï† true fact bcbit                   di   relation rii   remains show case atoms bi restricted                            ji â†’   ji  i   each implication form rs  rs       sat assignment satisï¬ed short Ï€bi  isï¬ed distinguish cases xi mapped note information bcbit propagated                                                      ijcai                                                     
