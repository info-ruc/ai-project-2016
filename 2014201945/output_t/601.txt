                performance analysis online anticipatory algorithms                       large multistage stochastic integer programs                                   luc mercier pascal van hentenryck                                             brown university                                       mercierpvhcsbrownedu                          abstract                          pertinent group group members                                                        allocated hotel customers immediately      despite signiï¬cant algorithmic advances recent notiï¬ed acceptance rejection requests ac      years ï¬nding optimal policies largescale mul cepted requests satisï¬ed accepted requests      tistage stochastic combinatorial optimization prob assigned speciï¬c resource reservation time      lems remains far reach existing meth choice reconsidered goal maximize      ods paper studies complementary approach proï¬t served requests come different      online anticipatory algorithms make decisions types different characteristics arrival frequencies      each step solving anticipatory relaxation online multiple vehicle routing time windows bent      polynomial number scenarios online  van hentenryck  captures important class ap      ticipatory algorithms exhibited surprisingly plications arising transportation distribution systems      good results variety applications problems ï¬‚eet vehicles serve clients      paper aims understanding success par located different locations place request ser      ticular paper derives sufï¬cient conditions vice realtime speciï¬c time windows clients      online anticipatory algorithms achieve good immediately notiï¬ed acceptance rejection      expected utility studies various types er quests accepted requests satisï¬ed routing      rors arising algorithms including antic decisions delayed necessary goal      ipativity sampling errors sampling error maximize number satisï¬ed requests      shown negligible logarithmic num                                                          problems share characteristics      ber scenarios anticipativity error harder                                                        modeled multistage integer stochastic programs      bound shown low theoretically                                                        second number stages large packet schedul      experimentally existing applications                                                        ing time discrete nature experiments                                                         stages applications time    introduction                                       continuous reasonable discretization time  online stochastic algorithms solving large multistage require  stages set feasible decisions  stochastic integer programs attracted increasing each stage ï¬nite finally applications require fast  recent years motivated applications decisionmaking characteristics prohibit use  different types requests arrive dynamically priori methods partially observable markov decision  role algorithm decide requests serve processes stochastic programs chang et al  unlike traditional online algorithms applications  benoist et al  shown pomdps  assume uncertainty stochastic distributions scale applications successful algo  requests given                            rithms stage stochastic optimization sample    consider packet scheduling problem chang et average approximation method shown require num  al  router receives set packets each time step ber samples exponential number stages shapiro  choose packet serve packets served  precluding use applications  limited time characterized value interestingly highquality solutions applications  goal maximize values served packets obtained online algorithms relax non  packet distributions speciï¬ed markov models anticipativity constraints stochastic programs  states specify arrival frequencies packet type online anticipatory algorithms make decisions online    online reservation systems benoist et al  time three steps  application customers place requests real time  sample distribution obtain scenarios future  service ï¬xed date resources modeled  multiknapsack constraint think tour operators request  optimize each scenario each possible decision  ing rooms hotels group choice speciï¬c hotel  select best decision scenarios                                                    ijcai                                                    clear strategy necessarily suboptimal                                                         function makedecisionst   Î³t  scenarios experimental results                                                                                              use Î³t compute scenarios Î¾ Î¾ Î¾t  Î¾t  surprisingly good especially regret algorithm     âˆˆx  bent van hentenryck  hentenryck et al  foreach   st                                                                  â†             efï¬cient way implementing step  goal  gx       stxÎ¾                                                              â†  paper demystify results providing xt argmaxxâˆˆx st gx  oretical analysis algorithms section  describes  model algorithm section  analyses performance  online anticipatory algorithm isolates funda  analysis anticipatory algorithm  mental sources error sampling error quantity called compare performance anticipatory algorithm  global anticipatory gap inherent problem ofï¬‚ine posteriori solution expected sense  section  shows bound anticipatory gap theoreti typically online algorithms borodin elyaniv  cally experimentally section  analyzes effect ap  words decision process produced  proximating optimization problem section  compares anticipatory algorithm bound evc âˆ’ xÎ¾  anticipatory gap expected value perfect informa expected global loss egl  tion section  presents directions future research                                                          local global losses    model algorithm                                ï¬rst show egl sum expected losses  consider ï¬nite stochastic integer programs form stages                                                                                                    deï¬nition  let st state expected local loss     maxe         max     max   fx Î¾        decision âˆˆxst deï¬ned         xâˆˆx  xâˆˆx   xt âˆˆx st                                                                 Î”stxe   ostÎ¾ âˆ’ostxÎ¾ st    Î¾ stochastic process Î¾t observation                                                        note conditioning state st does provide  time Î¾ deterministic st xtâˆ’Î¾t                                                      information Î³t reading expression  state time maps states nonempty subsets     ï¬nite set decisions maxâ€™s welldeï¬ned form  st mind uncertainty                                                        Î¾tÎ¾t Î³tÎ³t   utility function bounded fmax denote  respectively Î¾ vectors xt Î¾t     lemma  global loss  sum local losses    decision process stochastic process âˆ€t  decision process  xt âˆˆxst assume computation each xt                          t  requires exactly random variable Î³t variables   evc  âˆ’ xÎ¾   Î”st  xt   independent independent Î¾                                                    practice decisions based future ob                                                        proof let ct random variable ostxtÎ¾   servations decision process nonanticipative xt                                                        ct âˆ’ fx Î¾thenat tt  deterministic function Î³t Î¾t                                                                         âˆ’         âˆ’  adapted ï¬ltration ft  ÏƒÎ³tÎ¾t rewrite     ct  ct    ct     fx Î¾  stochastic program                                          ct âˆ’ ctat     maxe    fx Î¾  nonanticip dec proc             Î”stxt   scenario realization process Î¾theofï¬‚ine prob equality comes decomposing reassembling                                                                                                   evc   âˆ’  lem problem decision maker face given possible values xt finally                                                               âˆ’                           state st future observations revealed deï¬ne   Î¾       Î¾                                                    stxtÎ¾max    fyÎ¾  dec procyt  xt   decomposition local loss                                                      stÎ¾max    fyÎ¾ dec procytâˆ’  xtâˆ’ show local loss state st consists            maxostxÎ¾                              sampling error anticipatory gap              xâˆˆx st                                                        deï¬nition  anticipatory gap state st deï¬ned  note problems deterministic                                                                      Î”gst   min  Î”stx    finally expected value clairvoyant evc isde                 xâˆˆx st  ï¬ned expected utility clairvoyant decision maker choice error wrt deï¬ned  evc  os Î¾ problems discussed                                                                                                       âˆ’  introduction ï¬t model particular utility  Î”cstxÎ”stx    Î”gst  bounded thanks capacity constraints model anticipatory gap inherent problem indepen  generalized case fx Î¾ ï¬nite ï¬rst dent decision process  equivalent deï¬nition                                                                                                     second moments                                                                                                                                                                               anticipatory algorithm studied algorithm   max   ostxÎ¾st âˆ’ max  ostxÎ¾st   makedecision parametrized number scenarios   xâˆˆx st                   xâˆˆx st  successive decisions form nonanticipative pro expression shows gap interpreted  cess                                                 cost commuting max bound Î”cstx                                                    ijcai                                                                                                            important consequence theorem sam  lemma  sampling error let xt computed                                                        pling error smaller constant  ticipatory algorithm using samples decision let st                                                                    choosing â‰¥  log   shapiro  ar  state argmax ostxÎ¾ st  break ties arbi                       max  trarily                                        gues saa method does scale multistage prob                                                                                                       lems number samples achieve given accu                                     âˆ’mÎ”    Î”   â‰¤   Î” xexp                racy grows exponentially  anticipatory algorithm                                           requires grow logarithmically xwhich                   âˆˆx                Ïƒstx                     st                               makes highly scalable course produces high  Ïƒstx standard deviation ostxÎ¾ âˆ’ quality decisions anticipatory gap small          ostx Î¾ given st  proof probabilities expectations implicitly  bounding global anticipatory gap  conditional st lefthand side decomposed section provides theoretical experimental results                                                       anticipatory gap explaining anticipatory algorithms                                            Î”cstxt     Î”cstx xt           effective applications mentioned introduction                       xâˆˆx st                                                          theoretical proof packet scheduling  argmax makedecisiontheeventxt                                                                                                   gag  implies âˆ€x âˆˆxstgx  â‰¤ gx xt  â‰¤ ï¬rst show compute upper bound                gx â‰¥ gx sincef    bounded ostxÎ¾ âˆ’    simpliï¬ed version packet scheduling problem suppose                                                                                                   ostx Î¾ ï¬nite expectation variance types packets values                                                          respectively each step  âˆ’  packet                     m                                                                                        type arrives probability  random variables     gx âˆ’ gx       os  xÎ¾i âˆ’os xÎ¾i                                                                                     independent each packet lifetime  meaning                                                                          packet received time scheduled time  central limit theorem difference normally time  utility sum scheduled packets                                       âˆ’  distributed large mean Î”cstx stages packets single time step serve                             âˆ¼n         variance Ïƒstx  finally    Î¼ Ïƒ  Î¼ convenience introduce packet type  value                                                    Î¼                              probability  clear problem  â‰¥  â‰¤ exp âˆ’    chernoff bound                             Ïƒ                              satisï¬es assumptions particular utility                                                                  â‰¤   â‰¤    performance algorithm                     bounded     tvk                                                          gag  small problem show  assemble previous results                                                        Î”g rarely high inducing small gagforst state  deï¬nition  global anticipatory gap problem âˆˆxs  say dominates os xÎ¾ â‰¥                      â¡                 â¤                                                                                                              os yÎ¾ surely given  studying Î”                               t                                                                                 â£                 â¦               quires focus nondominated decisions            gag      max       Î”g st                           xt                          nondominated decisions given state consists                                                      xiâˆˆx si                     scheduling  quantity inherent problem   â€¢ valuable packet type received time tâˆ’  theorem  expected global loss anticipatory al scheduled  gorithm satisï¬es                                        â€¢                                                          valuable packet type received time                                  âˆ’               egl  â‰¤ gag     km                   â‰¥ choosing dominated                                                        valuable lost chosen  number samples decision                                                        ijbut second valuable packet received                                                                  Î”cstx                   type â‰¥ choosing dominated                min                                conditions holds decision dominates ones                    stxâˆˆx st Ïƒstx                    Î”cstx                          Î”gst  proof                                          suppose st does satisfy                                                        dominance property scenarios partitioned                                                            t               t                             scheduling resp unique ofï¬‚ine optimal  egl       Î”    â‰¤     Î”      Î”                              cision tie introduce random                                                variable  taking values âŠ¥ three respective          gag                                                    term     comes                           cases  t                t                   t                                                         Î”s  os Î¾ âˆ’os iÎ¾      Î”gst     Î”gst  â‰¤  max     Î”gst                                                                   xt                                                     ostÎ¾ âˆ’ostiÎ¾ styt   yt   global sampling error satisï¬es                symmetrically                                                                  Î”stje  ostÎ¾ âˆ’ostjÎ¾ st                                        âˆ’km             Î”cstxt â‰¤ fmaxe                                                                   ostÎ¾ âˆ’ostjÎ¾ styt  yt                                                               ijcai                                                    scheduled optimal ofï¬‚ine solution ostxtÎ¾ostÎ¾ st  consensus ratethis  schedule loss exceed vj âˆ’ vi quantity estimated easily during computation  rest optimal ofï¬‚ine schedule feasible anticipatory algorithm sufï¬ces count sce  ostÎ¾ âˆ’ostiÎ¾ styt   â‰¤ vj âˆ’ vi narios make decision  optimal ofï¬‚ine schedule choose time titis                                                                                                     âˆˆ          o                  necessary packet value greater vi arriving   stxÎ¾    stxtÎ¾                       â‰¤   âˆ’                    âˆ’           yt       ki qk qk   pk  finally ï¬nd                                       hentenryck et al  kindly gave statis                                                      tics online reservation systems depict consensus                                                                                           rate minmaxavg function number scenarios            Î”sti â‰¤ vj âˆ’ vi  âˆ’   qk                                                                                            max                                   ki                                                                                                                      average  case harder study trivial upper bound                                                                                â‰¤                                                                                min    Î”s    remains bound expectation              agreement                                                                    Î”gst  minÎ”sti Î”stj enumerating possi  ble values weighting each case proba                                                                                       scenarios  decision  bility occurrence weight fact bounded                     product probabilities  following events                                                        class instances  possible decisions    â€¢ packet type arrived time âˆ’          each state expect average consen    â€¢ valuable packet arrived type sus rate  actually higher                                                         maximal ofï¬‚ine loss bad decision eas    â€¢ packet type â‰¤ kjarrived time                                                        ily bounded problem markov inequality  numerical example suppose  types gag low similar observations packet  packets following values emission probabilities scheduling problem measured average consensus              type                                  vehicle routing problem             value                                 rate varies stages exhibiting increasing trend             prob                           argument useless                                                        fmax high problems high penalty states  upper bound Î”g depending jis           generally following theorem gives way mea                                                       sure anticipatory gap state                                                                                                                                      theorem   let st state deï¬ne Î”gst                                                                                                                                             m                           m                                                                                                                                                            max  ostxÎ¾  âˆ’  max     ostxÎ¾                                                                  xâˆˆx st           xâˆˆx st                                                                                       ï¬nd Î”gst â‰¤  hand simple  lower bound evc expectation value strongly consistent estimator Î”gst                                                                                              valuable packet arriving each stage multiplied                              number stages case leads evc â‰¥                                                                                                lim  Î”gstÎ”gst      st   result ratio gag evc problem       mâ†’âˆ   analysis tight â€“ espe proof apply strong law large numbers os xÎ¾  cially lower bound evc â€“ anticipatory algo                                                                                               conclude ï¬niteness st   rithm likely better expected global loss   analysis hints online anticipatory algorithms Î”g computed online anticipatory algorithm  effective packet scheduling outper additional cost  form competitive algorithms instances                                                           approximating ofï¬‚ine problem    discussion practical problems                 theorem  explains anticipatory algorithm provides  previous section shows bound gag par good results gag small practical im  ticular problem study dominance properties plementations use variant algorithm   cisions bound loss making nonoptimal ofï¬‚ine placed fast approximation o case  sense decision bound probability event three applications mentioned earlier use approxi  currently applying method complex prob mating technique called regret bent van hentenryck  lems proofs quickly cumbersome  hentenryck et al theregret algorithm  alternative discuss empirical way argue seen discrete version sensitivity analysis instead  gag problem small                                                        computing ostxÎ¾ each each âˆˆxsttheidea    emphasized theoretical discussion             âˆ—                                                                         compute argmaxx   stxÎ¾   ï¬rst   importance bounding probability cho                                                                                                  compute vector approximations ostxÎ¾   sen decision  posteriori optimal                                                xâˆˆx st                                                    ijcai                                                    using xâˆ— each entry vector derived approx  imating loss selecting speciï¬c st instead  optimal decision xâˆ— result regret algo                                              rithm ensures oâ‰¤oand   iimaxxostxÎ¾                    maxxostxÎ¾ seebent et al  discussion  complexity computing approximated vector    easy provide tight theoretical bounds  expected global loss regret approximation    figure  low evpi high global anticipatory gap  measured empirical distribution oâˆ’o  line stochastic reservation systems hentenryck et al                                                                proof    let    decision process maximizing   difference oâˆ’o zero  cases                                                                                             fx Î¾st Î¾ ostÎ¾ â‰¥ fx Î¾  mean small  typical values                                                                                          nondecreasing ostÎ¾st â‰¥ fx Î¾st   range  occasionally            Î¾                                                        Ï†st inversely let decision process maximizing  large intuitively justiï¬es quality regret      Î¾                                                        fx Î¾        âˆ’deï¬nex    aggrega  expected global loss signiï¬catively different      tâˆ’                                                                                        Î¾  anticipatory algorithm sample size      tion does thing scenario Î¾then                                                             â‰¥                                      finally recall online reservation systems Ï†st fx Î¾ st  stÎ¾ st                                                                                               evpi  consensus rate high average let x        twostage stochastic programming low makes                                                    problem easier optimal decision  argmax      ostxÎ¾  let consensus rate                                                    good each speciï¬c scenario birge louveaux  Î± properties ii regret approximated                                                       ch  longer true multistage  â€œscoreâ€     os xÎ¾i decision x exhibit                                                  case consider threestage problem depicted figure   errors  âˆ’ Î±m scenarios close    Î±m                                               black dots represent decisions variables stochas      ostx Î¾  decisions ap                                                      tic variables Î¾ Î¾ inï¬‚uence repre  proximated score terms sum                                                        sented white dot represents Î¾ values   negative error approximated decision bi                                                         equal probability leaves tagged utilities  ased consensual decisions high consensus rate                                                         large positive number value evpi                                  oâˆ’o                       tends hide approximation errors regret     anticipatory gap Î” each state following    summary high consensus rate makes ag                 small allows regret produce decisions close         state root state                                                                                         quality exact anticipatory algorithm does         Î”g              Îµ   mean brutal regret approximation assigning zero       Î·ÎµÎµ               each nonoptimal decision effective bent problem evpi Îµ optimal solution  van hentenryck                                 score Îµ scenario expected value     gag           evpi                                 optimal policy zero online anticipatory algo          versus                                       rithm chooses expected utility  section studies relationships anticipatory Îµ âˆ’ anticipatory algorithms behave  gap expected value perfect information evpi  poorly low evpi  case  concepts seemingly close useful ex inequality theorem  tight converges âˆ  plain differ chose introduce gag equals Îµ   tion anticipatory gap                               phenomenon comes fact evpi    consider following maps assigning values problem low evpi node                                                             âˆ’    âˆ’         states ofï¬‚ine value online value state stre Îµ  Îµ  Îµ  larger                                                                                                      spectively denoted Ï†st Ï€st deï¬ned   does contradict supermartingale property demp                                                        ster  dempster considers optimal decision pro                                     Ï†stmax     fx Î¾ st dec proc              cesses case anticipatory algorithms   Ï€stmaxe   fx Î¾st  nonanticip dec proc  result expected global loss anticipatory algo                                                                                        evpi               â‰¥                                        rithm bounded root    example  note Ï†st Ï€st state st difference suggest maximum evpis each node                                                                                      egl                 Î·stÏ†st  âˆ’ Ï€st                  tree gives upper bound  true                                                        figure  presents stochastic program â€˜subâ€™                                              evpi  local expected value perfect information   clones problem figure  variables indices  expected value perfect information problem shifted problem optimal solutions scenar  Î·s advantage expected sense clair ios expected expected utility Îµ  voyant nonclairvoyant inï¬nite computa anticipatory algorithm  âˆ expected utility  tional resources lemma relates ofï¬‚ine problem   âˆ’ theegl equals    theorem                                                          aÎµ                     aÎµ  Ï† shows operators max commute gag smaller egl  âˆ sampling  clairvoyant decision processes                       error result gag greater maximum                                                                                              lemma   state st Ï†ste ostÎ¾st      evpi nodes equal Îµ                                                     ijcai                                                    
