                  symmetry breaking quantiï¬ed boolean formulae                          gilles audemardâˆ—     saÂ¨Ä±d jabbour    lakhdar saÂ¨Ä±s                                         cril  cnrs fre                                      universitÂ´e dâ€™artois  lens france                                audemardjabboursaiscrilunivartoisfr                          abstract                          space symmetries widely investigated considered                                                        important task deal intractability com      reasoning task combinatorial problems    binatorial problems constraint satisfaction problems      exhibit symmetries exploiting symmetries    csp satisï¬ability boolean formula sat      proved important reducing    previous work symmetry breaking predicates qbf      search efforts breaking symmetries using addi   proposed audemard  et al  authors      tional constraints currently used use hybrid qbfsat approach set gener      approaches extending symmetry breaking      ated breaking predicates separated qbf formula      techniques quantiï¬ed boolean formulae qbf consequently approach solver dependent      challenging task paper approach solve hybrid qbfsat formula dpllbased qbf      break symmetries quantiï¬ed boolean formu   solvers need adapted kind solvers      lae proposed makes original use univer skizzo used context      sally quantiï¬ed auxiliary variables generate new paper propose preprocessing approach      symmetry breaking predicates new ordering   solver independent taking input qbf symme      qbf preï¬x computed leading    tries generate new qbf formula symmetries      new equivalent qbf formula respect valid equivalent original wrt validity break      ity experimental evaluation stateoftheart symmetries extend sat approach proposed craw      qbf solver semprop shows signiï¬cant improve      ford crawford  aloul et al       ments orders magnitude   paper organized follows prelimi      qbfs instances                                   nary deï¬nitions quantiï¬ed boolean formulae symmetry                                                        framework qbfs presented symmetry breaking    introduction                                       approach qbf described experimental validation                                                        approach given showing signiï¬cant improvements  solving quantiï¬ed boolean formulae qbf wide range qbf instances finally promising paths  attractive important research area years future research discussed conclusion  increasing related different fac  tors including fact important artiï¬cial intel  ligence ai problems planning non monotonic reasoning  technical background  formal veriï¬cation reduced qbf  quantiï¬ed boolean formulae  considered canonical problem pspace com                                                        let ï¬nite set propositional variables lp  plexity class important reason comes language quantiï¬ed boolean formulae built  cent impressive progress achieved practical resolu ing ordinary boolean formulae including propositional  tion satisï¬ability problem solvers qbfs stants  âŠ¥ plus additional quantiï¬cation âˆƒ âˆ€                                proposed recently giunchiglia et al propositional variables  zhang malik  letz  benedetti                                                         paper consider quantiï¬ed boolean formula Î¦  obtained extending satisï¬ability results                                                        prenex clausal form Î¦qkxk qxÎ¨     surprising qbfs natural extension sat                                                        short qxÎ¨  qx  called preï¬x Î¨ matrix  isï¬ability problem deciding boolean formula                                                        qi âˆˆâˆƒ  âˆ€ xkx disjoint sets variables  conjunctive normal form satisï¬able vari                                                        Î¨ boolean formula conjunctive normal form consecu  ables universally existentially quantiï¬ed                                                        tive variables quantiï¬er grouped    classes qbfs encoding realworld application                                                                      ï¬ne varÎ¦     iâˆˆk xi set variables Î¦  andor ai problems contain symmetries exploiting varuÎ¦   xx âˆˆ varÎ¦ universal  structures lead dramatically reducing search                                  literal                                                        occurrence propositional variable positive    âˆ—                                 supported anr â€œplanevoâ€ project jc    negative form Â¬l litÎ¦  iâˆˆk litxi set                                                    ijcai                                                    complete literals Î¦wherelitxixi Â¬xixi âˆˆ  different quantiï¬er groups mapped each  xi set literals encoded using integer numbers second condition deï¬nition   positive resp negative literal resp Â¬l associ detect symmetries nauty applied graph  ated positive number Î± resp âˆ’Î± deï¬ne representation qbf  absolute value    given variable âˆˆ varÎ¦ st âˆˆ xkwedeï¬ne     breaking symmetries qbfs  rankxk variables appearing quantiï¬er                                                        symmetry breaking extensively investigated  group equally ranked                                                        context constraint satisfaction satisï¬ability problems    symmetries quantiï¬ed boolean formulae         different approaches proposed break symmetries                                                        conveniently classiï¬ed dynamic static schemes  let Î¦qxqmxmÎ¨       beaqbfandÏƒ      apermu                        Î¦      Ïƒ   litÎ¦ â†’ litÎ¦    dynamic breaking generally search break symmetries  tation literals                                                                Ïƒ    Î¦                        ÏƒÎ¦     ing breaking predicates benhamou sais   permutation   deï¬ned follows                           Ïƒx   Ïƒx  ÏƒÎ¨                  Î¨         gent smith   static breaking schemes refer tech                        example    niques detect break symmetries preprocessing  clausal form ÏƒÎ¨  Ïƒcc âˆˆ  Î¨ Ïƒc  Ïƒll âˆˆ                                          step sat symmetries generally broken generat                                                       ing additional constraints called symmetry breaking predi  deï¬nition  let Î¦qxqmxmÎ¨      quantiï¬ed  cates sbp crawford  aloul et al suchsbp  boolean formula Ïƒ permutation literals Î¦ eliminates models each equivalence class sym  Ïƒ symmetry Î¦ iff                              metric models general case                                                        set symmetry predicates exponential size    âˆ€x âˆˆ litÎ¦ÏƒÂ¬xÂ¬Ïƒx                                                        aloul et al  aloul et al extend approach craw    ÏƒÎ¦  Î¦ ÏƒÎ¨  Î¨ âˆ€i âˆˆm Ïƒxi    ford crawford  using group theory concept      xi                                               nonredundant generators leading considerable reduc    let note each symmetry Ïƒ qbf Î¦ sym tioninthesbpsize  metry boolean formula Î¨ converse true brieï¬‚y recall symmetry breaking technique intro                      Î¦                                 duced crawford crawford et al letÎ¨  set symmetries subset set symmetries         Ïƒ     Î¨                                                 cnf formula                 symmetry                                                        Î¨thesbp    associated Ïƒ deï¬ned follows    symmetry Ïƒ seen list cycles cn                                                        â‰¤  each cycle ci list literals li lin  st âˆ€ â‰¤                                                       â†’ â‰¤  kniÏƒili  li    Ïƒili li wedeï¬neÏƒ                          ni                               ci ci number literals ci    ciâˆˆÏƒ                                                  xnâˆ’  ynâˆ’ â†’ xn â‰¤ yn    known breaking symmetries lead  general case exponential number clauses craw sbp deï¬ned expresses âˆˆ                 ford et al   paper efï¬ciency clarity rea  âˆ’  xi yi equivalent truth  sons consider symmetries binary cycles value xk truethenyk assigned truethis  approach extended symmetries cycles arbi reasoning extended qbf provided symme  trary size                                           try follows preï¬x ordering    detecting symmetries boolean formula equiva  lent graph isomorphism problem crawford   motivation  crawford et al  problem ï¬nding                                                    following example show main difï¬culty  mapping graphs   problem extension sat symmetry breaking predicates sbp  proved npcomplete polynomial algorithm qbfs  known context deal graph automorphism                                                                      Î¦âˆ€x    âˆƒx Î¨                 Î¨  problem ï¬nding mapping example  let          qbf                                                        âˆ¨Â¬x  âˆ§y  âˆ¨Â¬y  âˆ§Â¬x  âˆ¨Â¬y   âˆ¨x  âˆ¨y   particular case graph isomorphism pro                             permu                                                              Ïƒ                Î¦  grams proposed compute graph automorphism tation             symmetry breaking                                                                    Ïƒ  let mention nauty mckay  efï¬ symmetry  using traditional approach induces                                                                 sbp    Â¬x  âˆ¨  âˆ§ Â¬x âˆ¨Â¬x   âˆ¨  âˆ§ âˆ¨  cient practice                                    following                                                                                         Â¬x  âˆ¨             Â¬x âˆ¨     recently aloul et al aloul et al  proposed     clause    universally quantiï¬ed                                                                                         sbp  interesting technique transforms cnf formula Î¨ new obtained qbf adding original  agraphgÎ¨   vertices labeled colors qbf leads invalid qbf formula  colored vertices considered searching automor overcome main drawback addition classi  phism graph vertices different colors cal sbp new breaking predicates called qsbp  gen  mapped each                          erated symmetries containing universal cycle    audemard et al  simple extension qbfs deï¬nition  case variables ex  formulae given extension simply obtained istentially quantiï¬ed variables associated  troducing different color each set vertices lit new additional universally quantiï¬ed variables rela  erals belong quantiï¬er group way literals tionships expressed generated qsbp  safely                                                    ijcai                                                    add qsbp  original qbf formula new preï¬x deï¬nition  let Ïƒ  ck cn st ck xkyk  ordering computed                                  â‰¤ â‰¤ universal symmetry deï¬ne qsbp Ïƒ    formal presentation approach single âˆªqsbpÏƒyk  â‰¤ â‰¤ nstyk universal  symmetry generalization arbitrary set symmetries qsbp associated Ïƒ qsbp Ïƒ built using  described                                       following steps    breaking single symmetry                                                           adding auxiliary variables  each universal cycle  formally introduce approach breaking sym ck xkyk  âˆˆ Ïƒ associate new universal vari  metries qbf                                                                                                             able yk outliteral yk universal quantiï¬er                                                               deï¬nition  let Î¦qx    qixi qmxm   Î¨        substituted existential quantiï¬er  qbf Ïƒ symmetry Î¦ deï¬ne Ïƒ â†‘ xi sub   generating new predicates   sequence symmetry Ïƒ restricted cycles involving                                                              â€¢ xy universal cycle st   variables xi symmetry Ïƒ rewriten                                                                                                  qsbÏƒy  Â¬x â†’ â†”  following preï¬x ordering Ïƒ Ïƒi Ïƒm                                                              â€¢âˆ€k            Ïƒi  Ïƒ â†‘ xiwhenÏƒ  respect preï¬x ordering called               universal cycle                                                                qsbpÏƒy   pordered                                                             following constraints                                                                                                                                                 â€“  Â¬xk â†’ yk â†” yk xk  yk    sequel symmetries considered pordered                                                                                          â€“  Â¬xj âˆ§ yj â†’ yk â†” yk âˆ€j st  â‰¤ jk  example  let Î¦âˆƒxyâˆ€xyâˆƒxy   Â¬x âˆ¨ âˆ¨ âˆ§                                                        example   let consider qbf Î¦ given example   âˆ¨Â¬x âˆ¨yx âˆ¨x âˆ¨xâˆ§Â¬x âˆ¨Â¬yâˆ§x âˆ¨xx âˆ¨                                                        symmetry Ïƒ Î¦ contains universal cycle xy  âˆ§ Â¬x âˆ¨Â¬y âˆ¨Â¬x   âˆ¨Â¬yÎ¦has symmetry   Ïƒ                                                                                              using deï¬nition  new variable associated  xyxyxy reordering Ïƒ respect                                                        variable existentially quantiï¬ed  preï¬x leads Ïƒ  ÏƒÏƒÏƒ st Ïƒ  Ïƒ â†‘ xy                                                                                           qsbpÏƒ qsbpÏƒy Â¬x â†’ â†”  Ïƒ  Ïƒ â†‘ xy Ïƒ  Ïƒ â†‘ xy                                                          described generate qsbp new variables  deï¬nition  let Î¦ qbf Ïƒ symmetry Î¦   cycle Ïƒ deï¬ne resp inliteral introduced sequel variables                                                        integrated qbf preï¬x  resp outliteral cycle called universal  universally quantiï¬ed symmetry Ïƒ called universal deï¬nition  let Î¦qx qmxm Î¨ qbf  contains universal cycle called Ïƒ  Ïƒ Ïƒj Ïƒm universal symmetry let st  existential                                          qj    âˆ€ Ïƒj    Ïƒ â†‘  xj    xy xnyn                                                              y y   existential symmetries qbf classical sbp craw          set new variables associated                                                        yn respectively deï¬ne new ordering  ford et al  translated linearly cnf                                                                                                varÏƒj  âˆª  follows  rankxk ranky       mula thanks new additional variables obtained set                                                                                                  rankyk st  â‰¤ â‰¤  clauses added qbf matrix preserving                                                                  deï¬ne   Ïƒj       as precedence graph associ  validity main problem arises breaking universal                                                                                       ated Ïƒj            xkyky      symmetries example  safely break universal                â‰¤kâ‰¤n                                                                       y  y   symmetries keeping classical sbp ï¬rst reorder â‰¤kâ‰¤n         symmetry variables belonging universal quan rewrite quantiï¬er group qjxj qbf formula  tiï¬er group new ordering allows determine literals deï¬nition  new ordering derived applying topo  likely implied sbp secondly implied uni logical sort algorithm precedence graph let note  versal literals lead invalidity qbf original graph acyclic ï¬gure  graph represen  approach proposed deal literals tation Ïƒj  Ïƒ â†‘ xj illustrated ordering xn                                                               following problem universal implied literals il yny yn considered  lustrated approach motivated                                                                                           Ïƒ  xyxkyk                                                          let                             universal symme                          yn                                                                                n     try given qbf Î¦ xkyk universal cycle                                mentioned Ïƒ ordered according preï¬x Î¦                                                                                                                 suppose xi yi  â‰¤ â‰¤ âˆ’  assigned                         n  truth value xk assigned true universal literal  yk implied sbp avoid case univer   figure  graph representation Ïƒj  sal quantiï¬er yk substituted existential quanti  ï¬er xi yi assigned different truth                                                    deï¬nition  let Î¦qx   qmxm   Î¨  qbf Ïƒ   values assigned false remain universally Ïƒ Ïƒ                        âˆˆ   quantiï¬ed manage cases new universal vari   universal symmetry                                                       Ïƒj   Ïƒ â†‘ xj   xyxnyn quantiï¬er  able yk introduced variable plays role                                                              qjxj   Î¦  yk second case ï¬rst case group rewritten   useless relation variables expressed â€¢ qj  âˆ€ Ïƒ â†‘ xj  âˆ…                                                                                                using new predicates called qsbpÏƒyk                qj xj  âˆ€xjvarÏƒj xnâˆƒÎ±âˆ€y ynâˆƒy yn                                                    ijcai                                                                                           ï¬gure  st  xj âˆªy  Î± new                                                                                      variable                                              Î¨ âˆ§      sbpÏƒi âˆ§          qsbpsx    â€¢          qpxp                                                 â‰¤iâ‰¤n             xâˆˆvaruÎ¦  Î¦ rewritten                  Î¦   qx  qi xi qmxm  Î¨ âˆ§ sbp  âˆ§ qsbp          preï¬x ordering                                                        let show new qbf preï¬x built  remark   deï¬nition  new variable Î± introduced                                              sidering set symmetries single symmetry deï¬  constrain set variables  assigned nition  set symmetries ÏƒÏƒn consider  fore y y                                                      each universal quantiï¬er group qkxk projections                                                                                  property  let Î¦ qbf Ïƒ symmetry Î¦thenÎ¦ Ïƒ  â†‘ xk  each symmetry Ïƒ  new quantiï¬er group                                                          valid iff Î¦ valid                              qkxk  obtained precedence graph representation                                                                                                         Ïƒi  sketch proof property  consider qbf given projections let recall each symmetry                                       Î¦                considered pordered additionally avoid cycles  example  applying approach  obtain                                                                            graph representation Ïƒ â†‘ xk â‰¤ â‰¤ each pro  qbf                                                                                                              jection Ïƒ â†‘ xk considered lexicographically ordered    Î¦   âˆ€xâˆƒÎ±âˆ€yâˆƒyxy  Î¨ âˆ§Â¬x âˆ¨yâˆ§Â¬x  âˆ¨Â¬x âˆ¨   âˆ§ âˆ¨Â¬x Â¬y   âˆ§ âˆ¨ âˆ¨Â¬y  âˆ§ âˆ¨Â¬y  âˆ¨ y                                               deï¬nition  let Ïƒ  xyxnyn set   assigned value true clause cycles Ïƒ called lexicographically ordered lexordered  Â¬x   âˆ¨                  true          deduce     assigned short iff xi   xi â‰¤yi  â‰¤ â‰¤ xi xi  value false original universal variable deduced  â‰¤                substitution equivalent thanks added                                                      example   let Î¦qx           qmxm   Î¨     constraint Â¬x â†’ â†” yasranky rankywe                                                          y             qbf  Ïƒ   Ïƒ   symmetries Î¦   st   Ïƒ   â†‘  need substitute occurrences                                                                                                         xxÂ¬x Â¬xxx Ïƒ   â†‘        breaking symmetries                          xxx Â¬x   âˆ€  respect lexi                                                        cographical order Ïƒ â†‘  xxxxxx  generating qsbp                                                                                                      Ïƒ    â†‘         xxx Â¬x figure   considering symmetries eliminate                                                        shows   precedence graph  representation  independently processing each single symmetry                                                                     Ïƒ  â†‘    Ïƒ   â†‘    applying topological sort  ing single symmetry breaking approach described sec                                                                             algorithm quantiï¬er  rewritten  tion  needs consider interactions qp xp  âˆ€x âˆƒÎ±âˆ€x x âˆƒx âˆ€x x âˆƒx  different symmetries considering universal                                                             literal yk associated new variable yktheqsbpÏƒyk                                                y                  express conditions literals                                                                               equivalent variable yk introduced                                                                                                                                                                                                         each universal outliteral ykwhenyk appears sym                                                                                                                                                                                                                                    metries different conditions leading equivalence    z                                                                                                                                                                             need combined                                                                                                                                                       deï¬nition  let  Î¦       qbf     Ïƒ                                                                                                       xy xiy  Ïƒ  zw zjy   figure  precedence graph Ïƒ â†‘ Ïƒ â†‘  symmetries Î¦ universal outliteral qsbpâ€™s  associated respect Ïƒ Ïƒ written                                                        dealing universal cycles form yx  following form deï¬nition                      zÂ¬x    â€¢ qsbpÏƒy  Î± â†’  â†” y Î± â†’ â†” y                                                     preserve equivalence wrt validity orig                                                  â€¢ qsbpÏƒ  Î² â†’ â†”  Î²m â†’ â†”    inal qbf new generated let address  deï¬ne binary correlation operator Î· Ïƒ Ïƒ problem arising interactions differ  follows                                           ent symmetries illustrated following example                                     Î·Ïƒy Ïƒ  Î± âˆ§ Î² â†’ â†”  Î± âˆ§ Î²m  â†’ problem arises symmetries universally quantiï¬ed                                                                                                 Â¬x  â†”  Î±n âˆ§ Î² â†’ â†”  Î±n âˆ§ Î²m  â†’ â†” outliteral appears positively   negatively    y                                                       example   let Î¦qx  qixi qmxmÎ¨    qbf                                                                                 Ïƒ Ïƒn                         Ïƒ Ïƒ symmetries Î¦ st Ïƒ â†‘ xi  xy  deï¬nition  let              set symmetries   given qbf universal literal deï¬ne     Ïƒ  â†‘ xi  Â¬yqi  âˆ€                                 sy    â€¢syÏƒ    âˆƒx âˆˆ Ïƒ   Ïƒ Ïƒ                using approach quantiï¬er group qixi rewritten                                                                                                                     sy           âˆ€xivarÏƒ Ïƒ âˆ€xxâˆƒÎ±âˆ€yâˆƒy generated sbp    â€¢ qsbpsy  Î·Î·Î·Ïƒ Ïƒ  Ïƒ                                                                                                             Ïƒ contains clause Â¬x âˆ¨ xforÏƒ corre                                                                                       deï¬nition  let  Ïƒ Ïƒ  set symmetries sponding sbp contains clause Â¬x âˆ¨Â¬yas                                            given qbf Î¦qx   Î¨ new qbf matrix Î¨ deï¬ned  universal variable substituted existential  follows                                           applying qresolution rule kleinebÂ¨uning et al                                                    ijcai                                                     c leads universally quantiï¬ed resolvent giunchiglia et al set qbf  Â¬x  âˆ¨Â¬x consequently new obtained qbf stances contains different families like toilet  fpga  invalid finding new ordering avoid problem qshifter comparison run stateoftheart  challenging task example  problem dplllike solver semprop letz  qbf instances  avoided considering new ordering breaking symmetries time limit ï¬xed  instead used lexordering possible solution  seconds results reported seconds symme  actually investigation apply composition try computation time including detection qsbp genera  symmetries precisely consider Ïƒ â—¦ Ïƒ â—¦ Ïƒ tion reported second cases                         obtain new symmetry Ïƒ Â¬x addition Ïƒ  Ïƒ consider Ïƒ previous resolvent gen                                                                 erated using qresolution universally quantiï¬ed  outliteral universal quantiï¬er sub  stituted existential resolvent contains    literal Â¬x associated variable existentially quan                                                                  tiï¬ed finally quantiï¬er group qixi rewritten                     qi xi  âˆ€xâˆƒÎ±âˆ€xâˆƒxâˆ€yâˆƒy    discussion gives idea solve      general case problem arising symmetries  universal cycles form yx zÂ¬x paper    problem simply avoided using following restric  tion                                                                                                                                                   deï¬nition  let Î¦qx      qmxmÎ¨    qbf  âˆˆ  varuÎ¦                              Î¦                   set symmetries                 figure  semprop comparison  deï¬ne sy  â†“      Ïƒ   â†“  yÏƒ  âˆˆsyfor  Ïƒ              Ïƒâ†“                              deï¬ne         scatter plot log scale given ï¬gure  illustrate  yk   xyxkâˆ’ykâˆ’ restriction                     rts yÏƒÏƒ    âˆˆ  Ïƒy     comprative results semprop letz  each qbf  wrt    deï¬ned                                  instance Î¦ Î¦s respectively xaxis resp yaxis  âˆ…ÏƒÂ¬yâˆ… âˆª sy     âˆªsÂ¬yâ†“Â¬y    set                                                        corresponds cpu time tx resp ty obtained sem  variables varuÎ¦    vvvaruÎ¦ deï¬ne                                                                            prop Î¦ resp Î¦  each dot tx ty coordinates  rts aruÎ¦  rtrts                                          varuÎ¦        corresponds qbf instance dots resp                                                                                                       Î¦  note syâˆ… sÂ¬yâˆ…thenrts ysnat    diagonal indicate instances original formula                                                                      tx  ty               tx  ty  urally given set symmetries new qbf formula solved faster resp slower                                                                     Î¦s  generated using rts aruÎ¦ way obtained qbf formula   formula equivalent wrt validity original figure  clearly shows computational gain obtained                                                        ing symmetry breaking predicates  instances  complexity                                            solved efï¬ciently cases gain   let Ïƒ symmetry qbf cnfqsbp  Ïƒ   ders magnitude course exists instances  cnf representation qsbp Ïƒ worst case spacial breaking symmetries decreases performances                                         complexity cnfqsbp  Ïƒ oÏƒ  considering sempropabout  instances remaining instances  Ïƒ  ÏƒÏƒn Ïƒi xiyi  â‰¤ â‰¤ ntheworst  performance solver remains  case reached when cycles Ïƒ universal breaking symmetries       qsbp  Ïƒ          qsbpÏƒ  qsbp Ïƒ   case             â‰¤iâ‰¤n                           table  provides detailed results different qbf         qsbpÏƒy  qsbpÏƒy        âˆ’                              nb    â‰¤iâ‰¤n                    equal          families second column   represents number                                                                                                deï¬nition  qsbp Ïƒ  â‰¤iâ‰¤n  instances each family column   indicates                  nn                                instances contain universal symmetries   equal        interestingly using                  tt  new variables introduced cnfsbp size each family   represents total number  qsbp  Ïƒ linear unfortunately solved instances total runtime needed solving  correlations different symmetries qsbp asso instances  seconds added each unsolved  ciated set symmetries exponential worst case respectively  practice considered qbf instances num table  gives comprehensive  ber applied correlations deï¬nition  does exceed  sults respect each family breaking symmetries  consequently qsbp reasonable size signiï¬cantly improves semprop performances qbf                                                        families leading solved instances  instances sec                                                        ondly existence universal symmetries    experiments                                        important factor reducing search time surpris  experimental results reported section ob ingly noticed symmetries literals  tained xeon  ghz  gb ram performed     occurring innermost quantiï¬er group useless  large panel symmetric instances  available deed symmetries does lead great reduction                                                    ijcai                                                    
