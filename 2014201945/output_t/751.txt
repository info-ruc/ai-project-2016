             signaltoscore      music   transcription     using   graphical     models                                        emir  kapanci    avi pfeffer                                             harvard university                               division engineering  applied  sciences                                       oxford  street cambridge ma                                         Â                                            kapanciavi Â¡ eecsharvardedu                        abstract                            level target representation transcrip                                                        tion previous authors raphael cemgil kappen      present transcription takes music  proposed using graphical models automated      signal input returns musical score music transcription systems midi data input      stages processing used ï¬rst employs   second level goal      fundamental frequency detector onset build endtoend transcription goes way      tector transform input signals sequence ï¬rst level audio signal level musical score      sound events onset detection inherently work focus monophonic transcription com      noisy paper focuses second stage plex instrument voice monophonic transcription      ing sound events notated score use difï¬cult task worthy study raises      family graphical models task allow issues need addressed polyphonic transcrip      results onset detection noisy necessi tion attempted going level        tating search possible segmentations challenging task going level   going      sound events use large corpus monophonic level   onetoone mapping musical      vocal music evaluate results   events furthermore input midi data      show approach wellsuited prob pitch given does need detected      lem music transcription initial onset detec work needs track tempo      tion reduces number observations makes music transforming actual onset times durations      instrument speciï¬c search notated rhythmic positions durations      segmentations corrects errors onset      tection reasoning errors   going level  directly level  hard frames      magniï¬ed subsequent rhythm transcription      small unit short music signals repre                                                        sented long sequences frames each musical event                                                        consists frames need grouped    introduction                                       furthermore information frame needs summa  music transcription task transforming music signal rized instead frequencyamplitude spectrum need  symbolic representation musical events know fundamental frequency given frame  tains three levels representation music use preprocessing step level   relevant level musical score level  step consists fundamental frequency detec  common music notation consists musical events tor determines fundamental frequency sounding  attributes notated pitch â€œaâ€ octave  notated du each frame onset detector detects  ration quarter note notated rhythmic position ginnings musical events frame sequence  ï¬rst beat measure  second level musical event identiï¬ed overall pitch  representation performance terms sound events event deduced analyzing frames constituting  level midi data rhythmic attributes event previously built onset detector capable  events level actual onset time  sec handling soft onsets prevalent vocal music  onds beginning piece actual duration smooth pitch change vowel change kapanci   seconds pitch attribute level pfeffer  achieving stateoftheart perfor  discrete midi note  continuous mance completely reliable perfect onset   ï¬rst level representation sound tector exists miss onsets causing merge  signal common practice transform signal musical events reporting spurious onsets causing  sequence frames through shorttime fourier transform separate events furthermore pitch data produced  snapshots signal short period time onset detector continuousvalued noisy   msecs frame captures composition paper focuses transformation level    sound specifying amplitude frequency level  input noisy assume onetoone mapping events levels instead onset detector use previously published  allow possibility reported onsets false posi hierarchical method detects onsets signal com  tives onset detector tuned trade rate paring frames kapanci pfeffer   false positives false negatives use setting comparison function based fundamental frequencies  low false negative rate errors onset amplitudes returns dissimilarity frames  detection false positives detect pitch allow value threshold onset declared region  ing tuning performance change time delimited frames begins compar  need simultaneously  detect false positives seg ing adjacent frames gradually increases distance  mentation  tempo tracking rhythm transcription compared frames comparing frames   tuning tracking pitch transcription   distance apart detector able detect soft onsets    propose family graphical models accomplish happen smoothly time  tasks models properties sound events reduce number missed onsets use low dis  pend probabilistically properties notated events similarity threshold way extraneous  related false onsets sets false positives need eliminated later  sound events actually related stages missed onsets false negatives infrequent  tated event segmentation determines sound events experiments  onsets extraneous  grouped single note event  onsets missed  determines structure graphical model onsets marked signal segmented  different graphical model corresponding each possible cutting onsets continuous pitch attribute com  segmentation use markov chain monte carlo mcmc  puted each event average fundamental frequency  sampling search different structures parame comparison value each detected onset stored  ters                                                 used assigning prior segmentation probability each        evaluate model using corpus monophonic vo observation Â Â¦  described section  cal music results show absence perfect  onset detectors reasoning segmentation necessary  model  signaltoscore reasoning er  rors segmentation magniï¬ed subsequent rhythm likelihood sequence observed sound events  transcription show transcription beneï¬ts given family graphical models possi  musical knowledge easily incorporated bility false onsets possible groupings  graphical model prior distributions scores sound events observations note events segmenta                                                        tion determines sound events grouped        problem   statement                                determines structure graphical model                                                                                  Â¡Â¤Â£                                                         each segmentation    likelihood model deï¬nes      input music signal output                                                                                                                                                                                                                               Â¥     Â¨ Â¡Â¤Â£ Â¥  Â¡ Â£ Â¥                                                            probability observations Â Â¡Â¤Â£         given                                                                         musical score music signal ï¬rst processed using                                                                       Â¡Â¤Â£ a Â¡ Â£  Â¡ Â£                                                                                                                                               probabilistic dependency sound                                                   Â¥  onset detector yield sound event observations Â Â¢Â¡Â¤Â£                                                        events notated events different struc    graphical model each sound observation Â Â§Â¦                                                            tures difference connections                                               Â¦  sists observed duration Â¨Â©Â¦ frequency                                                             layers illustrated figures   leaf nodes corre                                             Â¡Â¤Â£   task ï¬nd segmentation   Â¡ Â£ score  each                                                            spond observations segmentation determines                                        Â¢  score event  consists notated duration pitch                                                               structure graph mapping                                         segmentation variable   number observed                                                                                                                                                             observation indexes  note event indexes  given                                                                                           events related th score event segmentation                                mqÂ¡                                                                                                                                                                                                     rts                                                                  edgfh  ji kml      p                                                                                                                                                                                 Â¦n       determines mapping score events observed                           Â¡                                                                tempo tuning continuous processes changing                                                  events  number observations ï¬xed  number note events dependent segmentation smoothly time model ï¬rstorder gaussian                                                            processes equations   tempo determines                                         Â¡Â¤Â£     goal ï¬nd segmentation   score                                                            notated durations observed durations notated du      Â¡Â¤Â£ maximize posterior probability segmen  tation score given observed data             ration multiplied tempo produce observed                                                            duration addition model fact durations                                        Â¡ Â£  Â¡ Â£    Â¤  Â¡Â¤Â£  Â¡Â¤Â£  Â¡Â¤Â£ Â¥                                       Â                                                             deviate reï¬‚ecting change tempo accom                                                                                                                                                                                         plished ï¬rst including gaussian noise uwv                                                           Â¤                                                 Â¥  Â¡Â¤Â£  Â¡Â¤Â£   Â¡Â¤Â£  Â¡Â¤Â£                         Â Â¡ Â£                            model observed duration equation                                                                                                                 model fact tempo remains  assuming independence prior distributions score stant successive deviations likely compensate each      segmentation graphical model detailed section note sounds shorter written                                Â¡Â¤Â£ Â¥ Â¡Â¤Â£  Â¡Â¤Â£                                 deï¬nes  Â               style speciï¬c score duration followed note sounds longer                                                                                                                                           Â¡ Â£       prior Â¡Â¤Â£  segmentation prior  based  vice versa result intentional                                         onset  detectorâ€™s outputs output score unintentional deviations common various styles                        Â¡Â¤Â£ mapping observations score events tentionally produce effect example swing rhythm                     Â¡ Â£  evaluate using metric presented section  given successive eighth notes ï¬rst lengthened                                                                                            Ï        Ï       Ï                             note donâ€™t observe  directly through                                                                                                                                                                                                              Â¦                                                                                             durations Â¨ individual sound events                                                                                                                                                                                                                                                                                                                         Â¦                        Ï‰        Ï‰       Ï‰                               Â¨                                                             Â¡                                                          Â¦         hand model directly speciï¬es                                                                                         observed frequency  Â¦ individual sound events                                                                                                                                                                                    Â¥Â¥Â¢Â¥                                                                                                                                                                                                               Î»        Î»       Î»                      deï¬ne rhythm prior jÂ¡        hidden                                                                                                                                     markov  model hmm  learned ofï¬‚ine using rhythm se                                                        quences corpus music style evalu                    Ï„        Ï„       Ï„                                                                                                     ation data pitch prior use gram model                                                             assumes each element sequence               â€¦                 â€¦            â€¦                                                                                                                                                                 Â£                                                        depends previous elements deï¬ne prior       ts âˆ’  ts   ts  ts  ts   ts   ts                                       intervals individual pitches allows                                                        generalization different keys probabilities                 figure  rhythm model                                                          model estimated ofï¬‚ine gram frequencies                                                        training data            Ï€        Ï€       Ï€                                                segmentation prior indicates each observed sound                                                        event probability truly onset immedi                Î´        Î´       Î´                                              ately event obtain segmentation prior                                                        use dissimilarity values returned onset detector                                                            each observation goal individually estimate                                                                                                                                                                                                    Â¦                                            Â¦           skâˆ’  â€¦ sk  sk   sk  â€¦ sk  sk  â€¦ sk      onset     probability actual onset                                                                                                                                                                                                                                                                                                  right th observation given dissimilarity Â¦                  figure  pitch model                 following observation formal density                                                        estimation method sigmoid ï¬tting provides appropriate                                                        solution platt  suggested transform  second shortened example doubledotting classiï¬erâ€™s output values probabilities using training      common effect baroque music dotted note corpus onset detection learned following func                                                                                                                                                                 Â§Â¥  Â§Â¦Â¥ Â©                                                                                                 Â¡                                                                       Â§                                                                                  f                                                                                      Â£  lengthened subsequent note shortened com tion                             shape  pensation model natural model unintentional function makes sense dissimilarity increases  viation performer likely maintain constant beat assigns increasing probabilities  presence      notes subdivide beat given onset order avoid probabilities close                                                                                                                                                                                            Â¤Â¥ Â©                                                                                          Â§      time ï¬ll result shorter notes compensated used weighted average   prior                                                                                                                                                                     Â¤Â¦Â¥Â¨Â§Â¤Â¥ Â©                                                                      Â¤Â¦Â¥                                                                                                                                                                                                                                                                                                                     Â¦                                                                 Â¦  longer notes ï¬ll required time capture onset Â¦                        effect including ï¬rstorder stealing process equation   individual segmentation priors observations                                                                                                             allows successive durations deviate opposite di                                        Â¡ Â£                                                        computed prior probability segmentation        rections affecting overall tempo accom computed multiplying                                                                              Â¡             Â¥q Â¡      plished having negative value stealing coefï¬cient       Â¥q                                                                                                              Â¤Â¦Â¥Â¨Â§ Â©                                                                                                       Â Â¢Â¡                                                                                                 value Â£  used experiments given                                                                                                                                                                                                    Â©                                                               Â¡ Â£  Â¡Â¤Â£ Â¥                      Â£                                                                                       Â¦                 Â¦  Â¦                                                                                onset Â¦              onset                                                                                                                                                                                              note duration Â¢ observed durations depend linearly                                                                        Â¡     Â¡  Â¡     Â¡                                                                      Â¦    Â¦ Â¦    Â¦    Â¦  Â¦    tempo stealing processes equation     pitch process tuning additive offset  added notated pitch produce observed frequency  inference  equation  addition allow frequency deviate goal compute maximum posteriori map      independent tuning equation  includes gaussian segmentationscore conï¬guration given equation  let                                                                           uÂ¢         noise term   noise terms equations   model set possible note durations  set pos                                                                                                    Â¥      observational errors local deviations     sible pitches given observation sequence Â Â¢Â¡ Â£                                                                                                                                                                                                                                                         Â§                                                                                                Â¥qÂ¡                                                                                Â¤                                                                                                                                                                    possible segmentations        possible                           mqÂ¡                                  u               tempo                                                                                                                                                                        Â¤           scores each segmentation note events expo                           Â Â¢Â¡       Â¡                                                                                                                 mq Â¡                                                  stealing                                                                                                                                                                                                                       Â¡ Â£                                                             nential number possible   Â¡ Â£ pairs makes exact                                                                                           m            duration                                      computation map conï¬guration intractable                                               Â¤            fore use mcmc methods gilks et al  sample                          mq Â¡f                                  u               tuning                                                                                                                                              space possible pairs                       f                                                    u           frequency   Â¦                     st                                                                      inference procedure similar handling ref                                                                                              Â¤                                                   Â¡                                d                                                            Â¢         assume                            erence uncertainty ï¬rstorder probabilistic models pasula                                                    Â¤               Â¤                Â¤                                   Â¡            Â¡                                                      u                                                                    russell  alternate mcmc steps                                                 Â¤              Â¤                 Â¤                                                u              u                                          inde change segmentation gibbs steps sample dura      pendent each variance values used ex tion pitch given segmentation changing                            Â¤            Â¤           Â¤                                              Â¡                                  Â¡                                                                                         periments                                   segmentation reversible jump mcmc green  em             Â¤           Â¤            Â¤          Â¤                                                          Â¡                                                                                                                               ployed model dimension changes split            Â¤             qÂ¡                                                               merge events      reversible jump  mcmc                            currently assigned note  random variable uni                                                                                                                                                               Â¡                                                                                                                                                                                                                                            mcmc   methods used generate samples com form density split   qÂ¡  merging determin                                                        istic donâ€™t random variable equation           plex target distribution analytical numerical tech                                                                                                 niques applicable case target pos simply merge    finally itâ€™s easy                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            merge        split                                                                                                           terior distribution transcription given observations                                                                                                                                                                                   Â    Â¡Â                                                                                                                                                                       equations                                                              Â            Â                                                                                                                                                                                                                                                                                           trying ï¬nd mode                                                                                                                                                                                                                                                      distribution wellknown methods equal                                                                                                                                                                                                                        struct markov chain stationary distribution guaran putting following ac      teed target distribution metropolishastings ceptance probabilities merge split moves                                                                                    Â¥Â    Â                                                                                                               qÂ¡                                                                       Â¢                                                                    Â¡Â  Â                                                                                                    d                                                                                         Â            Â£  algorithm candidate samples generated pro             Â¦Â¨Â§                                                               Â¤                              split                      Â¡Â Â£Â¢ Â                                                                                                                                                                                        Â¡Â                                                                                           Â                                                                             d                                                                                      Â¢                                                                merge                           Â¢                                posal distribution   accepted probability                                                                                                                                                                                                                                                                                         Â                                                                                                      merge              Â¢       Â¥Â  Â                                                                                                                                                                                                                                                                                                        Â¦Â¨Â§ Â©                            Â¨                               Â¥        Â¤                   d                                                                                                                                                                                                    Â¥Â    Â                                                             Â¡                                      applicable                                           Â¡Â                                                                       Â¢                                                                                            Â¡Â  Â                                                                                                                                                                                            Â                                                                         Â¦Â¨Â§                                                                   Â¤                                  merge                                                                                                                            Â                                                                                        Â¥Â                                                                                                 Â                                                                            d                                                                                 Â¢            does ï¬xed dimensionality                           Â¢                                                                                                      Â¡                                                                split                                                                                                                                                            dm                                                                                                                                                                                                                                                                                  Â£                                                                                    Â                                                                                                 split                                                                                                                                                                              problem different segmentations correspond dif                                  ferent numbers notes different numbers                                                                                                         parameters reversible jump mcmc method allows   total number observations associated  sample target distribution dimension notes merging number  ality model ï¬xed acceptance probability observations associated note splitting      moving model model different dimen  generating samples                                                                                   sion given                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               Â¢             Â¡Â  Â                        Â¦Â¨Â§                         Â©                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Â¡ Â£                                                                                   Â¡ Â£         Â¤                                               given sample                 new samples gener                              d                                                                        ated follows                                       Â¡Â Â¢ Â¢             Â¥Â Â£Â¢                       Â¥Â      Â¥Â¢                                                                                                                                                                           pick index                                                                                                                   Â                                                                                                                                                                            Â¥Â              Â¡Â                                     Â                                                                                                                                                                                                                                                                                                                                                              Â                                                                                         resample th note keeping segmentation                                                                                                                                                    Â¢                                                                                                                                                                                                                                               notes                                                                         Â¡                                                                                                                                                                                                                                                                        model indicators determine num                                                                                                                                                                          Â¢                Â     Â                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               Â¡                                                                                                                                                 ber notes parameter vectors sizes                      Â¢            Â¥                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         Â¥Â£           respectively  prior probability model                                                                                                                                    Â¢                                                                                                                                                                                                   Â¡                                                                                                                                                                                                    j Â¡ Â£  q Â¡Â¤Â£ Â¥                                                                                                        Â            probability moving model                                                      Â¢  Â¢                                                                                                Â¥Â       Â¥Â                                                                 sample value                                                                                                                                                                                                                                                                                                                                                           Â                                                                                  Â¡                                                                            Â¡                                                                                                                                                                                                  function                 mapping pa                                                                                                                                                                                                                                                                                                                                                                                                                                                             Â¡Â¤Â£                                                                                                                                      let             Â¡Â¤Â£   accepted automatically      rameters models mapping entail random                                      Â¢                                 Â Â¢                    sample generated gibbs sampling      decisions generate parameters given cur                         rent parameters Â   decisions denoted  change segmentation ways                                               Â¥Â                                                                                                                                                                                                                                                    probability   merge th note suc      variable  probability distribution                            merge                                                                                    assume segmentation rhythm pitch cessor       Â¢                                                                                                                                                                                                                                                            Â£                                                                                              priors independent ï¬rst terms fraction                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Â¡      equation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               Â                                                                                                    Â¥    Â¡Â                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            d                                                                                                                                                                                                                                                                                                                                                                                                                        a  Â£                                                                                                                                                                                                                                           Â                                                                              Â                                                                                                                                                                                                                                                                                                                                                            Â¢                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      a                                                                                               Â¡                                                                                        Â¡        terms right hand side equation  respectively                                                                                                                                                                                                                                                                 given segmentation prior rhythm prior pitch pick value  using gibbs sampling                                                                                                                                                                                               prior likelihood model                         probability split Â£  merge split th note                                                                                                                                                                               during sampling allow kinds moves  integer chosen uniformly random                                                             d                                                                                    Â£                         change model dimension merging neighboring notes     possible                                                                                 Â¢                                                                                                                                                                                                                                                           splitting single note rhythm                                                                                                                                                                                                                                                                                                                                                                                                                   pitch components sampled using gibbs sampling                                                                                                                                                                                                                                                                                                                                          change model dimension donâ€™t discuss ac                                                                                                                                                                                                                                                                                    Â£b                                                                                Â¡                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         ceptance probability instead focus                                                        Â                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              a  Â£                                                                                                                         segmentation component  possible values                                         Â¢                                                                                                                Â¢                                                                                                  Â§                                                                                                                                                                                                                                                                                                                                                                                                                                                                             fd                                                                                                                                                                                                a                                                                                                         Â¡  qÂ¡          equal split      merge                                      Â¢                                                                                                                                                                                                                                                                                                                                                                                                                                                 Â£   functions merge split deï¬ne                                                                                                                                                                                                         Â¡                                                             jointly sample values                 mappings models                                                                                                                                                       Â¡  Â¡ Â£   Â Â¡Â¤Â£ Â¥                                                                              Â£  Â¡                                                                                            merge split respectively                                                                                                                                                                Â Â£Â¢                                                                                                                                                                                                                                                                                                                                                                                                                                                   Â¡ Â£  Â¡Â¤Â£                                                              Â¡     Â¡     Â¡                                                               let                   candidate sample                                                                                                       merge                                                             Â                                                                                         different segmentation  acceptance proba                                                                    Â Â£Â¢                                                                    Â£                 split                            bility sample given equations  equation  choose splitting point ran   decided corresponds merge  domly possible boundaries observations split      step  pick random   pro audio fragments removed ï¬rst pur                                      Â¥ Â¥ Â¥                                    d                                        cessing events sequentially     allows compu  pose tuning variance parameters graphical      tational savings factorize likelihood model sigmoid parameters segmentation                                                                                   prior used evaluation                                             Â¡ Â£ Â¥ Â¡Â¤Â£  Â¡Â¤Â£  Â¡ Â£   Â¡Â¤Â£  Â¡Â¤Â£            Â                 Â                                                            Â¡Â Â£Â¢                                                             evaluation metric                                         Â¡ Â£ Â¥  Â¡Â¤Â£   Â¡Â¤Â£ Â¥Â¤ wÂ£ Â¦Â¤  Â£                                                   Â                                                                                                                                                                                                                                                                                    Â¡Â¤Â£                                                               given true score Â¡Â¤Â£ segmentation  obser                                                                   Â Â§Â¡ Â£ Â¥                                                                                                                                                        Â¤                                                                                                                                                        Â¡ Â£    denotes hidden variables    ï¬rst vations    evaluate systemâ€™s result Â¡ Â£      factor computed incrementally new samples taken follows          ed                   second factor depends future segmentation count number correct onsetno      observations efï¬ciently computed advance onset decisions number possible segmentation lo                                                                                                                                            Â£       backward ï¬ltering pass                  cations                                  Â¡ Â£  Â¡ Â£                        given            relationships continu musical score systemâ€™s segmentation                                                                                                                                                                                                                                                                                                                                      ous variables model linear additive change different reference segmentation comparing Â¡ Â£                                                                       noise variables gaussian linear dynami                                                                          Â¡Â¤Â£                                                         directly    meaningful instead evalu  cal integration hidden variables ate score looking number rhythm pitch  equation  computed analytically using kalman ï¬l errors remaining segmentation errors ï¬xed  tering necessary probabilities represented instance half note transcribed successive quarter  gaussian potentials multiplication conditioning notes pitch consider segmentation      marginalization three basic operations       error extra onset rhythm transcription error sim                                                problem individual sampling  ilarly successive quarter notes pitch  neighboring notes transcribed half note segmentation error  unlikely sample good value cur missed onset hand successive quarter  rent assignment overcome deadlocks                                                               notes different pitches transcribed half note                                     Â§  Â¡w                                     randomly sample score pairs      jointly step pitch error addition segmentation error   steps   performed joint samples ideally correcting missed onset splitting  like sample events jointly given segmenta half note transcription pitch different  tion result exponential sampling space real score        deï¬ne mcmc   iteration sequence sam  returning extra onset case half note tran                                        plings      iterations randomly scribed separate quarter notes different pitches      propose global sampling step global oper segmentation error corrected quarter                                                    ations shifts pitches sample Â§  notes replaced half note single pitch need  halves doubles durations result                                                           choose pitches quarter notes      halving produces duration  randomly select                         Â©Â¨                          Â¤                                 pitch half note pitch er                         closest element    zero duration assigned ror addition segmentation error depending  observation grouped neighbors pitch chosen half note choose  experiments used  chains  iterations pitch related observation longer duration  chain each chain starts initial sample ob equal real pitch pitch error general  tained matching observations closely possible izes naturally cases single true note transcribed  segmentation prior observation  multiple notes  group successor durations rounded                                                           evaluation durations note transcribed  closest duration  frequencies rounded multiple notes extra onsets compare sum    closest pitch   starting sample opposed durations reference duration multiple notes tran  random allows good transcription faster scribed single note missed onset compare dura                                                        tion note sum reference durations    experiments                                        extend idea evaluate cases misplaced onsets    training evaluation data                     computed transcription contains onset different  corpus monophonic vocal music used evaluate place reference transcription reference  various components corpus consisted computed transcriptions onsets ap  parts contained scores audio data pear compute durations new segments  used evaluate test data summing durations constituents  tal duration  minutes composed  audio segments compared evaluate rhythm transcription  containing total  notes pieces  naissance composer gp palestrina th century sung  results  singer second corpus consisted present results evaluation ta  scores audio data used learn bles   table  contains results obtained sam  rhythm pitch priors  pieces palest pling process described section  process generates  rina appeared ï¬rst samples posterior distribution transcription
