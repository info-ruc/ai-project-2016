                                     logical circuit filtering                                       dafna shahaf       eyal amir                                       science department                                 university illinois urbanachampaign                                          urbana il  usa                                         dshahafeyaluiucedu                        abstract                            approaches developed represent belief                                                        states compactly logic bdds bryant  log      logical filtering problem tracking pos ical filter database progression winslett  lin      sible states world belief state sequence reiter  update representation      actions observations fundamental guarantees compact representation simple      applications partially observable dynamic  domains amir russell  instance guarantees      mains paper presents ï¬rst exact logical compactness tractability sequences strips      ï¬ltering algorithm tractable determin actions preconditions known hold impor      istic domains tractability result interesting tantly straightforward approach logical filtering      contrasts sharply intractability ciding clause belief state representation      sults structured stochastic domains key time  based belief state time twasshown      advance lies using logical circuits repre conpcomplete liberatore       sent belief states prove ï¬ltering time                                                          paper show solving update problem      representation size linear sequence                                                        entirety easier polytime creating new      length input size independent                                                        belief state piecemeal present cfilterâ€“ ï¬rst exact      domain size actions compact repre                                                        tractable logical filtering algorithm handle      sentations number variables result                                                        terministic domain importantly time compute      ing formula number state features                                                        lief state space represent depend      report reasoning algorithm answer                                                        main size furthermore number variables result      ing propositional questions circuits                                                        ing formula number state features com      handle questions past time steps smooth                                                        pare Â· number variables used bounded      ing evaluate algorithms extensively ai                                                        model checking clarke et al       planning domains method outperforms com      peting methods orders magnitude   extend cfilter nnf circuits internal negation                                                        nodes show similar space time bounds hold                                                        restricted representation show    introduction                                       reason output circuit including smoothing queries  work ai applies models state changes past results useful perspec  time applications use dynamicsystem models tive representationspace complexity sidestep previ  diagnose past observations predict future behavior make ous negative results beliefstate representation section  decisions applications consider multiple possi  intractability results stochastic domains  ble states initial state known key advance lies using logical circuits rep  state observed fully time step resent belief states instead traditional formulas show  fundamental reasoning task domains logical updating logical circuit formula amounts adding  filtering amir russell  task ï¬nding internal connectives original formula ad  set states possible belief state sequence ob vantage determinism feature true action iff  servations actions starting initial belief state action true true action    logical filtering large deterministic domains impor did change interestingly empirical examination  tant difï¬cult planning monitoring diagnosis suggests graphical representations bdds  partially observable deterministic domains estimate maintain compact representation updates  lief state biere et al  cimatti roveri  cfilter applies problems require beliefstate  bertoli et al  petrick bacchus aspartof update bounded model checking planning  performing computations estimation difï¬cult partial observability attractive nature approach  number states belief state exponential apply standard planning techniques fear  number propositional features deï¬ning domain reaching belief states large represent                                                    ijcai                                                      logical filtering                                  possible orientations left  problem logical filtering tracking rotating triangle  degrees each possible state updated  state world referred filtering imag middle world state weâˆš   ine assembly robot items order edge expect edge  construct machine parts randomly oriented observing edge right robot eliminates  brought goal orientations assembly belief state leaving robot  beginning parts located conveyor belt knows orientation triangle  each drifts hits fence perpendicular belt  rotates edges aligned fence                                            figure  sensor measures edge providing par  tial information partâ€™s orientation partial  edges equal length sensor  noisy robot rotate certain  discrete place belt pick                        try assembling deï¬ne problem formally  deï¬nition  deterministic transition transi  tion tuple p r ï¬nite set propo  sitional ï¬‚uents âŠ† powp  set world states state               contains exactly ï¬‚uents true ï¬nite set                                Ã—   â†’                                                                âˆš  actions   transition function figure  beliefstate update   triangle left pos                                                        sible initial states middle progressing rotateâ€“ rotating  executing action state results state rs    â—¦  partial example   onbeltpart partofassem thetriangleby putting belt right  blypart touchparte touchparte     observing length state eliminated  pickuppart assemblepart rotatepart    sequel assume implicit transition   circuit filtering                                                                                                                                                   filtering hard problem  belief states                                                        naÂ¨Ä±ve methods enumeration intractable large                                                        domains following amir russell werepresent                                                        belief states logic solution provides foundations                                                        research guarantees exact compact rep                                                        resentation classes models restricted                                                        action models beliefstates canonical form use log  figure  conveyor belt triangle drifts hits fence ical circuits ï¬‚at formulas order extend results  rotates edge touching fence measured deterministic domains section                                                        representation explain update action    robot tries track state world observation sequence reason result  observe completely possible solution  maintain belief stateâ€“ set possible world states  representation    âŠ†  Ï   belief state robot updates belief state beliefstate Ï represented logical formula Ï•  result performing actions receiving observations  âŠ‡ astates Ï iff satisï¬es Ï• âˆ§ Ï•  deï¬ne semantics filtering              satisï¬able Ï• beliefstate formulawerepresent  deï¬nition  filtering semantics amir russell  belief state formulas circuits    âŠ†                                           âˆˆ  Ï   states robot considers possible ai deï¬nition  logical circuits logical circuits di  assume observations oi logical sentences  rected acyclic graphs leaves represent variables    filterÏÏ  sequence             internal nodes assigned logical connective each                               âˆˆ       filteraÏ   rs Ï                  node represents formulaâ€“ applying                    âˆˆ                 filteroÏ  Ï true                 connective nodeâ€™s children    filteraj ojiâ‰¤jâ‰¤tÏ                                                        allow connectives âˆ§ âˆ¨ Â¬ Â¬ nodes       filter ajoj ijâ‰¤tfilteroifilteraiÏ                       âˆ§  âˆ¨  step  progression step  ï¬ltering exactly child  corollary                                                         explain avoid internal Â¬ nodes nnf                                state Ï  rs performing use logic represent domain description  action receiving observation eliminate ï¬nite set effect rules form â€œa causes gâ€  state consistent                 action propositional formulas  wlg    figure  illustrates beliefstate update imagine thatâˆš conjunction literals semantics rules  robot isosceles right triangle edges size   follows performing state iterate through  edges currently touching fence rules ruleâ€™s precondition holds effect                                                    ijcai                                                    hold rs leads contradiction state formula Ï•  domain description dit  possible execute rest ï¬‚uents stay outputs ï¬ltered belief state logical circuit  preconditions hold state does change algorithm maintains circuit data structure point  make action failure lead sink state            ers nodes pointer node represents    consider triangle figure  triangle formula rooted node used  belt action  rotate rotate touching edge interchangeably maintain pointers following  change aâ€™s effect rules mulas  formula cb constraint base â€“ knowledge  â€œa causes touche âˆ§Â¬touche onbelt âˆ§ toucheâ€ obtained far sequence receiving observations  â€œ causes touche âˆ§Â¬touche onbelt âˆ§ toucheâ€ knowing actions possible execute constrains                                                                                   âˆˆ  â€œa causes touche âˆ§Â¬touche onbelt âˆ§ toucheâ€ belief state  ï¬‚uent  formula explf                                                        formula explains true figure     cfilter                                         node marked etch explanation formula touche                                                        time root node explanation time   described domains beliefstates represented number variables representation  present circuitfiltering algorithm cfilter small  allowing formulas involve ï¬‚u                                                        ents time  way similar regression explf  procedure   cfilteraioiiâ‰¤tÏ•d                expresses value ï¬‚uent function ini  ai actions oi observations Ï• initial belief state  tial world state cb gives constraints initial    domain description                               Ï•                      state                                           preprocess                         belief state cbâˆ§ â†” expl inother                  a                                                           fâˆˆp            processdomain    iâ‰¤t                          words possible model satisfy cb each ï¬‚uent    âˆˆ explf  new proposition    cb  timeÏ•                                    replaced formula explf                       process sequence                    preprocessing phase extract data    ito                                    main description procedure cfilter line  cre         progressactionai                           ate node each ï¬‚uent initialize explf pointers         filterobservationv oi                      create circuit initial beliefstate Ï•             âˆ§      â†” explf     return cb  fâˆˆp                                    using explf nodes set cb pointer lines                                                          iterate through sequence update circuit  procedure   progressactiona                                                    pointers time step lines      action                                          ï¬nally return updated belief state             update cb executed possible                 fâ€™s nextvalue explanation        closer look                                   Â¬f             caused held did cause          circuit constructed follows preprocessing    âˆˆ effectsa                             stage extract useful formulas domain         cb  cb âˆ§ time possaf                                                        scription let effectsa set ï¬‚uents action         explf  time nextvalaf         âˆˆ                                          affect each set need know      effectsa explf explf                   affect fletcauseaf formula describing  procedure   filterobservationo                      causes true simply precondition rule  observation                             causing hold disjunction                                                                                                    cb  cb âˆ§ timeo                               set false   causeaf                                                        possible execute hold causeaÂ¬f  procedure   timeÏˆ                                  deï¬ned similarly  Ïˆ             aformula                                             example      rotate section              return equivalent circuit time    effectsatouche touche touche        âˆˆ   Ïˆ                 replace node pointed explf                           âˆ§    return Ïˆ                                             causeatouche  onbelt touche                                                           causeaÂ¬ touche  onbelt âˆ§ touche   procedure   processdomaind aiiâ‰¤t                                                          procedure progressdomain constructs formula   domain description ai actions          extract â€next valueâ€ â€possibleâ€ formulas  nextvalaf evaluates true iff holds                                                        given previous state intuitively caused    âˆˆ âˆˆai         nextvalaf  causeaf âˆ¨ âˆ§Â¬causeaÂ¬f  hold held did affect similarly         possaf  Â¬causeaf âˆ§ causeaÂ¬f     formula possaf states possible execute regard         optional simplify formulas                ing did cause true false                                                        time                figure  cfilter algorithm              preprocessing iterate through sequence pro                                                        cedure progressaction uses formulas update                                                        lief state constructs circuit asserting action  algorithm overview  cfilter presented figure  demonstrated section causeaf represents conditions cause extracted   receives actionobservation sequence initial belief domain description                                                     ijcai                                                    possible corresponding poss formula adds initial value true note ï¬‚uent  cb line  builds circuit nextval formula time step corresponding node track  procedure time ensures circuit uses time ï¬‚uents nodes replace ï¬‚uents time step ex  construct new poss nextval circuit leafs planations queries given advance does  represent ï¬‚uents previous time step time replaces change complexity ï¬nding pastexplanation  equivalent explanation nodes circuit im node olog time note mecha  plementation crucial efï¬ciency replacement nism tracking previous explanations interesting  instead copying formula need applications ï¬ltering nonmarkovian domains  date edges graph using pointers way  share formulas recursively maintain compactness sat circuits    new circuits built explanation point building query circuit check satisï¬ability tradi  ers updated line  new explanation root tional approaches check circuitsat converting circuit  corresponding nextval circuit built earlier line  cnf formula approaches doing grow  section  deal observation procedure representation exponentially duplicating shared subfor  filterobservation similarly use time time mulas grow number variables signiï¬cantly  formula simply add cb                       instead run inference circuit number                                                        works show structural information lost cnf en                                           coding used sat procedures signiï¬cant                                                   formance improvement using circuit sat solvers                       âˆ¨                       solve problem efï¬ciently effectively origi            âˆ§                                      nal nonclausal encoding algorithms                                                       proposed recently taking advantage circuit structure                                    âˆ§                   ganai et al  thiffault et al  use                            âˆ§                           simple algorithm cdpll                                                          cdpll  generalization dpll iteration                                  uninstantiated variable chosen set truethe                                                        truth value propagated far possible resulting                                            smaller circuit example parent                                                        set true cdpll called recursively  figure  updating explanation touche rotate                                                        satisfying assignment backtracks tries                                                        ffalse assignment return unsat    example   figure  shows update explanation                                                        cdpll  takes oeÂ·l time oe space circuit  touche action rotate rectangles                                                        edges leaves  nodes represent explanation pointers time  action circuit image nextval  formula procedure time replaced ï¬‚uents cor  extended example  responding explanation nodes                         detailed example process inter    âˆ¨ node root graph representing state estingly example demonstrates logical circuits  touche action right branch describes case represent compactly belief state represent  action caused hold left branch compactly using cnf formulas variables  case held action did falsify domain includes ï¬‚uents  pn odd follow  iteration pointer touche point node ing sequence actions makes odd equal âŠ• âŠ• pn    note reuse timet explanation nodes parity ï¬‚uents actions  anâˆ’  internal nodes possibly representing large subformulas deï¬ned sets odd  âŠ• ai                                                        sets odd  odd âŠ•  formally    query answering end formula                                                                                                         âˆ§Â¬   âˆ¨  Â¬  âˆ§                                                          â€œa  causes odd       â€  cfilter returns updated belief state Ï•  represented â€œa causes Â¬odd Â¬p âˆ§Â¬p âˆ¨ Â¬p âˆ§ pâ€  logical circuit interested satisï¬ability queries â€œa causes odd odd âˆ§Â¬p  âˆ¨ Â¬odd âˆ§ â€  Ï•t âˆ§ Ïˆ satisï¬able entailment queries Ï•t  Ïˆor                                                                                               â€œa causes Â¬odd Â¬odd âˆ§Â¬p  âˆ¨ Â¬odd âˆ§ â€   âˆ§Â¬                                                                                           Ï•    Ïˆ unsatisï¬able following construct circuit                                    âŠ•  corresponding query run inference     applying sequence  anâˆ’ sets odd  pn                                                        show algorithm maintains belief state  query circuits                                        sequence  let Ïˆ arbitrary propositional query formula want  check Ï•tâˆ§Ïˆ satisï¬able similarly obser preprocessing domain  vation add Ïˆ cb replace ï¬‚uents expla phase extract poss nextval formulas  nations new cb query circuit queries usually examine action speciï¬cations ï¬‚uent  time circuit structure allows interesting affected odd executable does cause                                                            Â¬  queries particular smoothingâ€“ queries refer past odd odd  did change value  steps causeaodd âˆ§Â¬p âˆ¨ Â¬p âˆ§                                                    ijcai                                                       causeaÂ¬odd  Â¬p âˆ§Â¬p âˆ¨ Â¬p âˆ§                                               possaodd  Â¬causeaodd âˆ§ causeaÂ¬odd                              easy hold simultaneously                          formula simpliï¬ed true                                                                                          Ï•   executable similarly actions possible time initial belief state true  execute poss formulas equal true    nextval formulas executing odd                       âŠ•     â‰¡       âˆ¨  set causeaodd âˆ¨ odd âˆ§Â¬causeaÂ¬odd                                                                                           âˆ§    âˆ§    equivalent causeaoddinotherwordsodd                                              set âŠ• similarly action ai odd                        âŠ•                                                                               set pi odd note simplifying formulas            âŠ•  mandatory representation compact      executing actions                                                          imagine    receive  arbitrary sequence                                                                                              aa  anâˆ’ odd âˆ§Â¬pn performing actions                                     receiving observation figure  describes                                                                     time performing  algorithm updates beliefstate sequence  time  create node ï¬‚uent                                                                           true nodes represent value ï¬‚uent time                                                                    set pointer rectangles each formula                 âŠ•  want maintain formula cb constraints set  true  initial knowledge              âŠ•  explanation formula each ï¬‚uent set corresponding  node                                                                           execute arriving time  constraint  added cb action executable                                                                 explanation formula pi changed does affect       time performing aa  thing changed state odd new  explanation  âŠ•  construct graph                                                                                          mula update explanation pointer root node                           note image shows xor gates just sake clar                               âŠ•       âˆ§  ity fact each replaced ï¬ve gates                âŠ•  depicted                                                          executing similar time  construct graph             âŠ•                   oddâ€™s new value odd âŠ• note substitute  ï¬‚uents formula oddp explanations time        âŠ•   pointers previous time step                                           âˆ§Â¬    execute  anâˆ’ observe odd pn                  just example observation alternatively                                                                                       think querying possible odd âˆ§Â¬pn  holds process actions update ex time tn performing  anâˆ’ observing                               âˆ§Â¬  planation odd add odd pn constraints                   odd âˆ§Â¬pn  creating new cb circuit updating pointer finally  return circuit pointers                                                                                                     updated belief state                                                                   âŠ•       âˆ§  answering queries                                                                show example truthvalue propagation                       âŠ•                                                                               assume time  ptrue rest set false                                 values propagated result cbtruethat                 âŠ•                    assignment consistent sequence                 âŠ•      analysis complexity                                                               correctness                                                                                       theorem  cfilter correct formula Ï•                                       sequence actions observations aioi iâ‰¤t                figure  propagating truthvalues       âˆˆ satisfy cfilteraioiiâ‰¤tÏ•         filteraioiiâ‰¤ts âˆˆ satisfy Ï•                                                    ijcai                                                    
