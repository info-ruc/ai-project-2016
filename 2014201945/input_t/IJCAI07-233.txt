       Quality Guarantees on         k-Optimal Solutions for Distributed Constraint
                                     Optimization Problems

                                Jonathan P. Pearce and Milind Tambe‚àó
                                    University of Southern California
                                     Computer Science Department
                                  {jppearce@usc.edu, tambe@usc.edu}

                    Abstract                          to a system that scales up easily and is more robust to dy-
                                                      namic environments. Researchers have introduced k-optimal
    A  distributed constraint optimization problem    algorithms in which small groups of agents optimize based
    (DCOP) is a formalism that captures the rewards   on their local constraints, resulting in a k-optimal DCOP as-
    and costs of local interactions within a team of  signment, in which no subset of k or fewer agents can im-
    agents. Because complete algorithms to solve      prove the overall solution. Some examples include the 1-
    DCOPs are unsuitable for some dynamic or any-     optimal algorithms DBA [Yokoo and Hirayama, 1996] and
    time domains, researchers have explored incom-    DSA  [Fitzpatrick and Meertens, 2003] for distributed con-
    plete DCOP algorithms that result in locally opti- straint satisfaction problems (DisCSPs), which were later ex-
    mal solutions. One type of categorization of such tended to DCOPs [Zhang et al., 2005a], as well as the 2-
    algorithms, and the solutions they produce, is k- optimal algorithms in [Maheswaran et al., 2004], in which
    optimality; a k-optimal solution is one that cannot optimization was done by agents acting in pairs. Previous
    be improved by any deviation by k or fewer agents. work has focused on upper bounds on the number of k-
    This paper presents the Ô¨Årst known guarantees on  optima in DCOPs [Pearce et al., 2006], as well as experi-
    solution quality for k-optimal solutions. The guar- mental analysis of k-optimal algorithms [Zhang et al., 2005a;
    antees are independent of the costs and rewards in Maheswaran et al., 2004].
    the DCOP, and once computed can be used for any
    DCOP of a given constraint graph structure.         Unfortunately, the lack of theoretical guarantees on the
                                                      quality of solutions obtained by k-optimal algorithms was a
                                                      fundamental limitation; until now, we could not guarantee a
1  Introduction                                       lower bound on the quality of the solution obtained with re-
In a large class of multi-agent scenarios, a set of agents spect to the quality of the global optimum. In this paper, we
chooses a joint action as a combination of individual ac- introduce such guarantees. These guarantees can help deter-
tions. Often, the locality of agents‚Äô interactions means that mine an appropriate k-optimal algorithm, or possibly an ap-
the utility generated by each agent‚Äôs action depends only propriate constraint graph structure, for agents to use in sit-
on the actions of a subset of the other agents. In this uations where the cost of coordination between agents must
case, the outcomes of possible joint actions can be com- be weighed against the quality of the solution reached. If in-
pactly represented in cooperative domains by a distributed creasing the value of k will provide a large increase in guaran-
constraint optimization problem (DCOP) [Modi et al., 2005; teed solution quality, it may be worth the extra computation or
Zhang et al., 2005a]. A DCOP can take the form of a graph in communication required to reach a higher k-optimal solution.
which each node is an agent and each edge denotes a subset of For example, consider a team of autonomous underwater ve-
                                                                  [                ]
agents whose actions, taken together, incur costs or rewards hicles (AUVs) Zhang et al., 2005b that must quickly choose
to the agent team. Applications of DCOP include sensor net- a joint action in order to observe some transitory underwa-
works [Modi et al., 2005], meeting scheduling [Petcu and ter phenomenon. The combination of individual actions by
Faltings, 2005] and RoboCup soccer [Vlassis et al., 2004]. nearby AUVs may generate costs or rewards to the team, and
  Globally optimal DCOP algorithms can incur large com- the overall utility of the joint action is determined by their
putation or communication costs for domains where the num- sum. If this problem were represented as a DCOP, nearby
ber of agents is large or where time is limited. However, in- AUVs would share constraints in the graph, while far-away
complete algorithms in which agents react on the basis of lo- AUVs would not. However, the actual rewards on these con-
cal knowledge of neighbors and constraint utilities can lead straints may not be known until the AUVs are deployed, and
                                                      in addition, due to time constraints, an incomplete, k-optimal
  ‚àóThis material is based upon work supported by the Defense Ad- algorithm, rather than a complete algorithm, must be used to
vanced Research Projects Agency (DARPA), through the Depart- Ô¨Ånd a solution. In this case, worst-case quality guarantees
ment of the Interior, NBC, Acquisition Services Division, under for k-optimal solutions for a given k, that are independent of
Contract No. NBCHD030010.                             the actual costs and rewards in the DCOP, are useful to help

                                                IJCAI-07
                                                  1446 R                                      R             the group {2, 3} deviated, making the assignment aÀú = [100],
  12  0  1                               23  0  1     team reward would increase from 16 to 20. The globally op-
                                                                    ‚àó =                        ‚àà{ , , }.
    0 10 0         1      2      3         0 20 0     timal solution, a [000]is k-optimal for all k 1 2 3
    1 0  5                                 1 0 11       In addition to categorizing local optima, k-optimality pro-
                                                      vides a natural classiÔ¨Åcation for DCOP algorithms. Many
              Figure 1: DCOP example                  algorithms are guaranteed to converge to k-optima, including
decide which algorithm to use. Alternatively, the guarantees DBA [Zhang et al., 2005a], DSA [Fitzpatrick and Meertens,
can help to choose between diÔ¨Äerent AUV formations, i. e. 2003], and coordinate ascent [Vlassis et al., 2004] for k = 1,
diÔ¨Äerent constraint graphs.                           and MGM-2 and SCA-2  [Maheswaran et al., 2004] for k = 2.
  We present two distinct types of guarantees for k-optima. Globally optimal algorithms such as Adopt [Modi et al.,
The Ô¨Årst, in Sections 3 and 4, is a lower bound on the qual- 2005], OptAPO [Mailler and Lesser, 2004] and DPOP [Petcu
                                                                                                =
ity of any k-optimum, expressed as a fraction of the quality and Faltings, 2005] convergetoak-optimum for k n.
of the optimal solution. The second, in Section 5, is a lower 3 Quality guarantees on k-optima
bound on the proportion of all DCOP assignments that a k-
                                                      This section provides reward-independent guarantees on so-
optimum must dominate in terms of quality. This type is use-
                                                      lution quality for any k-optimal DCOP assignment. If we
ful in approximating the diÔ¨Éculty of Ô¨Ånding a better solution
                                                      must choose a k-optimal algorithm for agents to use, it is use-
than a given k-optimum. For both, we provide general bounds
                                                      ful to see how much reward will be gained or lost in the worst
that apply to all constraint graph structures, as well as tighter
                                                      case by choosing a higher or lower value for k. We assume
bounds made possible if the graph is known in advance.
                                                      the actual costs and rewards on the DCOP are not known a
2  DCOP and     k-optima                              priori (otherwise the DCOP could be solved centrally ahead
                                                      of time). We provide a guarantee for a k-optimal solution as a
We consider a DCOP in which each agent controls a variable
                                                      fraction of the reward of the optimal solution, assuming that
to which it must assign a value. Constraints exist on subsets
                                                      all rewards in the DCOP are non-negative (the reward struc-
of these variables; each constraint generates a cost or reward
                                                      ture of any DCOP can be normalized to one with all non-
to the team based on the values assigned to each variable in
                                                      negative rewards as long as no inÔ¨Ånitely large costs exist).
the corresponding subset. Although we assume in this paper
that each agent controls a single variable, all results are valid Proposition 1 For any DCOP of n agents, with maximum
                                                      constraint arity of m, where all constraint rewards are non-
for cases in which agents control more than one variable.               ‚àó
  Formally, a DCOP is a set of variables (one per agent) negative, and where a is the globally optimal solution, then,
   = { ,..., }                   A  =  {A ,...,A },   for any k-optimal assignment, a, where m ‚â§ k < n,
N :   1    n  and a set of domains  :    1      n                               
         th                     ‚ààA                                             n‚àím
where the i variable takes value ai i. We denote the                           ‚àí
assignment of the multi-agent team by a = [a ¬∑¬∑¬∑a ]. Val-             R(a) ‚â•   k m  R(a‚àó).         (1)
                                       1    n                                n ‚àí n‚àím
ued constraints exist on various subsets S ‚äÇ N of these vari-                k    k
ables. A constraint on S is expressed as a reward function Proof: By the deÔ¨Ånition of k-optimality, any assignmenta Àú
RS (a). This function represents the reward generated by the such that d(a, aÀú) ‚â§ k must have reward R(Àúa) ‚â§ R(a). We call
constraint on S when the agents take assignment a; costs are this set of assignments AÀú. Now consider any non-null subset
expressed as negative rewards. Œ∏ is the set of all such subsets ÀÜ ‚äÇ Àú            ‚àà ÀÜ              Œ∏
                                 ‚àà Œ∏                  A    A. For any assignmenta ÀÜ A, the constraints in the
S on which a constraint exists, and no S is a subset of any DCOP can be divided into three discrete sets, given a anda ÀÜ:
other S ‚àà Œ∏. For convenience, we will refer to these subsets S
                                                        ‚Ä¢ Œ∏ (a, aÀÜ) ‚äÇ Œ∏ such that ‚àÄS ‚àà Œ∏ (a, aÀÜ), S ‚äÇ D(a, aÀÜ).
as ‚Äúconstraints‚Äù and the functions RS (¬∑) as ‚Äúconstraint reward 1                 1
functions.‚Äù The solution quality for a particular complete as- ‚Ä¢ Œ∏2(a, aÀÜ) ‚äÇ Œ∏ s.t. ‚àÄS ‚àà Œ∏2(a, aÀÜ), S ‚à© D(a, aÀÜ) = ‚àÖ.
signment a is the sum of the rewards for that assignment from
                                                       ‚Ä¢ Œ∏3(a, aÀÜ) ‚äÇ Œ∏ s.t. ‚àÄS ‚àà Œ∏3(a, aÀÜ), S  Œ∏1(a, aÀÜ) ‚à™ Œ∏2(a, aÀÜ).
all constraints in the DCOP: R(a) = ‚ààŒ∏ R (a).
                                S   S                   Œ∏   ,
  In [Pearce et al., 2006], the deviating group between two 1(a aÀÜ) contains the constraints that include only the vari-
                                                                                                   Œ∏  ,
assignments, a anda Àú, was deÔ¨Åned as D(a, aÀú):= {i ‚àà N : ables ina ÀÜ which have deviated from their values in a; 2(a aÀÜ)
a   aÀú }, i.e. the set of variables whose values ina Àú diÔ¨Äer contains the constraints that include only the variables ina ÀÜ
 i    i                                                                             Œ∏   ,
from their values in a. The distance between two assignments which have not deviated from a; and 3(a aÀÜ) contains the con-
was deÔ¨Åned as d(a, aÀú):= |D(a, aÀú)| where |¬∑|denotes the size straints that include at least one of each. Thus:
of the set. An assignment a is classiÔ¨Åed as a k-optimum if                              
    ‚àí      ‚â•   ‚àÄ             ,  ‚â§   .
R(a)  R(Àúa)  0  aÀú such that d(a aÀú) k Equivalently, at     R(ÀÜa) =    RS (ÀÜa) +   RS (ÀÜa) +  RS (ÀÜa).
a k-optimum, no subset of k or fewer agents can improve the       S ‚ààŒ∏1(a,aÀÜ) S ‚ààŒ∏2(a,aÀÜ) S ‚ààŒ∏3(a,aÀÜ)
overall reward by choosing diÔ¨Äerent values; every such subset
is acting optimally given the values of the others.     And, the sum of rewards of all assignmentsa ÀÜ in AÀÜ is:
                                                                                                
                                                               =               +          +
Example 1 Figure 1 is a binary DCOP in which agents        R(ÀÜa)          RS (ÀÜa)     RS (ÀÜa)    RS (ÀÜa)
                 { , }                  = { , }          ‚àà ÀÜ      ‚àà ÀÜ S ‚ààŒ∏ (a,aÀÜ) S ‚ààŒ∏ (a,aÀÜ) S ‚ààŒ∏ (a,aÀÜ)
choose values from 0 1 , with constraints S 1 1 2 and    aÀÜ A    aÀÜ A 1        2          3
   = { , }                                 =
S 2  2 3 with rewards shown. The assignment a [1 1 1]          ‚â•         RS (ÀÜa) +      RS (ÀÜa).
                                                                     ‚ààŒ∏ ,          ‚ààŒ∏ ,
is 1-optimal because any single agent that deviates reduces      aÀÜ‚ààAÀÜ S 1(a aÀÜ) aÀÜ‚ààAÀÜ S 2(a aÀÜ)
the team reward. However, [1 1 1] is not 2-optimal because if

                                                IJCAI-07
                                                  1447  Since R(a) > R(ÀÜa), ‚àÄaÀÜ ‚àà AÀÜ,                         We now show that Proposition 1 is tight, i.e. that there exist
                              
                           +                          DCOPs with k-optima of quality equal to the bound.
             aÀÜ‚ààAÀÜ S ‚ààŒ∏ (a,aÀÜ) RS (ÀÜa) aÀÜ‚ààAÀÜ S ‚ààŒ∏ (a,aÀÜ) RS (ÀÜa)
      R(a) ‚â•       1                2       .   (2)                ‚àÄ ,  ,             ‚â§   <
                           |AÀÜ|                       Proposition 2 n m k such that m   k    n, there exists
                                                      some DCOP with n variables, with maximum constraint ar-
                                                                                                   ‚àó
  Now, if the two numerator terms and the denominator can ity m with a k-optimal assignment, a, such that, if a is the
be expressed in terms of R(a‚àó) and R(a), then we have a bound globally optimal solution,
                   ‚àó                                                            
on R(a) in terms of R(a ). To do this, we consider the partic-                 n‚àím
                                                                               ‚àí
ular AÀÜ which contains all assignmentsa ÀÜ such that d(a, aÀÜ) = k,     R(a) =   k m  R(a‚àó).         (3)
   ‚àÄ  ‚àà  ÀÜ, ‚àÄ ‚àà    ,  ,  =  ‚àó                                                n ‚àí n‚àím
and  aÀÜ A   aÀÜi D(a aÀÜ) aÀÜi ai . This means that exactly                     k    k
k variables ina ÀÜ have deviated from their value in a, and these
                                            ‚àó         Proof: Consider a fully-connected m-ary DCOP where the
variables are taking the same values that they had in a .
             , ‚àó                                      domain of each variable contains at least two values {0,1} and
  There are d(a a ) assignmentsa ÀÜ ‚àà AÀÜ.Forevery constraint
             k                                      every constraint RS contains the following reward function:
                    d(a,a‚àó)‚àí|S |                                         ‚éß
S ‚àà Œ∏, there are exactly    diÔ¨Äerent assignmentsa ÀÜ ‚àà AÀÜ                    n‚àím
                      k‚àí|S |                                             ‚é™ (k‚àím)
                                                                         ‚é™    ‚àí   , ‚àÄi ‚àà S, a = 0
           ‚àà Œ∏  ,                                                        ‚é®‚é™ (n)‚àí(n m)    i
for which S  1(a aÀÜ). This is because there exists a unique            =  k   k
  ‚àà  ÀÜ                                 , ‚àó       ‚äÇ                RS (a) ‚é™1       , ‚àÄi ‚àà S, a = 1
aÀÜ  A for every subset of k variables in D(a a ). If S                   ‚é™               i
                                                                         ‚é©        ,
D(a, aÀÜ), as stipulated by the deÔ¨Ånition of Œ∏1(a, aÀÜ), then there         0       otherwise
are d(a, a‚àó) ‚àí|S | remaining variables from which k ‚àí|S | must
                                                                         ‚àó    ‚àó
                                           d(a,a‚àó)‚àí|S |                          =  , ‚àÄ
                       ,                                The optimal solution a is ai 1 i.Ifa is deÔ¨Åned such
be chosen to complete D(a aÀÜ), and so there are k‚àí|S |
                                                      that ai = 0, ‚àÄi, then Equation 3 is true. Now we show that a
possible assignmentsa ÀÜ for which this is true. For alla ÀÜ, for                              ,  =
     ‚àà Œ∏  ,         =     ‚àó                      =    is k-optimal. For any assignmenta ÀÜ, such that d(a aÀÜ) k,
all S   1(a aÀÜ), RS (ÀÜa) RS (a ), so aÀÜ‚ààAÀÜ S ‚ààŒ∏1(a,aÀÜ) RS (ÀÜa)                     
      ‚àó             ‚àó  
     d(a,a )‚àí|S | ‚àó ‚â• d(a,a )‚àím ‚àó                      R(ÀÜa) =    R(ÀÜa ) +   R(ÀÜa ) +    R(ÀÜa ).
 S ‚ààŒ∏  k‚àí|S | RS (a )  k‚àím  R(a ).                                S           S           S
                                             , ‚àó ‚àí| |       S ‚ààŒ∏ (a,aÀÜ) S ‚ààŒ∏ (a,aÀÜ) S ‚ààŒ∏ (a,aÀÜ)
  Similarly, for every constraint S ‚àà Œ∏, there are d(a a ) S  1           2        3      
                                              k             
   
      n‚àím         k n ‚àí n‚àím +  n‚àík n‚àím
 Ô¨Ä                   ‚àà  ÀÜ             ‚àà Œ∏   ,                k    n ‚àí k  k‚àím        m  k    k     m  k‚àím
di erent assignmentsa ÀÜ A for which S    2(a aÀÜ). If       ‚â§   +           + 0 =          
                                                                       n   n‚àím             n   n‚àím
S ‚à©D(a, aÀÜ) = ‚àÖ, as stipulated by the deÔ¨Ånition of Œ∏2(a, aÀÜ), then m m   ‚àí                  ‚àí
          , ‚àó ‚àí| |                                                     k    k              k    k
there are d(a a ) S remaining variables from which kmust         n!        n!(n ‚àí m ‚àí k)! ‚àí (n ‚àí m)!(n ‚àí k)!
                      ,                d(a,a‚àó)‚àí|S |        =               √∑
be chosen to complete D(a aÀÜ), and so there are k pos-      m!(k ‚àí m)!(n ‚àí k)!   k!(n ‚àí k)!(n ‚àí m ‚àí k)!
sible assignmentsa ÀÜ for which this is true. For alla ÀÜ, for all     n!k!(n ‚àí m ‚àí k)!
  ‚àà Œ∏  ,  ,     =                                =         =
S    2(a aÀÜ) RS (ÀÜa) RS (a), and, so aÀÜ‚ààAÀÜ S ‚ààŒ∏2(a,aÀÜ) RS (ÀÜa)  ‚àí        ‚àí  ‚àí   ‚àí   ‚àí    ‚àí
      ‚àó            ‚àó                                   m!(k  m)![n!(n m  k)! (n k)!(n m)!]
     d(a,a )‚àí|S |   d(a,a )‚àím                               
 
  ‚ààŒ∏        R  (a) ‚â•       R(a).                                         ‚àí      ‚àí   ‚àí
 S      k     S        k                                   = n         (n m)!k!(n m  k)!
  Therefore, from Equation 2,                                m (k ‚àí m)![n!(n ‚àí m ‚àí k)! ‚àí (n ‚àí m)!(n ‚àí k)!]
                                                                               
         , ‚àó ‚àí       , ‚àó ‚àí            , ‚àó ‚àí                 
   ‚àí              
     ‚àí
       d(a a ) m R(a‚àó) + d(a a ) m R(a) d(a a ) m               n m k!(n ‚àí m ‚àí k)!    n m
    ‚â•    k‚àím        k       ‚â•     k‚àím     ‚àó          = n  k‚àím            = n   k‚àím  =
 R(a)             ‚àó                ‚àó      ‚àó   R(a )               ‚àí ‚àí                         R(a)
                d(a,a )         d(a,a ) ‚àí d(a,a )‚àím          m  n!(n m k)! ‚àí (n ‚àí m)! m n ‚àí n‚àím
                 k                k       k                      (n‚àík)!             k    k
                           ‚àó                                                  
which is minimized when d(a, a ) = n, so Equation 1 holds                     n
                                                       because in a, each of the constraints in the DCOP are
as a guarantee for a k-optimum in any DCOP. It is possible                  m
                               ‚àí                      producing the same reward. Since this can be shown for
that k > n ‚àí m; in this case we take n m to be 0. 
                               k                      d(a, aÀÜ) = j, ‚àÄ j such that 1 ‚â§ j ‚â§ k, a is k-optimal. 
  For binary DCOPs (m = 2), Equation 1 simpliÔ¨Åes to:
                       (k ‚àí 1)                        4   Graph-based quality guarantees
               R(a) ‚â•         R(a‚àó).
                     (2n ‚àí k ‚àí 1)                     The guarantee for k-optima in Section 3 applies to all possible
                                                      DCOP graph structures. However, knowledge of the structure
The following example illustrates Proposition 1:      of constraint graphs can be used to obtain tighter guarantees.
Example 2 Consider a DCOP with Ô¨Åve variables numbered This is done by again expressing the two numerator terms in
1 to 5, with domains of {0,1}, fully connected with binary Equation 2 as multiples of R(a‚àó) and R(a). However, for a
constraints between all variable pairs. Suppose that a = sparse graph, if AÀÜ is chosen as deÔ¨Åned in Proposition 1, there
                                   ‚àó
[00000]is a 3-optimum, and that a    =  [11111]       may be many assignmentsa ÀÜ ‚àà AÀÜ that have few or no con-
                              ‚àó
is the global optimum. Then d(a, a ) = 5, and AÀÜ contains straints S in Œ∏ (a, aÀÜ) because the variables in D(a, aÀÜ) may not
   ‚àó                                                            1
d(a,a ) =                                             share any constraints. Instead, exploiting the graph structure
  k     10 assignments: [11100], [11010], [11001],
[10110],  [10101],  [10011],   [01110],  [01101],     by choosing a smaller AÀÜ can lead to a tighter bound. We can
                                                      take AÀÜ from Proposition 1, i.e. AÀÜ which contains alla ÀÜ such
[01011], [00111]. Whatever the values of the rewards  are,                                     ‚àó
                        ‚àó                   ‚àí                ,  =       ‚àÄ  ‚àà  ÀÜ, ‚àÄ ‚àà    ,  ,  =
                                            n 2 =     that d(a aÀÜ) k and aÀÜ  A  aÀÜi  D(a aÀÜ) aÀÜi ai . Then,
every constraint reward RS (a ) will equal RS (ÀÜa) for k‚àí2 3
                        ‚àó                             we restrict this AÀÜ further, so that ‚àÄaÀÜ ‚àà AÀÜ, the variables in
assignments in A(e.g.RÀÜ { , }(a ) = R{ , }(ÀÜa) for aÀÜ = [11100],
                    1 2       1 2                     D(a, aÀÜ) form a connected subgraph of the DCOP graph (or
[11010], and [11001]) and similarly, every constraint re-
                                                    hypergraph), meaning that any two variables in D(a, aÀÜ) must
                        n‚àí2 =               ÀÜ
ward RS (a) equals RS (ÀÜa) for k 1 assignment in A. Thus, be connected by some chain of constraints. This allows us to
    ‚â•  3     ‚àó = 1   ‚àó .                                                                              ‚àó
R(a)  10‚àí1 R(a ) 3 R(a )                              again transform Equation 2 to express R(a) in terms of R(a );

                                                IJCAI-07
                                                  1448this new method can produce tighter guarantees for k-optima in contrast to the constant-time guarantees of Equations 1,
in sparse graphs. As an illustration, provably tight guaran- 4 and 5. An LFP such as this is reducible to a linear pro-
tees for binary DCOPs on ring graphs (each variable has two gram (LP) [Boyd and Vandenberghe, 2004]. The objective is
                                                                  R(a)
constraints) and star graphs (each variable has one constraint to minimize ‚àó such that ‚àÄaÀú ‚àà AÀú, R(a) ‚àí R(Àúa) ‚â• 0, given
                                 ‚àí                               R(a )
except the central variable, which has n 1) are given below. AÀú as deÔ¨Åned in Proposition 1. Note that R(a‚àó) and R(a) can
                                                                            ‚àó            ‚àó
Proposition 3 For any binary DCOP of n agents with a  be expressed as S ‚ààŒ∏ RS (a ) and S ‚ààŒ∏ RS (a ). We can now
ring graph structure, where all constraint rewards are non-
             ‚àó                                        transform the DCOP so that every R(Àúa) can also be expressed
negative, and a is the globally optimal solution, then, for in terms of sums of R (a‚àó) and R (a), without changing or
                               <                                         S         S
any k-optimal assignment, a, where k n,               invalidating the guarantee on R(a). Therefore, the LFP will
                                                                                                    ‚àó
                        k ‚àí 1                         contain only two variables for each S ‚àà Œ∏, one for RS (a ) and
                  R(a) ‚â•    R(a‚àó).              (4)
                        k + 1                         one for RS (a), where the domain of each one is the set of non-
                                                      negative real numbers. The transformation is to set all reward
                             | ÀÜ| =             ,
Proof: Returning to Equation 2, A  n because D(a aÀÜ)  functions RS (¬∑) for all S ‚àà Œ∏ to 0, except for two cases: when
could consist of any of the n connected subgraphs of k vari-      ‚àà                          ‚àó
                                 ‚àà Œ∏           ‚àí      all variables i S have the same value as in a , or when all
ables in a ring. For any constraint S , there are k 1 i ‚àà S have the same value as in a. This has no eÔ¨Äect on R(a‚àó)
assignmentsa ÀÜ ‚àà AÀÜ for which S ‚àà Œ∏ (a, aÀÜ) because there are            ‚àó
                              1                       or R(a), because RS (a ) and RS (a) will be unchanged for all
k ‚àí 1 connected subgraphs of k variables in a ring that contain                                 ‚àó
                                     ‚àó              S ‚àà Œ∏. It also has no eÔ¨Äect on the optimality of a or the k-
S . Therefore, ‚àà ÀÜ ‚ààŒ∏ , R (ÀÜa) = (k‚àí1)R(a ). Also, there
             aÀÜ A S 1(a aÀÜ) S                         optimality of a, since the only change is to reduce the global
    ‚àí  ‚àí              ‚àà ÀÜ           ‚àà Œ∏  ,                                           ‚àó
are n k 1 assignmentsa ÀÜ A for which S 2(a aÀÜ) because reward for assignments other than a and a. Thus, the tight
there are n ‚àí k ‚àí 1 ways to choose S in a ring so that it does      R(a)
                                                      lower bound on  ‚àó still applies to the original DCOP.
not include any variable in a given connected subgraph of k       R(a )
variables. Therefore, ‚àà ÀÜ ‚ààŒ∏ , R (ÀÜa) = (n ‚àí k ‚àí 1)R(a).
                   aÀÜ A S 2(a aÀÜ) S                   5   Domination analysis of   k-optima
So, from Equation 2,
                                                      In this section we now provide a diÔ¨Äerent type of guaran-
                 (k ‚àí 1)R(a‚àó) + (n ‚àí k ‚àí 1)R(a)
           R(a) ‚â•                                     tee: lower bounds on the proportion of all possible DCOP as-
                           n                          signments which any k-optimum must dominate in terms of
and therefore Equation 4 holds.                      solution quality. This proportion, called a domination ratio,
                                                      provides a guide for how diÔ¨Écult it may be to Ô¨Ånd a solu-
Proposition 4 For any binary DCOP of n agents with a  tion of higher quality than a k-optimum; this metric is com-
star graph structure, where all constraint rewards are non-
negative, and a‚àó is the globally optimal solution, then, for monly used to evaluate heuristics for combinatorial optimiza-
any k-optimal assignment, a, where k < n,             tion problems [Gutin and Yeo, 2005].
                                                        For example, suppose for some k, the solution quality guar-
                        k ‚àí 1
                  R(a) ‚â•    R(a‚àó).              (5)   antee from Section 4 for any k-optimum was 50% of optimal,
                        n ‚àí 1                         but, additionally, it was known that any k-optimum was guar-
Proof: The proof is similar to the previous proof. In a star anteed to dominate 95% of all possible assignments to the
               n‚àí1                                    DCOP. Then, at most only 5% of the other assignments could
graph, there are   subgraphs of k variables, and there-
             k‚àí1                                    be of higher quality, indicating that it would likely be com-
    | ÀÜ| = n‚àí1                  ‚àà Œ∏
fore A    k‚àí1 . Every constraint S  includes the cen- putationally expensive to Ô¨Ånd a better assignment, either with
                                               n‚àí2    a higher k algorithm, or by some other method, and so a k-
tral variable and one other variable, and thus there are ‚àí
                                               k 2    optimal algorithm should be used despite the low guarantee
connected  subgraphs of k variables  that contain S , and there-
                         n‚àí2   ‚àó                      of 50% of the optimal solution quality. Now suppose instead
fore  ‚àà ÀÜ  ‚ààŒ∏ , R  (ÀÜa) =   R(a ). Finally, there are no
     aÀÜ A S 1(a aÀÜ) S    k‚àí2                          for the same problem, the k-optimum was guaranteed to dom-
ways to choose S so that it does not include any variable inate only 20% of all assignments. Then it becomes more
in a given connected subgraph of k variables. Therefore, likely that a better solution could be found quickly, and so the
  ‚àà ÀÜ  ‚ààŒ∏ , R  (ÀÜa) = 0R(a). So, from Equation 2,
 aÀÜ A S 2(a aÀÜ) S                                     k-optimal algorithm might not be recommended.
                       
                      n‚àí2  ‚àó +                          To Ô¨Ånd the domination ratio, observe that any k-optimum a
                      ‚àí R(a ) 0R(a)
               R(a) ‚â• k 2                           must be of the same or higher quality than alla Àú ‚àà AÀú as deÔ¨Åned
                           n‚àí1
                           k‚àí1                        in Proposition 1. So, the ratio is:
                                                                             + | Àú|
and therefore Equation 5 holds.                                             1  A  .
                                                                                |A |                   (6)
  Tightness can be proven by constructing DCOPs on ring                      i‚ààN  n
and chain graphs with the same rewards as in Proposition 2;
proofs are omitted for space. The bound for rings can also be If the constraint graph is fully connected (or not known, and
applied to chains, since any chain can be expressed as a ring so must be assumed to be fully  connected), and each variable
                                                                     | Àú| = k  n   ‚àí  j         |A | = n
where all rewards on one constraint are zero.         has q values, then A  j=1 j (q 1) and  i‚ààN  n   q .
  Finally, bounds for DCOPs with arbitrary graphs and non- If the graph is known to be not fully connected, then the set
negative constraint rewards can be found using a linear- AÀú from Equation 6 can be expanded to include assignments of
fractional program (LFP). This method gives a tight bound distance greater than k from a, providing a stronger guarantee
for any graph, since it instantiates the rewards for all con- on the ratio of the assignment space that must be dominated
straints, but requires a globally optimal solution to the LFP, by any k-optimum. SpeciÔ¨Åcally, if a is k-optimal, then any

                                                IJCAI-07
                                                  1449                                                                              
                                               ‚â§                             ‚â•               
assignment where any number of disjoint subsets of size k and so S ‚ààŒ∏:S ‚à©D ‚àÖ RS (a) S ‚ààŒ∏:S ‚à©D ‚àÖ RS (a ) because the
                                                                    n                 n              
have deviated from a must be of the same or lower quality as rewards from agents outside Dn are the same for a and a .
                                                                                       =               n
a, as long as no constraint includes any two agents in diÔ¨Äerent We also know that S ‚ààŒ∏:S ‚à©Dn=‚àÖ RS (a) S ‚ààŒ∏:S ‚à©Dn=‚àÖ RS (Àúa )
such subsets; this idea is illustrated below:         because the rewards from agents outside Dn are the same for
                                                      a anda Àún; therefore,
Example 3 Consider a binary DCOP of Ô¨Åve variables, num-                                     
                                                                         n‚àí1                          n
bered 1 to 5, with domains of two values, with unknown con- R(a) ‚â•   RS (Àúa ) +      RS (a ) +     RS (Àúa )
straint graph. Any 3-optimum must be of equal or greater     ‚ààŒ∏ ‚à© n‚àí1‚àÖ      S ‚ààŒ∏:S ‚à©D ‚àÖ   S ‚ààŒ∏:S ‚à©Dn=‚àÖ
                                                     S :SD              n          
               5    5   5   5
quality than 1 + +    +   /2  = 81.25% of all possible                   n             n             n
               1    2   3                                  =         RS (Àúa ) +    RS (Àúa ) +     RS (Àúa )
                                                                  ‚àí                            n
assignments, i.e. where 0, 1, 2, or 3 agents have deviated.  S ‚ààŒ∏:S ‚à©Dn 1‚àÖ S ‚ààŒ∏:S ‚à©Dn‚àÖ  S ‚ààŒ∏:S ‚à©D =‚àÖ
  Now, suppose the graph is known to be a chain with vari-
                                                       because the rewards from Dn‚àí1 are the same fora Àún‚àí1 anda Àún,
ables ordered by number. Since a deviation by either the                                        n
variables {1,2} or {4,5} cannot increase global reward, and and the rewards from Dn are the same for a anda Àú . There-
                                                               ‚â•    n 
no constraint exists across these subsets, then neither can a fore, R(a) R(Àúa ).
deviation by {1,2,4,5}, even though four variables are deviat-
                      {     }    {      }             6   Experimental results
ing. The same applies to 1,3,4,5 and 1,2,3,5 , since both While the main thrust of this paper is on theoretical guaran-
are made up of subsets of three or fewer variables that do tees for k-optima, this section gives an illustration of the guar-
not share constraints. So,  a 3-optimum    is now of equal or antees in action, and how they are aÔ¨Äected by constraint graph
                   +  5 + 5 +  5 +  / 5 =   .
greater quality than 1 1  2    3   3 2    90 63% of   structure. Figures 2a, 2b, and 2c show quality guarantees for
all assignments.                                     binary DCOPs with fully connected graphs, ring graphs, and
  An improved guarantee can be found by enumerating the star graphs, calculated directly from Equations 1, 4 and 5.
set AÀú of assignmentsa Àú with equal or lower reward than a; this Figure 2d shows quality guarantees for binary-tree DCOPs,
set is expanded due to the DCOP graph structure as in the obtained using the LFP from Section 4. The x-axis plots the
above example. The following proposition makes this possi- value chosen for k, and the y-axis plots the lower bound for k-
ble; we introduce new notation for it: If we deÔ¨Åne n diÔ¨Äerent optima as a percentage of the optimal solution quality for sys-
                        =   ...         m = ‚à™m        tems of 5, 10, 15, and 20 agents. These results show how the
subsets of agents as Di for i 1 n, we use D   i=1Di,
i.e. Dm is the union of the Ô¨Årst m subsets. The proof is by worst-case beneÔ¨Åt of increasing k varies depending on graph
induction over each subset Di for i = 1 ...n.         structure. For example, in a Ô¨Åve-agent DCOP, a 3-optimum is
                                                      guaranteed to be 50% of optimal whether the graph is a star
Proposition 5 Let a be some k-optimal assignment. Let aÀún
                                                      or a ring. However, moving to k = 4 means that worst-case
be another assignment for which D(a, aÀún) can be expressed
                                                      solution quality will improve to 75% for a star, but only to
as Dn = ‚à™n D where:
        i=1 i                                         60% for a ring. For fully connected graphs, the beneÔ¨Åt of in-
  ‚Ä¢‚àÄ   , | |‚â§
     Di  Di  k. (subsets contain k or fewer agents)   creasing k goes up as k increases; whereas for stars it stays
                                                                                                     =
  ‚Ä¢‚àÄDi, D j, Di ‚à© D j = ‚àÖ. (subsets are disjoint)     constant, and for chains it decreases, except for when k n.
                                                      Results for binary trees are mixed.
  ‚Ä¢‚àÄDi, D j, i ‚àà Di, j ‚àà D j such that i, j ‚àà S, for any S ‚àà Œ∏.
    (no constraint exists between agents in diÔ¨Äerent subsets) Figure 3 shows the domination ratio guarantees for k-
                                                      optima from Section 5, for DCOPs where variables have do-
Then, R(a) ‚â• R(Àúan).
Proof:
                          n                   n
  Base case: If n = 1 then D = D1 and R(a) ‚â• R(Àúa )by
deÔ¨Ånition of k-optimality.
  Inductive step: R(a) ‚â• R(Àúan‚àí1) ‚áí R(a) ‚â• R(Àúan).
  The set of all agents can be divided into the set of agents in
 n‚àí1                                             n
D   , the set of agents in Dn, and the set of agents not in D .
Also, by inductive hypothesis, R(a) ‚â• R(Àúan‚àí1). Therefore,
                                  
R(a) =        RS (a) +     RS (a) +      RS (a)
           ‚àí         ‚ààŒ∏ ‚à© ‚àÖ      ‚ààŒ∏ ‚à© n=‚àÖ
     S ‚ààŒ∏:S‚à©Dn 1‚àÖ S :S Dn      S :S D 
    ‚â•            n‚àí1 +           n‚àí1 +           n‚àí1
              RS (ÀúaS )      RS (Àúa )        RS (Àúa )
      ‚ààŒ∏ ‚à© n‚àí1‚àÖ      S ‚ààŒ∏:S ‚à©D ‚àÖ    S ‚ààŒ∏:S ‚à©Dn=‚àÖ
    S :S D               n
                    ‚â•                n‚àí1
so  S ‚ààŒ∏:S ‚à©Dn‚àí1‚àÖ RS (a) S ‚ààŒ∏:S ‚à©Dn‚àí1‚àÖ RS (Àúa ) because the
rewards from agents outside Dn‚àí1 are the same for a anda Àún‚àí1.
                                      
  Let a be an assignment such that D(a, a ) = Dn =
D(Àúan‚àí1, aÀún). Because a is k-optimal, R(a) ‚â• R(a); therefore,
                                   
 R(a) =        RS (a) +      RS (a) +     RS (a)
            ‚àí         ‚ààŒ∏ ‚à© ‚àÖ       ‚ààŒ∏ ‚à© n=‚àÖ
       S ‚ààŒ∏:S‚à©Dn 1‚àÖ S :SDn      S :S D
                                             
     ‚â•         RS (a ) +     RS (a ) +      RS (a ).  Figure 2: Quality guarantees for k-optima with respect to the
            ‚àí                            n
       S ‚ààŒ∏:S ‚à©Dn 1‚àÖ S ‚ààŒ∏:S ‚à©Dn‚àÖ  S ‚ààŒ∏:S ‚à©D =‚àÖ      global optimum for DCOPs of various graph structures.


                                                IJCAI-07
                                                  1450