             Incorporating     a  folding  rule  into  inductive   logic  programming
                                         David  A. Rosenblueth
                  Instituto de Investigaciones en MatematicasÂ´ Aplicadas y en Sistemas
                              Universidad  Nacional  AutonomaÂ´  de MexicoÂ´
                                   Apdo.  20-726, 01000  MexicoÂ´ D. F.
                                                Mexico


                                      drosenbl@servidor.unam.mx


                                                                       Â¦    
                    Abstract                          expressions Â¦Â¨ and , and â€œ â€ denotes equality up to vari-
                                                      able renaming.


    Many inductive logic programming systems have
                                                                                                        
                                                        When  used to fold two clauses, the folding rule infers Â¥ F


    operators reorganizing the program so far inferred,


                                                           Â¥   Â¥   Â¥      Â¥  


                                                                  Â¨           


                                                      from D Â¨ , E  , D  , and E :


                                                                Â¢                          Â¢
                                                                                           Â£


    such as the intra-construction operator of CIGOL.          Â£


                                                                 Â¨    Â¥ Â¨          Â¡       Â¥ 


    At the same time, there is a similar reorganizing    Â¡Â¨         D                          D


                                                               Â¢    Â¢                     Â¢     Â¢




                                                         Â 
                                                                                     Â 


                                                              Â£                           Â£


                                                                    Â¤                          Â¤




                                                                     Â¥                           Â¥
                                                                        Â¨               
  


    operator, called the â€œfolding rule,â€ developed in           Â¨Â©Â¨
 E                         E


                                                                                 Â¢
                                                                         Â 


    program transformation. We argue that there are                             Â¤


                                                                                   Â¥
                                                                                     
    advantages in using an extended folding rule as a                      Â¡
    F


    reorganizing operator for inductive-inference sys- where Â¡ Â¡Â¨!Â©Â¨"Â¡ . In addition, there are some syn-
    tems. Such an extended folding rule allows an     tactic restrictions for soundness, for which we refer the reader


    inductive-inference system not only to recognize  to [Pettorossi and Proietti, 1998]. An application of folding


                                                                Â¨#  Â¥   Â¥ 
    already-learned concepts, but also to increase the replaces Â¥ E and E by F .


    efï¬ciently of execution of inferred programs.       Observe that this rule has the limitation of requiring both


                                                                                                       Â 


                                                                       Â¥      Â¥  
                                                                                 


                                                      clauses to be folded E Â¨ and E , to have the same head


                                                                                Â¢
                                                                                Â¤


1  Introduction                                       and the same part of the body which is not an instance of


                                                                               Â¨   Â¥ 
                                                      the bodies of the deï¬nition Â¥ D and D .
At ï¬rst glance, it might seem that inductive logic program- On the other hand, folding has the advantage of allowing


ming (ILP) and logic program transformation (LPT) have


                                                                Â¥      Â¥  
                                                                           
                                                      the clauses D Â¨ and D  to be drawn from a previous pro-
opposite objectives. While ILP is interested in generalizing gram [Pettorossi et al., 1996].
from examples, LPT is careful to preserve correctness. Nev- To be able to perform a comparison with intra-
ertheless, there are ILP operators, like the intra-construction construction, we will assume that intra-construction consists
operator of CIGOL, that do not generalize, and instead reor- of two parts: ï¬rst the â€œinventionâ€ of a predicate, and then the
ganize the program so far inferred. This suggests looking at clause-reorganization proper. The second part would then be:


logic program transformation rules to obtain better nongener-


                                                                      Â¥ Â¨          Â¡    Â¥ 


                                                             Â¡$Â¨     D                       D
                                                                                           Â¢


alizing operators for ILP.                                         Â¢




                                                                                     Â 
                                                             Â 




                                                                                           Â¤
                                                                   Â¤






                                                                                              Â¥
                                                                      Â¥                        
                                                                




                                                                                            
                                                                    Â¨   Â¨                      


  One LPT  rule, called â€œfolding,â€ [Pettorossi and Proietti,   Â¨       E                       E


                                                                                 Â¢
                                                                         Â 


1998] is reminiscent of intra-construction, with some impor-                    Â¤


                                                                                   Â¥
                                                                           Â¡

                                                                                    F 
tant differences. For example whereas intra-construction pro-


                                                      where






                                                                             Â¢
                                                                                           Â¢
                                                                                                    Â¢





                                                                          Â             Â 

duces the deï¬nition of a new predicate (i.e. â€œconceptâ€), fold-                                  Â 






                                                                             Â¤
                                                                                           Â¤
                                                                                                   Â¤






                                                                          Â¥ 
 %     Â¥&Â¥
                                                                                          
  
Â¥
                                                                                                  
   &


                                                                                         Â¨  Â¨
                                                                                                     
ing receives as input such a deï¬nition, so that there is a sepa-                  msg            




rate, dedicated rule for creating a deï¬nition. The reason there              Â¡')(*Â¥,+-Â¨
.#..#
&+0/1
                                                                                           2


is such a separate rule in LPT is that the derivation of efï¬-                        2


                                                                             Â¡23)(*Â¥,4 
#.#..#
4 


                                                                                     Â¨     /
                                                                                       Â¢


ciently executable programs is closely related to being able to Â¢


                                                        Â                           Â 


                                                           Â¤                          Â¤


                                                                   2         2


                                                        Â¥ 
 !5+-Â¨#64 
#..#.#
+0/764 :Â¥ 2
 2;
                                                                             /98
fold using an already-existing deï¬nition.                          Â¨


  Researchers have developed several reorganizing operators An application of the second part of intra-construction also


                                                                Â¨#   Â¥   Â¥ 
for ILP. Such operators can be found, for instance in the sys- replaces Â¥ E and E by F . Compared with folding, not
tems devised by Muggleton, Banerji, Ling, and Rouveirol and only must the deï¬nition clauses be unit clauses, but their ar-


Puget. We have selected Muggletonâ€™s intra-construction as a gument places must be terms that undo the generalization


                                                                          Â¥  Â¨#   Â¥ 
representative of these operators for performing a comparison when resolving Â¥ F with D and D . If we are introduc-
with folding. The main ideas of our comparison, however, ing a new deï¬nition, such constraints might not be relevant.


should carry over to other similar operators.
                                           Â¢


                                     Â¢                If, however, we wish to recognize an already-inferred concept


             Â 


                                     Â£
                                           Â¤


  Throughout,  and Â¡ denote atoms, and and   denote   or we are interested in increasing the efï¬ciency of execution
tuples of atoms (we will assume deï¬nite logic programs). of our inferred program, it might be important to be able to


Also, msg Â¥Â§Â¦Â©Â¨
Â¦ denotes the most speciï¬c generalization of relax such limitations.2  A  common    extension of folding and              both folding and intra-construction are unable to derive the


   intra-construction                                 desired concept from (4) and (5):


                                                                         
    
&+       Â¥Â§+ 
As an illustration showing the need for increasing the efï¬-      arch Â¥&Â¥,+ beam      column          (6)
ciency of an inferred program, consider the string-matching Being able to derive the concise version of arch (6) might
problem. This problem consists in ï¬nding all occurrences (or be important if we have already the same concept under a


only one occurrence, if any) of a string called the pattern different name:


                                                                          
     
&+ &     Â¥,+ 


within another string called the text. Suppose that our pat-    gateway Â¥&Â¥Â§+ beam     column
                Â¢

tern is the string Â Â¡Â  . If we give the following two examples, We have recently extended the ordinary folding rule so as


both of which are a text having an occurrence of this pattern: to overcome these limitations of folding [Rosenblueth, 2005].
                          Â¢Â¦Â§



                   Â£                                  Our extension can be viewed as a common generalization of


                    Â¥Â¤ Â 9
Â¦Â  
  
                    Â¥                           (1)




                            Â¢Â¦Â§                       ordinary folding and intra-construction:


                   Â£


                                                              Â¢                            Â¢


                                                             Â£                             Â£


                    Â¥Â¥Â¤ Â 9
Â¦Â  
Â¨Â  
  


                                                               Â¨      Â¥ Â¨          Â¡        Â¥  


                                                        Â¡$Â¨          D                            D




                                                                                           Â¢     Â¢
                                                              Â¢    Â¢




                                                                                     Â 
                                                        Â 




                                                                                           Â£
                                                             Â£
                                                                                                Â¤


we can apply absorption, deriving:                                 Â¤




                                                                                             
    Â¥
                                                                
   Â¥                              




                                                                                               
                                                               Â¨ Â¨  Â¨   Â¨                            


                                                         Â¨             E                            E


                        Â§




                                                                                                Â¢
                                                                   Â¢


                  Â£          Â£




                                                                                     Â 
                                                        Â 




                                                                                                Â¤
                                                                   Â¤


                    Â¥Â¤ Â 
Â© +   Â¥Â§+ 


                    Â¥                           (2)




                                                                                        Â¡   
    Â¥
                                                           Â¡   
   Â¥                              




                                                                                              
                                                               Â¨ Â¨  Â¨   Â¨                            


                                                         Â¨             F                            F


                                                                                 Â¢
                                                                         Â 


A third example:                                                                Â¤


                                                                                   Â¥ 


                                                                           Â¡
    F


                      Â¢     Â¢Â§


                   Â£


                    Â¨Â¤ 
Â¨Â  
Â¨Â  
  


                    Â¥                                 where


                                                                    Â¢             Â¢        Â¢


                                                                 Â             Â         Â 


                                                                    Â¤             Â¤       Â¤


                                                                   
       Â¥&Â¥ Â¨
 Â¨!
Â¥ Â©
 &


allows us to apply absorption again, inferring:                  Â¥       msg




                                                                             Â¥Â§Â¡   
 Â¡   
                                                                    Â¡  


                                                                               Â¨ Â¨Â¨  #
                        Â§


                     Â¢                                                   msg


                   Â£         Â£


                                                                                                Â¢


                                                                                                Â£


                    Â¥Â¤ Â© +   Â¥Â§+ 


                    Â¥                           (3)


                                                            2                                         2
                                                                                                 2
                                                      Here,   only acts on the variables occurring in , and 




Clauses (1), (2), and (3) can be regarded as representing a only acts on the variables occurring in Â¡2 and not occurring


                                                         Â¢


                                            Â¢    Â¢


                                                        Â£


                                       Â¥Â  Â Â¡Â 




                                                                                         
                                                                                      Â¥
                                                                                        2
ï¬nite-state automaton accepting the language      .   in  2 (i.e. the head-only variables in D ). In addition, we


However, these clauses are a nondeterministic program, re- preserve the syntactic conditions on Â©2 developed for ordinary
quiring a quadratic time in the worst case to ï¬nd an oc- (multiple-clause) folding [Pettorossi and Proietti, 1998].


currence of the pattern. Note that this program cannot be The main point of our folding rule is the computation
                                                                         2
converted to a deterministic version with intra-construction. of the substitutions  in such a way that soundness is
A reason is that we would need to be able to apply intra- preserved. We distinguish two kinds of head-only vari-


construction without inventing a new predicate at every ap- able instantiation: (a) coverage, taking a function sym-


                                                                                                      Â¢
                                                                                                   Â 


plication. (Such already-existing predicates represent edges                                          Â¤


                                                                                         2        Â¥ 2
 2 


                                                      bol or variable from the substitutions  , where


                                                                  Â¢       Â¢


                                                              Â        Â 
                                                                          Â¤


going backwards in the corresponding automaton.) Allow-          Â¤


                                                            Â¥Â¥ Â¨
 Â¨#!
Â¥  
  2 %Â©

                                                        msg                    (       ), and (b) matching,
ing the use of already-existing deï¬nitions is accompanied by taking the function symbol from the corresponding position


a possible violation of the conditions for intra-construction in the clause of the other single-clause folding.
       Â¡
(i.e. the 2 â€™s may not have the required form).         The contributions of this poster over [Rosenblueth, 2005]
                                              [
  This limitation suggests using the ordinary folding Pet- are (1) the comparison of folding with intra-construction and
                     ]
torossi and Proietti, 1998 rule as part of the operator reper- (2) the development of inductively inferred example pro-
                          [                  ]
toire of an ILP system. In fact, Pettorossi et al., 1996 show grams. We are currently investigating the possibility of em-
how to determinize a program similar to the one we just in-
                                                      bedding our folding rule in CIGOL.
ferred with absorption (given as speciï¬cation by the user),
where the folding rule plays a central role.          References
  The ordinary folding rule [Pettorossi and Proietti, 1998],
however, is not adequate for inductive logic programming: [Pettorossi and Proietti, 1998] Alberto Pettorossi and Maur-


We observed that this rule requires the set of atoms that do izio Proietti. Transformation of logic programs. In Dov M.


                                           Â¢
                                    Â 
not match the bodies of the deï¬nition (i.e. and Â¤ ) be the Gabbay, C. J. Hogger, and J. A. Robinson, editors, Hand-


                                                         book of Logic in Artiï¬cial Intelligence and Logic Program-


                                 Â¨   Â¥ 
same in each clause to be folded (i.e. Â¥ E and E ).
  Now  we give another illustration. Suppose an inductive- ming, volume 5, pages 697â€“787. Oxford University Press,


inference system has inferred the following description of an 1998.
                                  Â§


                          Â§                           [                  ]


                        Â¨Â¤ 
    
Â¤ 
arch, where the example arch Â¥&Â¥ beam is not given until Pettorossi et al., 1996 Alberto Pettorossi, Maurizio Proi-


later:                                                   etti, and Sophie Renault. Enhancing partial deduction
                          Â§


              Â§                                          via unfold/fold rules. In Proc. 6th Int. Workshop on


        Â¥Â¤ +Â©  
  
Â¤ +Â©           Â¥Â§+ !



    arch Â¥&Â¥    beam           brick or block            Logic Program Synthesis and Transformation, pages 146â€“


                                      
                               column Â¥         (4)      168, Stockholm, Sweden, 1996. Springer-Verlag. Lecture


            Â§                                            Notes in Computer Science No. 1207.


          Â¥Â¤  
    column Â¥


                Â§                                     [Rosenblueth, 2005] David A. Rosenblueth. A multiple-


          Â¥Â¥Â¤ +Â©               Â¥,+ !
    Â¥ 
                  
    column         brick or block   column
                                                         clause folding rule using instantiation and generalization.


If we now add the example:                               submitted to Fundamenta Informaticae (Special Issue on
                               Â§


                       Â§                                 Program Transformation), 2005.


                    Â¨Â¤ 
     
Â¤  
                arch Â¥&Â¥ beam                   (5)